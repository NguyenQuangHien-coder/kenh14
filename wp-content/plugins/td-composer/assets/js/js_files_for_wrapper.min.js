/*
 http://jqueryui.com
 Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.sortable.js
 Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
var tdcNotice;
(function(f,d){tdcNotice={$_noticeWrapper:d,_isInitialized:!1,_errorNotices:[],inError:!1,notice:function(b,e,a){var c={};_.isUndefined(e)||!0!==e||(c.type="error");_.isUndefined(a)||!0!==a||(c.hasClose=!0);tdcNotice.showNotice(b,c)},showNotice:function(b,e){if(tdcNotice._isInitialized){var a="",c="",g=!1,h=5E3;if("undefined"!==typeof e){if("undefined"!==typeof e.type)switch(e.type){case "error":a="tdc-notice-error";g=!0;break;case "info":a="tdc-notice-info"}"undefined"!==typeof e.hasClose&&!0===
e.hasClose&&(c='<div class="tdc-close-notice"></div>');"undefined"!==typeof e.timeout&&(h=e.timeout)}g&&(b+=" Current state has involved an issue. You could try an UNDO operation (CTRL+Z / CTRL+SHIFT+Z)");var d=f('<div class="tdc-notice '+a+'"><span class="tdc-msg-tag"></span>'+b+c+"</div>");tdcNotice.$_noticeWrapper.append(d);setTimeout(function(){d.addClass("tdc-notice-in")},100);if(g)throw tdcNotice._errorNotices.push(d),tdcNotice.inError=!0,tdcRecycle.init(),f("body").addClass("tdcComposerLoaded"),
b;setTimeout(function(){d.removeClass("tdc-notice-in")},h-1E3);setTimeout(function(){d.css("margin-top","-"+d.outerHeight()+"px")},h-500);setTimeout(function(){d.remove()},h)}},removeAll:function(){tdcNotice._errorNotices.forEach(function(b,e){b.remove()})},init:function(){tdcNotice._isInitialized||(tdcNotice.$_noticeWrapper=f('<div class="tdc-notice-wrapper"></div>'),tdcNotice.$_noticeWrapper.on("click",".tdc-close-notice",function(b){f(this).closest(".tdc-notice").remove()}),f("#tdc-live-iframe-wrapper").append(tdcNotice.$_noticeWrapper),
tdcNotice._isInitialized=!0)}};tdcNotice.init()})(jQuery);var tdcDebug;
(function(f,d){tdcDebug={_debug:!0,_logWindowObj:d,_content:d,_disabled:!1,log:function(b){tdcDebug._debug&&console.log(b)},dumpAllItems:function(){var b=tdcAdminIFrameUI.getIframeWindow();console.group("All items dump:");"undefined"!==typeof b.tdcComposerBlocksApi&&(console.log("%c tdcComposerBlocksApi.items ","background: #222; color: white"),console.log(b.tdcComposerBlocksApi.items));"undefined"!==typeof b.tdPullDown&&(console.log("%c tdPullDown.items ","background: #222; color: white"),console.log(b.tdPullDown.items));
"undefined"!==typeof b.tdAnimationSprite&&(console.log("%c tdAnimationSprite.items ","background: #222; color: white"),console.log(b.tdAnimationSprite.items));"undefined"!==typeof b.tdHomepageFull&&(console.log("%c tdHomepageFull.items ","background: #222; color: white"),console.log(b.tdHomepageFull.items));"undefined"!==typeof b.tdTrendingNow&&(console.log("%c tdTrendingNow.items ","background: #222; color: white"),console.log(b.tdTrendingNow.items));console.groupEnd()},group:function(b,e){!1!==
tdcDebug._debug&&(console.group?console.group(b,e):console.log(b))},groupCollapsed:function(b,e){!1!==tdcDebug._debug&&(console.groupCollapsed?console.groupCollapsed(b,e):console.log(b))},groupEnd:function(){!1!==tdcDebug._debug&&console.groupEnd&&console.groupEnd()},logWindow:function(b){if(d===tdcDebug._logWindowObj){tdcDebug._logWindowObj=f("<div></div>");var e=f('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Clear</div>'),a=f('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Disable</div>');
tdcDebug._content=f('<div style="clear: both"></div>');tdcDebug._logWindowObj.append(e);tdcDebug._logWindowObj.append(a);e.click(function(a){tdcDebug._content.html("")});a.click(function(a){tdcDebug._disabled=!tdcDebug._disabled;tdcDebug._disabled?f(this).css("background-color","#FF000"):f(this).css("background-color","")});tdcDebug._logWindowObj.append(tdcDebug._content);f("body").append(tdcDebug._logWindowObj);tdcDebug._logWindowObj.css({width:300,height:500,border:"1px solid red",position:"fixed",
bottom:0,right:20,"background-color":"#FFFFFF",overflow:"scroll","z-index":1E4})}tdcDebug._disabled||tdcDebug._content.html(b+"<br>"+tdcDebug._content.html())}}})(jQuery);var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(f,d){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+f+"&"+d:window.tdcAdminSettings.wpRestUrl+f+"?"+d},makeSafeForCSS:function(f){return f.replace(/[^a-z0-9]/g,function(d){var b=d.charCodeAt(0);return 32===b?"-":65<=b&&90>=b?d.toLowerCase():"__"+("000"+b.toString(16)).slice(-4)})},updateTdcSavings:function(f,d){jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_parts","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{tdc_savings:window.tdcAdminSettings.tdcSavings,action:"tdc_ajax_save_parts"}}).done(function(b,e,a){"success"===e&&(_.isObject(b)&&_.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):("undefined"!==typeof d&&d.call(f),tdcSidebar.updateSavedShortcodes()))}).fail(function(b,e,a){})},b64EncodeUnicode:function(f){return btoa(encodeURIComponent(f).replace(/%([0-9A-F]{2})/g,
function(d,b){return String.fromCharCode("0x"+b)}))},b64DecodeUnicode:function(f){return decodeURIComponent(atob(f).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join(""))},setStorageItem:function(f,d){var b=tdcUtil._getStorage();b=null===b?{}:JSON.parse(tdcUtil.b64DecodeUnicode(b));b[f]=d;tdcUtil._setStorage(tdcUtil.b64EncodeUnicode(JSON.stringify(b)))},getStorageItem:function(f){var d=tdcUtil._getStorage();if(null!==d)try{if(d=JSON.parse(tdcUtil.b64DecodeUnicode(d)),
d.hasOwnProperty(f))return d[f]}catch(b){}},clearItem:function(){},_getStorage:function(){return window.localStorage.getItem(window.tdcAdminSettings.themeName)},_setStorage:function(f){window.localStorage.setItem(window.tdcAdminSettings.themeName,f)}}})();var tdcRecycle;
(function(f,d,b){tdcRecycle={_maxItems:20,_currentIndex:0,_items:[],_timeout:b,_timoutSavingHistory:b,$_restoreItem:b,$_restoreContent:b,$_undo:b,$_redo:b,_isInitialized:!1,item:function(b,a,c,g){this.timestamp=b;this.description=a;this.shortcode=c;this.headerTemplateData=g},init:function(){tdcRecycle._isInitialized||(tdcRecycle.$_restoreItem=f("#tdc-restore"),tdcRecycle.$_restoreContent=f("#tdc-restore-content"),tdcRecycle.$_undo=f(".tdc-restore-undo"),tdcRecycle.$_redo=f(".tdc-restore-redo"),tdcRecycle.$_restoreItem.on("click",
function(b){tdcRecycle.$_restoreContent.toggle()}),tdcRecycle.$_restoreContent.on("click",".tdc-snapshot",function(e){d.isUndefined(tdcRecycle._timeout)||clearTimeout(tdcRecycle._timeout);tdcRecycle._timeout=setTimeout(function(a){a=f(a);var c=new tdcJobManager.job,e=a.find(".tdc-snapshot-shortcode"),h=a.find(".tdc-snapshot-header"),n=tdcUtil.b64DecodeUnicode(e.html()),l=JSON.parse(tdcUtil.b64DecodeUnicode(h.html()));tdcNotice.removeAll();tdcRecycle._currentIndex=a.prevAll(".tdc-snapshot").length;
tdcRecycle.$_restoreContent.find(".tdc-snapshot-active").removeClass("tdc-snapshot-active");a.addClass("tdc-snapshot-active");c.shortcode=n;c.columns=3;c.success_callback=function(a){var c=f(tdcAdminIFrameUI._$liveIframe).contents(),g=c.find(".tdc-content-wrap");d.has(a,"replyHtml")&&g.html(a.replyHtml);window.addWrappers(c,".td-main-content-wrap","tdc_content");tdcIFrameData._isInitialized=!1;tdcIFrameData._postOriginalContentJSON=b;window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(a.shortcode);
tdcState.getHeaderTemplateId()!==l.tdc_header_template_id||tdcState.getHeaderTemplateContent()!==l.tdc_header_template_content?(tdcState.setHeaderTemplateId(l.tdc_header_template_id),tdcState.setHeaderTemplateContent(l.tdc_header_template_content),""===l.tdc_assoc_header_template?tdcState.setGlobalHeaderTemplate():tdcState.unsetGlobalHeaderTemplate(),"no_header"===l.tdc_header_template_id?tdcState.setNoHeader():tdcState.unsetNoHeader(),tdcState.isGlobalHeaderTemplate()?tdcSidebar.$_headerTemplateList.val(""):
tdcState.isNoHeader()?tdcSidebar.$_headerTemplateList.val(l.tdc_header_template_id):tdcSidebar.$_headerTemplateList.val("tdb_template_"+l.tdc_header_template_id),tdcIFrameData.setHeaderTemplate(l.tdc_header_template_content,b,{is_snapshot:!0,indexPath:e.data("index_path")})):(tdcState.isNoHeader()&&["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(a,c){tdcIFrameData.rebuildZone(a,"[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]",
b,{is_snapshot:!0})}),tdcIFrameData._callbackShortcodeRender({lateCallback:function(){var c=f(tdcAdminIFrameUI._$liveIframe).contents();tdcSidebar._currentModel=b;tdcIFrameData.init(c,!0);tdcRecycle.clearJsItems();tdcOperationUI.init(c);d.has(a,"replyJsForEval")&&tdcAdminIFrameUI.evalInIframe(a.replyJsForEval);tdcSidebarPanel.showShortcodeFromPath(e.data("index_path"))}}))};c.error_callback=function(a,c){tdcDebug.log(c);tdcDebug.log(a)};c.is_snapshot=!0;tdcJobManager.addJob(c);tdcSidebarPanel.clearPanel()},
500,this)}),tdcRecycle.$_undo.on("click",tdcRecycle._undo),tdcRecycle.$_redo.on("click",tdcRecycle._redo),tdcRecycle._getData(),tdcRecycle.takeSnapshot(),tdcRecycle.saveHeaderState(),tdcRecycle.saveFooterState(),document.body.addEventListener("keydown",tdcRecycle._checkKeyDown,!0),document.getElementById("tdc-live-iframe").contentDocument.addEventListener("keydown",tdcRecycle._checkKeyDown,!0),tdcRecycle._isInitialized=!0)},_getData:function(){var b=tdcRecycle.$_restoreContent.find(".tdc-snapshot");
b.length&&b.each(function(){var a=f(this);a=new tdcRecycle.item(a.children(":nth-child(1)").data("timestamp"),"Restore point",tdcUtil.b64DecodeUnicode(a.children(":nth-child(3)").html()),a.children(":nth-child(4)").html());tdcRecycle._items.unshift(a)});1<tdcRecycle._items.length&&(tdcRecycle.$_undo.addClass("tdc-restore-active"),tdcRecycle.$_redo.removeClass("tdc-restore-active"))},_getIndexPath:function(b){var a="";if(!d.isUndefined(b)){a=b.get("parentModel");if(d.isUndefined(a))return"tdc_zone"===
b.get("tag")?tdcIFrameData.tdcTopCollection.indexOf(b):"";var c=a.get("childCollection");a=tdcRecycle._getIndexPath(a)+"_"+c.models.indexOf(b)}return a},_undo:function(b){1!==tdcRecycle._items.length&&(tdcRecycle._currentIndex++,tdcRecycle._currentIndex>tdcRecycle._items.length-1?tdcRecycle._currentIndex=tdcRecycle._items.length-1:(tdcRecycle._currentIndex===tdcRecycle._items.length-1&&tdcRecycle.$_undo.removeClass("tdc-restore-active"),b=tdcRecycle.$_restoreContent.find(".tdc-snapshot:eq("+tdcRecycle._currentIndex+
")"),b.length&&b.trigger("click"),1<tdcRecycle._items.length&&tdcRecycle.$_redo.addClass("tdc-restore-active")))},_redo:function(b){1!==tdcRecycle._items.length&&(tdcRecycle._currentIndex--,0>tdcRecycle._currentIndex?tdcRecycle._currentIndex=0:(0===tdcRecycle._currentIndex&&tdcRecycle.$_redo.removeClass("tdc-restore-active"),b=tdcRecycle.$_restoreContent.find(".tdc-snapshot:eq("+tdcRecycle._currentIndex+")"),b.length&&b.trigger("click"),1<tdcRecycle._items.length&&tdcRecycle.$_undo.addClass("tdc-restore-active")))},
_checkKeyDown:function(b){if(90===b.keyCode&&b.ctrlKey){if(b.shiftKey)return tdcRecycle._redo(),!1;b.preventDefault();tdcNotice.inError&&(tdcNotice.inError=!1);tdcRecycle._undo();return!1}if(83===b.keyCode&&b.ctrlKey)return b.preventDefault(),tdcAdminWrapperUI.savePostHandler(b),!1},saveHeaderState:function(){var e={error:b,getShortcode:""};tdcIFrameData.getShortcodeFromData(e);d.isUndefined(e.error)||tdcDebug.log(e.error);d.isUndefined(e.getShortcode)||""===e.getShortcode?window.tdcAdminSettings.lastHeaderTemplateData=
"":(e=tdcSavePost.getHeaderTemplateData(),window.tdcAdminSettings.lastHeaderTemplateData=e.tdc_header_template_content)},saveFooterState:function(){var e={error:b,getShortcode:""};tdcIFrameData.getShortcodeFromData(e);d.isUndefined(e.error)||tdcDebug.log(e.error);d.isUndefined(e.getShortcode)||""===e.getShortcode?window.tdcAdminSettings.lastFooterTemplateData="":(e=tdcSavePost.getFooterTemplateData(),window.tdcAdminSettings.lastFooterTemplateData=tdcUtil.b64EncodeUnicode(JSON.stringify(e.tdc_footer_template_content)))},
takeSnapshot:function(e){var a={error:b,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);d.isUndefined(a.error)||tdcDebug.log(a.error);if(!d.isUndefined(a.getShortcode)&&""!==a.getShortcode){var c=tdcUtil.b64EncodeUnicode(JSON.stringify(tdcSavePost.getHeaderTemplateData()));if(!tdcRecycle._isLastSnapshot(a.getShortcode,c)){tdcRecycle._currentIndex=0;d.isUndefined(e)&&(e="Restore point");var g=new Date;e=new tdcRecycle.item(g.getTime(),e,a.getShortcode,c);a=tdcRecycle._getIndexPath(tdcSidebar.getCurrentModel());
tdcRecycle._maxItems===tdcRecycle._items.length&&(tdcRecycle._items.splice(tdcRecycle._items.length-1,1),tdcRecycle.$_restoreContent.find(".tdc-snapshot:last").remove());tdcRecycle._items.push(e);c=tdcRecycle.$_restoreContent.find(".tdc-snapshot-active");c.length&&(c.prevAll().each(function(a,c){tdcRecycle._items.splice(0,1);f(c).remove()}),c.removeClass("tdc-snapshot-active"));tdcRecycle.$_restoreContent.prepend('<div class="tdc-snapshot tdc-snapshot-active"><div style="width: 150px; float: left">'+
g.toLocaleDateString()+" "+g.toLocaleTimeString()+'</div><div style="width: 350px; float: left">Before '+e.description+'</div><div class="tdc-snapshot-shortcode" style="display: none" data-index_path="'+a+'">'+tdcUtil.b64EncodeUnicode(e.shortcode)+'</div><div class="tdc-snapshot-header" style="display: none">'+e.headerTemplateData+"</div></div>");1<tdcRecycle._items.length&&(tdcRecycle.$_undo.addClass("tdc-restore-active"),tdcRecycle.$_redo.removeClass("tdc-restore-active"));clearTimeout(tdcRecycle._timoutSavingHistory);
tdcRecycle._timoutSavingHistory=setTimeout(function(){tdcSavePost.saveHistory()},1E3)}}},_isLastSnapshot:function(b,a){return 0===tdcRecycle._currentIndex&&tdcRecycle._items.length&&tdcRecycle._items[tdcRecycle._items.length-1].shortcode===b&&tdcRecycle._items[tdcRecycle._items.length-1].headerTemplateData===a?!0:!1},_cloneCurrentItem:function(){if(0!==tdcRecycle._currentIndex){var b=tdcRecycle._items.find(function(a,c,b){return c===tdcRecycle._items.length-1-tdcRecycle._currentIndex});if(!d.isUndefined(b)){var a=
new Date,c=new tdcRecycle.item(a.getTime(),b.description+" - restored",b.shortcode,b.headerTemplateData),g=tdcRecycle._getIndexPath(tdcSidebar.getCurrentModel());tdcRecycle._maxItems===tdcRecycle._items.length&&(tdcRecycle._items.splice(tdcRecycle._items.length-1,1),tdcRecycle.$_restoreContent.find(".tdc-snapshot:last").remove());tdcRecycle._items.push(c);tdcRecycle.$_restoreContent.prepend('<div class="tdc-snapshot"><div style="width: 150px; float: left">'+a.toLocaleDateString()+" "+a.toLocaleTimeString()+
'</div><div style="width: 350px; float: left">Before '+c.description+'</div><div class="tdc-snapshot-shortcode" style="display: none" data-index_path="'+g+'">'+tdcUtil.b64EncodeUnicode(c.shortcode)+'</div><div class="tdc-snapshot-header" style="display: none" data-index_path="'+g+'">'+tdcUtil.b64EncodeUnicode(c.headerTemplateData)+"</div></div>");1<tdcRecycle._items.length&&(tdcRecycle.$_undo.addClass("tdc-restore-active"),tdcRecycle.$_redo.removeClass("tdc-restore-active"));return b.shortcode}}},
clearJsItems:function(){var b=tdcAdminIFrameUI.getIframeWindow();if("undefined"!==typeof b.tdcComposerBlocksApi)for(;b.tdcComposerBlocksApi.items.length;)b.tdcComposerBlocksApi.deleteItem(b.tdcComposerBlocksApi.items[b.tdcComposerBlocksApi.items.length-1].blockUid);if("undefined"!==typeof b.tdPullDown)for(;b.tdPullDown.items.length;)b.tdPullDown.deleteItem(b.tdPullDown.items[b.tdPullDown.items.length-1].blockUid);if("undefined"!==typeof b.tdAnimationSprite)for(;b.tdAnimationSprite.items.length;)b.tdAnimationSprite.deleteItem(b.tdAnimationSprite.items[b.tdAnimationSprite.items.length-
1].blockUid);if("undefined"!==typeof b.tdHomepageFull)for(;b.tdHomepageFull.items.length;)b.tdHomepageFull.deleteItem(b.tdHomepageFull.items[b.tdHomepageFull.items.length-1].blockUid);if("undefined"!==typeof b.tdTrendingNow)for(;b.tdTrendingNow.items.length;)b.tdTrendingNow.deleteItem(b.tdTrendingNow.items[b.tdTrendingNow.items.length-1].blockUid)}}})(jQuery,_);var tdcState;
(function(f,d,b,e){tdcState={_headerTemplateId:"",_headerTemplateContent:"",_isGlobalHeaderTemplate:!1,_isNoHeader:!1,_isHeaderSticky:!1,_isMobileHeaderSticky:!1,_isGlobalFooterTemplate:!1,_isNoFooter:!1,_isMobileTemplate:!1,init:function(a,c,b,e,g,h,d,n,f){tdcState.setHeaderTemplateId(a);tdcState.setHeaderTemplateContent(c);b&&tdcState.setGlobalHeaderTemplate();e&&tdcState.setNoHeader();tdcState.setFooterTemplateId(g);tdcState.setFooterTemplateContent(h);d&&tdcState.setGlobalFooterTemplate();n&&
tdcState.setNoFooter();tdcState._isMobileTemplate=f},setHeaderTemplateId:function(a){tdcState._headerTemplateId=a;"no_header"===tdcState._headerTemplateId?tdcState.setNoHeader():tdcState.unsetNoHeader()},getHeaderTemplateId:function(){return tdcState._headerTemplateId},setHeaderTemplateContent:function(a){tdcState._headerTemplateContent=a},getHeaderTemplateContent:function(){return tdcState._headerTemplateContent},setGlobalHeaderTemplate:function(){tdcState._isGlobalHeaderTemplate=!0},unsetGlobalHeaderTemplate:function(){tdcState._isGlobalHeaderTemplate=
!1},isGlobalHeaderTemplate:function(){return tdcState._isGlobalHeaderTemplate},setNoHeader:function(){tdcState._isNoHeader=!0},unsetNoHeader:function(){tdcState._isNoHeader=!1},isNoHeader:function(){return tdcState._isNoHeader},setHeaderSticky:function(){tdcState._isHeaderSticky=!0},unsetHeaderSticky:function(){tdcState._isHeaderSticky=!1},isHeaderSticky:function(){return tdcState._isHeaderSticky},setMobileHeaderSticky:function(){tdcState._isMobileHeaderSticky=!0},unsetMobileHeaderSticky:function(){tdcState._isMobileHeaderSticky=
!1},isMobileHeaderSticky:function(){return tdcState._isMobileHeaderSticky},setFooterTemplateId:function(a){tdcState._footerTemplateId=a},getFooterTemplateId:function(){return tdcState._footerTemplateId},setFooterTemplateContent:function(a){tdcState._footerTemplateContent=a},getFooterTemplateContent:function(){return tdcState._footerTemplateContent},setGlobalFooterTemplate:function(){tdcState._isGlobalFooterTemplate=!0},unsetGlobalFooterTemplate:function(){tdcState._isGlobalFooterTemplate=!1},isGlobalFooterTemplate:function(){return tdcState._isGlobalFooterTemplate},
setNoFooter:function(){tdcState._isNoFooter=!0},unsetNoFooter:function(){tdcState._isNoFooter=!1},isNoFooter:function(){return tdcState._isNoFooter},isMobileComposer:function(){return"1"===tdcState._isMobileTemplate}};f=window.tdcPostSettings.headerTemplateId;d=window.tdcPostSettings.headerTemplateContent;var a=e=!1,c=window.tdcPostSettings.footerTemplateId,g=window.tdcPostSettings.footerTemplateContent,h=!1,n=!1;""===f?(f=window.tdcAdminSettings.headerTemplateId.toString().replace("tdb_template_",
""),d=window.tdcAdminSettings.headerTemplateContent,e=!0):"no_header"===f&&(a=!0);if(""!==d){var l=JSON.parse(tdcUtil.b64DecodeUnicode(d));b.isUndefined(l.tdc_is_header_sticky)||!0!==l.tdc_is_header_sticky||tdcState.setHeaderSticky();b.isUndefined(l.tdc_is_mobile_header_sticky)||!0!==l.tdc_is_mobile_header_sticky||tdcState.setMobileHeaderSticky()}""===c?(c=window.tdcAdminSettings.footerTemplateId.toString().replace("tdb_template_",""),g=window.tdcAdminSettings.footerTemplateContent,h=!0):"no_footer"===
c&&(n=!0);tdcState.init(f,d,e,a,c,g,h,n,tdcPostSettings.isMobileTemplate)})(jQuery,Backbone,_);var tdcSavePost;
(function(f,d,b,e){tdcSavePost={content:e,savePost:function(){if((b.isUndefined(window.tdcPostSettings.tdbTemplateType)||"header"!==window.tdcPostSettings.tdbTemplateType)&&"footer"!==window.tdcPostSettings.tdbTemplateType){if("single"===window.tdcPostSettings.tdbTemplateType){var a=f("#tdc-live-iframe");a.length&&(a=a.contents().find(".td_block_wrap.tdb_single_content:first"),a.length&&tdcLivePanel.$tdcSinglePostContentWidth.val(a.outerWidth(!0)))}a={error:e,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);
b.isUndefined(a.error)||tdcDebug.log(a.error);b.isUndefined(a.getShortcode)||b.isUndefined(window.tdcPostSettings)||(tdcSavePost.content=a.getShortcode,tdcLivePanel.$tdcAction.val("tdc_ajax_save_post"),tdcLivePanel.$tdcContent.val(tdcSavePost.content),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_post","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce);tdcLivePanelMenuSettings.saveMenuSettings()},
data:tdcLivePanel.$panel.serialize()}).done(function(a,e,h){window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(tdcSavePost.content);f(".tdc-save-page").removeClass("tdc-saving-loader");"success"===e&&(b.isObject(a)&&b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(new tdcNotice.notice("Content Successfully Saved!",!1,!0),0!==tdcLivePanel.$tdbPostSettings.length&&!0===tdcLivePanel.$tdbPostSettings.data("changed")&&new tdcNotice.notice("Single Templates Post Settings Successfully Saved!",
!1,!0)),tdcMain.resetContentModified(),tdcLivePanel.$tdbPostSettings.data("changed",!1))}).fail(function(a,b,e){}))}},saveHistory:function(){if(1!==tdcRecycle._items.length){for(var a=[],c=0;c<tdcRecycle._items.length;c++)a.push({timestamp:tdcRecycle._items[c].timestamp,description:tdcRecycle._items[c].description,shortcode:tdcUtil.b64EncodeUnicode(tdcRecycle._items[c].shortcode),headerTemplateData:tdcRecycle._items[c].headerTemplateData});tdcLivePanel.$tdcAction.val("tdc_ajax_save_history");tdcLivePanel.$tdcContent.val(tdcUtil.b64EncodeUnicode(JSON.stringify(a)));
window.localStorage.setItem("tdc_history-"+tdcLivePanel.$tdcPostId.val(),JSON.stringify(a))}},updateHeaderTemplate:function(){var a=tdcSavePost.getHeaderTemplateData(),c={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"update_header_template",tdc_header_template_id:a.tdc_header_template_id,tdc_header_template_content:a.tdc_header_template_content,tdc_assoc_header_template:a.tdc_assoc_header_template,tdc_post_id:tdcLivePanel.$tdcPostId.val()};window.tdcAdminSettings.lastHeaderTemplateData=a.tdc_header_template_content;
f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_header_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:c}).done(function(a,c,e){window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(tdcSavePost.content);f(".tdc-save-page").removeClass("tdc-saving-loader");"success"===c&&b.isObject(a)&&(b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(b.has(a,"header_template_id")&&
(tdcState.setHeaderTemplateId(a.header_template_id),tdcSidebar.updateHeaderTemplates()),tdcMain.resetContentModified(),tdcSidebar.setCurrentHeaderTemplate(),new tdcNotice.notice("Header Successfully Saved!",!1,!0)))}).fail(function(a,c,b){})},getHeaderTemplateData:function(){var a=tdcState.getHeaderTemplateId(),c="",b={};""!==a&&"no_header"!==a&&(c=tdcUtil.b64EncodeUnicode(JSON.stringify(tdcIFrameData.getHeaderShortcodeFromData())));tdcState.setHeaderTemplateId(a);tdcState.setHeaderTemplateContent(c);
b.tdc_header_template_id=a;b.tdc_header_template_content=c;b.tdc_assoc_header_template=tdcState.isGlobalHeaderTemplate()?"":!0;return b},cloudLoadHeaderTemplate:function(a,c,g,h,d){b.isUndefined(a)||(h={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"load_header_template",tdc_header_template_content:a,tdc_header_template_title:h},b.isUndefined(g)||(h.tdc_header_template_id=g),b.isUndefined(d)||(h.tdc_header_is_mobile=d),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/load_header_template",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:h}).done(function(g,h,d){"success"===h&&b.isObject(g)&&(b.has(g,"errors")?new tdcNotice.notice(g.errors,!0,!1):b.has(g,"header_template_id")&&(tdcState.setHeaderTemplateId(g.header_template_id),tdcState.unsetGlobalHeaderTemplate()),tdcSidebar.updateHeaderTemplates(),tdcIFrameData.setHeaderTemplate(a,c),b.isUndefined(window.tdcPostSettings.prevTemplateType)||(window.tdcPostSettings.tdbTemplateType=
window.tdcPostSettings.prevTemplateType,window.tdcPostSettings.prevTemplateType=e))}).fail(function(a,c,b){}))},assignCloudLoadHeaderTemplate:function(a,c,g,h,d,l,k){b.isUndefined(a)||(a={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"load_header_template",tdc_header_template_content:a,tdc_header_template_title:h,tdc_header_is_mobile:!0},b.isUndefined(g)||(a.tdc_header_template_id=g),b.isUndefined(d)||(a.tdc_header_is_mobile=d),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/load_header_template",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:a}).done(function(a,c,g){"success"===c&&b.isObject(a)&&(b.has(a,"errors")&&new tdcNotice.notice(a.errors,!0,!1),!b.has(a,"header_template_id")||b.isUndefined(l)||b.isUndefined(k)||l.call(k,a.header_template_id),b.isUndefined(window.tdcPostSettings.prevTemplateType)||(window.tdcPostSettings.tdbTemplateType=window.tdcPostSettings.prevTemplateType,window.tdcPostSettings.prevTemplateType=
e))}).fail(function(a,c,b){}))},cloudLoadFooterTemplate:function(a,c,g,h){b.isUndefined(a)||(h={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"load_footer_template",tdc_footer_template_content:a,tdc_footer_template_title:h},b.isUndefined(g)||(h.tdc_footer_template_id=g),tdcState.isMobileComposer()&&(h.tdc_footer_is_mobile=1),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/load_footer_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},data:h}).done(function(g,h,d){"success"===h&&b.isObject(g)&&(b.has(g,"errors")?new tdcNotice.notice(g.errors,!0,!1):b.has(g,"footer_template_id")&&(tdcState.setFooterTemplateId(g.footer_template_id),tdcState.unsetGlobalFooterTemplate()),tdcSidebar.updateFooterTemplates(),tdcIFrameData.setFooterTemplate(a,c),b.isUndefined(window.tdcPostSettings.prevTemplateType)||(window.tdcPostSettings.tdbTemplateType=window.tdcPostSettings.prevTemplateType,window.tdcPostSettings.prevTemplateType=
e))}).fail(function(a,c,b){}))},getFooterTemplateData:function(){var a=tdcState.getFooterTemplateId(),c="",b={};""!==a&&"no_footer"!==a&&(c=tdcIFrameData.getFooterShortcodeFromData());tdcState.setFooterTemplateId(a);tdcState.setFooterTemplateContent(c);b.tdc_footer_template_id=a;b.tdc_footer_template_content=c;b.tdc_assoc_footer_template=tdcState.isGlobalFooterTemplate()?"":!0;return b},saveMobileMenu:function(a,c){f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_header_mobile_menu",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{template_id:a,menu_id:c}}).done(function(a,e,d){"success"===e&&(b.isObject(a)&&b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):window.tdcPostSettings.mobileMenuId=c)}).fail(function(a,c,b){})},updateFooterTemplate:function(){var a=tdcSavePost.getFooterTemplateData(),c={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"update_footer_template",tdc_footer_template_id:a.tdc_footer_template_id,
tdc_footer_template_content:a.tdc_footer_template_content,tdc_assoc_footer_template:a.tdc_assoc_footer_template,tdc_post_id:tdcLivePanel.$tdcPostId.val()};tdcState.isMobileComposer()&&(c.tdc_footer_is_mobile=1);window.tdcAdminSettings.lastFooterTemplateData=a.tdc_footer_template_content;f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_footer_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
data:c}).done(function(a,c,e){window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(tdcSavePost.content);f(".tdc-save-page").removeClass("tdc-saving-loader");"success"===c&&b.isObject(a)&&(b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(b.has(a,"footer_template_id")&&(tdcState.setFooterTemplateId(a.footer_template_id),tdcSidebar.updateFooterTemplates()),tdcMain.resetContentModified(),tdcSidebar.setCurrentFooterTemplate(),new tdcNotice.notice("Footer Successfully Saved!",!1,!0)))}).fail(function(a,
c,b){})}}})(jQuery,Backbone,_);var tdcShortcodeParser={};
(function(){tdcShortcodeParser={levels:{},init:function(f){tdcShortcodeParser.levels=_.clone(f);tdcShortcodeParser.levels[3]=tdcShortcodeParser.levels[3].concat(tdcShortcodeParser.levels[5])},multiNext:function(f,d){f=tdcShortcodeParser.levels[f];for(var b,e=0;e<f.length;e++){var a=tdcShortcodeParser.generateTreeElement(wp.shortcode.next(f[e],d));"undefined"!==typeof a&&("undefined"===typeof b||b.index>a.index)&&(b=a)}return b},parse:function(f,d){for(var b=tdcShortcodeParser.multiNext(f,d),e=0,a=
[];"undefined"!==typeof b&&5E3>e;)d=d.substring(b.index+b.content.length),5>f&&(b.child=tdcShortcodeParser.parse(f+1,b.content)),a.push(b),b=tdcShortcodeParser.multiNext(f,d),e++;return a},generateTreeElement:function(f){return f}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(f){this.shortcode=f.shortcode;this.columns=f.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(f){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var d=new tdcJobManager.jobRequest(f),
b="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&(b+="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId);!1!==window.tdcPostSettings.tdbTemplateType&&(b+="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+d.jobId+"&tmp_blockUid="+d.blockUid+"&post_id="+window.tdcPostSettings.postId+b+"&uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},cache:!1,data:d,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},success:function(b,a,c){null===b?f.error_callback(d,"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(f.blockUid,b.jobId)?f.success_callback(b):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),
tdcDebug.groupEnd())},error:function(b,a,c){f.error_callback(d,"tdcJobManager.addJob - Error callback - textStatus: "+a+" errorThrown: "+c);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(f,d){return"undefined"===typeof tdcJobManager._sentJobs[f]||parseInt(tdcJobManager._sentJobs[f])<parseInt(d)?(tdcJobManager._sentJobs[f]=d,!0):!1},_generateJobId:function(){var f=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return f},_getUniqueID:function(){function f(){return Math.floor(65536*
(1+Math.random())).toString(16).substring(1)}return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()}}})();var tdcAdminWrapperUI;
(function(f,d){tdcAdminWrapperUI={$placeholder:d,$helper:d,$savePage:d,_helperClass:"",$recycle:d,_initialized:!1,init:function(){tdcAdminWrapperUI._tdcJqObjElements=f(".tdc-sidebar-elements");tdcAdminWrapperUI.helperId="tdc-dragged-helper";tdcAdminWrapperUI.placeholderId="tdc-placeholder";tdcAdminWrapperUI.maskId="tdc-mask";tdcAdminWrapperUI.$helper=f('<div id="'+tdcAdminWrapperUI.helperId+'"></div>');tdcAdminWrapperUI.$placeholder=f('<span id="'+tdcAdminWrapperUI.placeholderId+'"></span>');f("body").append(tdcAdminWrapperUI.$helper);
f("body").append(tdcAdminWrapperUI.$placeholder);tdcAdminWrapperUI.$savePage=f(".tdc-save-page");tdcAdminWrapperUI.$savePage.on("click",tdcAdminWrapperUI.savePostHandler);f(document).bind("click",function(b){f("#tdc-context-menu").hide()})},savePostHandler:function(b){tdcAdminWrapperUI.$savePage.hasClass("tdc-saving-loader")||(tdcAdminWrapperUI.$savePage.addClass("tdc-saving-loader"),"Newspaper"===window.tdcAdminSettings.themeName&&(tdcSavePost.updateHeaderTemplate(),tdcSavePost.updateFooterTemplate()),
tdcSavePost.savePost())},setHelperClass:function(b){tdcAdminWrapperUI._helperClass!==b&&(tdcAdminWrapperUI._helperClass=b,tdcAdminWrapperUI.$helper.addClass(b))},getHelperClass:function(){return tdcAdminWrapperUI._helperClass},clearHelperClass:function(){tdcAdminWrapperUI._helperClass=""}};tdcAdminWrapperUI.init()})(jQuery);var tdcOperationUI;
(function(f,d,b,e){tdcOperationUI={iframeContents:e,_draggedElement:{$element:e},_currentElementOver:{$element:e},_copiedElement:{$element:e},_emptyElementClass:"tdc-element-empty",_isPlaceholderVisible:!1,_intervalUpdateInfoHelper:e,_isMenuDeactivated:!1,_isActiveElementOver:!1,init:function(a,c){window.previousMouseClientX=0;window.previousMouseClientY=0;tdcOperationUI.iframeContents=a;tdcZoneUI.init(tdcOperationUI.iframeContents);tdcRowUI.init(tdcOperationUI.iframeContents);tdcColumnUI.init(tdcOperationUI.iframeContents);
tdcInnerRowUI.init(tdcOperationUI.iframeContents);tdcInnerColumnUI.init(tdcOperationUI.iframeContents);tdcElementUI.init(tdcOperationUI.iframeContents);tdcRecycleUI.init(c);tdcOperationUI.iframeContents.find("body").find("#"+tdcAdminWrapperUI.maskId).length||(tdcAdminWrapperUI.$mask=f('<div id="'+tdcAdminWrapperUI.maskId+'"></div>'),tdcOperationUI.iframeContents.find("body").append(tdcAdminWrapperUI.$mask));tdcMaskUI.init(tdcAdminWrapperUI.$mask,c);c&&(f(window).mousedown(function(a){tdcOperationUI.inactiveElementOver()}).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();
tdcOperationUI.hideHelper()}).mousemove(function(a){tdcOperationUI.showHelper(a)}).keydown(function(a){tdcOperationUI._keyDownHandler(a)}),a.mousedown(function(a){tdcSidebar.setSettings({$currentZone:e,$currentRow:e,$currentColumn:e,$currentInnerRow:e,$currentInnerColumn:e,$currentElement:e});tdcSidebar.closeModals()}).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(e);tdcElementUI.positionElementPlaceholder(a)}).mousemove(function(a){tdcOperationUI.showHelper(a);
window.previousMouseClientX=a.clientX;window.previousMouseClientY=a.clientY}).scroll(function(a){tdcOperationUI.isElementDragged()?tdcElementUI.positionElementPlaceholder(a):tdcOperationUI.isInnerColumnDragged()?tdcInnerColumnUI.positionInnerColumnPlaceholder(a):tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?tdcInnerRowUI.positionInnerRowPlaceholder(a):tdcOperationUI.isColumnDragged()?tdcColumnUI.positionColumnPlaceholder(a):(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())&&
tdcRowUI.positionRowPlaceholder(a)}).keydown(function(a){tdcOperationUI._keyDownHandler(a)}),tdcAdminWrapperUI.$helper.mouseup(function(a){tdcOperationUI.hideHelper()}))},_keyDownHandler:function(a){if(27===a.keyCode){var c=tdcOperationUI.getSelectedElement();tdcContextMenu.setContextMenu(a,c)&&tdcContextMenu.exitHandler(a)}tdcOperationUI.isActiveElementOver()&&(67===a.keyCode?a.ctrlKey&&(c=tdcOperationUI.getSelectedElement(),tdcContextMenu.setContextMenu(a,c)&&tdcContextMenu.copyShortcodeHandler(a)):
86===a.keyCode?a.ctrlKey&&(c=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,c)&&(a.shiftKey?tdcContextMenu.pasteBeforeShortcodeHandler(a):tdcContextMenu.pasteAfterShortcodeHandler(a))):83===a.keyCode?a.shiftKey&&(c=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,c)&&tdcContextMenu.saveShortcodeHandler(a)):68===a.keyCode?a.ctrlKey&&(c=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,c)&&tdcContextMenu.cloneHandler(a)):88===a.keyCode?
a.ctrlKey&&(c=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,c)&&tdcContextMenu.cutShortcodeHandler(a)):"Delete"===a.key&&(c=tdcOperationUI.getSelectedElement(),tdcContextMenu.setContextMenu(a,c)&&tdcContextMenu.deleteHandler(a)))},setDraggedElement:function(a){tdcOperationUI._draggedElement.$element=a;b.isUndefined(a)||(tdcOperationUI._draggedElement.classes=a[0].className.split(" "))},getDraggedElement:function(){return tdcOperationUI._draggedElement.$element},hasClassDraggedElement:function(a){if(!b.isUndefined(tdcOperationUI._draggedElement.$element))return-1!==
tdcOperationUI._draggedElement.classes.indexOf(a)},addClassDraggedElement:function(a){b.isUndefined(tdcOperationUI._draggedElement.$element)||tdcOperationUI._draggedElement.$element.addClass(a)},setCurrentElementOver:function(a){if(!b.isUndefined(a)||!b.isUndefined(tdcOperationUI._currentElementOver.$element))if(b.isUndefined(a)||b.isUndefined(tdcOperationUI._currentElementOver.$element)||!a.is(tdcOperationUI._currentElementOver.$element.get(0)))tdcOperationUI._currentElementOver.$element=a,b.isUndefined(a)||
(tdcOperationUI._currentElementOver.elementOuterHeight=a.outerHeight(!0),tdcOperationUI._currentElementOver.elementOuterWidth=a.outerWidth(!0),tdcOperationUI._currentElementOver.elementHeight=a.outerHeight(),tdcOperationUI._currentElementOver.elementWidth=a.outerWidth(),tdcOperationUI._currentElementOver.elementOffset=a.offset(),tdcOperationUI._currentElementOver.elementPosition=a.position(),tdcSidebarPanel.blurInputPanel(),tdcOperationUI.activeElementOver())},getCurrentElementOver:function(){return tdcOperationUI._currentElementOver.$element},
activeElementOver:function(a){b.isUndefined(a)&&(a=tdcOperationUI.getCurrentElementOver());b.isUndefined(a)||a.hasClass("tdc-recycle")||(tdcOperationUI._isActiveElementOver=!0,a.addClass("tdc-element-active"))},inactiveElementOver:function(){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".tdc-element-active");a.length&&a.removeClass("tdc-element-active");tdcOperationUI._isActiveElementOver=!1},isActiveElementOver:function(){return tdcOperationUI._isActiveElementOver},getActiveElementOver:function(){if(tdcOperationUI._isActiveElementOver){var a=
tdcAdminIFrameUI.getLiveIframe().contents().find(".tdc-element-active");if(a.length)return a}},getSelectedElement:function(){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".tdc-element-selected");if(a.length)return a},getCurrentElementOverOuterHeight:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementOuterHeight))return tdcOperationUI._currentElementOver.elementOuterHeight},getCurrentElementOverOuterWidth:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&
!b.isUndefined(tdcOperationUI._currentElementOver.elementOuterWidth))return tdcOperationUI._currentElementOver.elementOuterWidth},getCurrentElementOverHeight:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementHeight))return tdcOperationUI._currentElementOver.elementHeight},getCurrentElementOverOffset:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementOffset))return tdcOperationUI._currentElementOver.elementOffset},
getCurrentElementOverPosition:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementPosition))return tdcOperationUI._currentElementOver.elementPosition},_placeholderCacheCssSettings:{classes:e,props:e},setPlaceholderCss:function(a){if(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings)||!b.isEqual(tdcOperationUI._placeholderCacheCssSettings,a))tdcOperationUI._placeholderCacheCssSettings=a,tdcAdminWrapperUI.$placeholder.css(a)},
setReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.addClass("tdc-ready-to-move")},clearReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.removeClass("tdc-ready-to-move")},setCopyElement:function(a){tdcOperationUI._copiedElement.$element=a},getCopiedElement:function(){return tdcOperationUI._copiedElement.$element},isCopy:function(){return!b.isUndefined(tdcOperationUI._copiedElement.$element)},activeDraggedElement:function(a){tdcOperationUI.setDraggedElement(a);
tdcOperationUI.hasClassDraggedElement("tdc-dragged")||tdcOperationUI.addClassDraggedElement("tdc-dragged")},deactiveDraggedElement:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||(a.removeClass("tdc-dragged"),tdcOperationUI._moveDraggedElement(),tdcOperationUI.setDraggedElement(e))},showHelper:function(a){var c=tdcAdminWrapperUI.$helper,e=tdcOperationUI.getDraggedElement();if(b.isUndefined(e))tdcOperationUI.hideHelper(),tdcRecycleUI.hide(),tdcOperationUI.setLiveIframeCss("tdc-active-helper",
!0);else{var h=0;!0!==tdcMain.getSidebarInline()||!1!==tdcMain.getSidebarHidden()||f(a.target).closest("#tdc-sidebar").length||(h=tdcSidebar.$_sidebar.width());var d=tdcAdminIFrameUI.getLiveIframe().width(),l=0;window.innerWidth!==d&&(l=(window.innerWidth-d)/2,!0===tdcMain.getSidebarInline()&&!1===tdcMain.getSidebarHidden()&&(l-=tdcSidebar.$_sidebar.width()/2));f(a.target).closest("#tdc-sidebar").length?l=0:f(a.target).closest("#tdc-live-iframe-wrapper").length&&(l=0,tdcMain.getSidebarInline()&&(l=
-tdcSidebar.$_sidebar.width()));c.css({left:a.clientX-30+h+l,top:a.clientY-22});c.show();tdcOperationUI.deactivateMenu();tdcOperationUI.setLiveIframeCss("tdc-active-helper");a=e.data("shortcodeName");c=e.data("templateContent");b.isUndefined(a)&&b.isUndefined(c)&&(e=e.data("model_id"),a=tdcIFrameData.getModel(e).get("tag"));b.isUndefined(a)||tdcAdminWrapperUI.setHelperClass("tdc-element-ico tdc-ico-"+a);tdcRecycleUI.show()}},hideHelper:function(){tdcAdminWrapperUI.clearHelperClass();tdcAdminWrapperUI.$helper.hide();
tdcAdminWrapperUI.$helper.removeClass();tdcOperationUI.activateMenu()},setLiveIframeCss:function(a,c){var e=tdcAdminIFrameUI.getLiveIframe();b.isUndefined(c)?e.contents().find("body").addClass(a):e.contents().find("body").removeClass(a)},activateMenu:function(){if(tdcOperationUI._isMenuDeactivated){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");a.length&&a.removeClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!1}},deactivateMenu:function(){if(!tdcOperationUI._isMenuDeactivated){var a=
tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");a.length&&a.addClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!0}},updateInfoHelper:function(a){},showPlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!1===tdcOperationUI._isPlaceholderVisible&&(tdcOperationUI._isPlaceholderVisible=!0,a.show(),tdcOperationUI.updateInfoHelper(e))},hidePlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!0===tdcOperationUI._isPlaceholderVisible&&(tdcOperationUI._isPlaceholderVisible=
!1,a.hide(),tdcOperationUI.updateInfoHelper(!0))},isPlaceholderVisible:function(){return tdcOperationUI._isPlaceholderVisible},isRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement(tdcRowUI.getElementCssClass())},inRow:function(a){a=a.closest("."+tdcRowUI.getElementCssClass());if(a.length)return a},isRow:function(a){return a.hasClass(tdcRowUI.getElementCssClass())},inZone:function(a){a=a.closest("."+tdcZoneUI.getElementCssClass());
if(a.length)return a},isZone:function(a){return a.hasClass(tdcZoneUI.getElementCssClass())},isTempRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-row-temp")},isElementWithRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-with-row")},isColumnDragged:function(a){var c=tdcOperationUI.getDraggedElement();c=!b.isUndefined(c)&&tdcOperationUI.hasClassDraggedElement(tdcColumnUI.getElementCssClass());
b.isUndefined(a)||(c=c&&(0<a.siblings(".tdc-column.tdc-dragged").length||a.hasClass("tdc-dragged")));return c},inColumn:function(a){a=a.closest("."+tdcColumnUI.getElementCssClass());if(a.length)return a},isColumn:function(a){return a.hasClass(tdcColumnUI.getElementCssClass())},isInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement(tdcInnerRowUI.getElementCssClass())},inInnerRow:function(a){a=a.closest("."+tdcInnerRowUI.getElementCssClass());
if(a.length)return a},isInnerRow:function(a){return a.hasClass(tdcInnerRowUI.getElementCssClass())},isTempInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-inner-row-temp")},isInnerColumnDragged:function(a){var c=tdcOperationUI.getDraggedElement();c=!b.isUndefined(c)&&tdcOperationUI.hasClassDraggedElement(tdcInnerColumnUI.getElementCssClass());b.isUndefined(a)||(c=c&&(0<a.siblings(".tdc-inner-column.tdc-dragged").length||
a.hasClass("tdc-dragged")));return c},inInnerColumn:function(a){a=a.closest("."+tdcInnerColumnUI.getElementCssClass());if(a.length)return a},isInnerColumn:function(a){return a.hasClass(tdcInnerColumnUI.getElementCssClass())},isElement:function(a){return a.hasClass(tdcElementUI.getElementCssClass())},isElementDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element")},isSidebarElementDragged:function(){var a=tdcOperationUI.getDraggedElement();
return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-sidebar-element")},getRowStartValues:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI._draggedElement.$element.data("row-start-values")},setPlaceholder:function(a,c){var e=tdcAdminWrapperUI.$placeholder;if(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)||!b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)&&tdcOperationUI._placeholderCacheCssSettings.classes!==
a)tdcOperationUI._placeholderCacheCssSettings.classes=a,a.length?e.addClass(a):e.attr("class","");b.isObject(c)&&(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)||!b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)&&!b.isEqual(tdcOperationUI._placeholderCacheCssSettings.props,c))&&(tdcOperationUI._placeholderCacheCssSettings.props=c,e.css(c))},setHorizontalPlaceholder:function(a){tdcOperationUI.setPlaceholder("",a)},setVerticalPlaceholder:function(a){tdcOperationUI.setPlaceholder("vertical",
a)},_moveDraggedElement:function(){var a=tdcOperationUI.getDraggedElement(),c=tdcOperationUI.getCurrentElementOver(),g=tdcAdminWrapperUI.$placeholder,h="";if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(g)||!g.is(":visible")&&c!==tdcAdminWrapperUI.$recycle)){var d=tdcOperationUI.isSidebarElementDragged(),l=tdcOperationUI.isElementDragged(),k=!1,m=!1,p=!1,q=!1,t=!1,v=!1,u=tdcOperationUI.isElementWithRowDragged(),r=tdcOperationUI.getRowStartValues();if(l){var w=a.closest(".tdc-elements");if(!d&&
(h=tdcIFrameData._getSourceCol(tdcOperationUI.getDraggedElement()),b.isUndefined(h)))return}else(k=tdcOperationUI.isInnerColumnDragged())&&(w=a.closest(".tdc-inner-columns"));!k&&(m=tdcOperationUI.isInnerRowDragged(),p=tdcOperationUI.isTempInnerRowDragged(),m||p)&&(w=a.closest(".tdc-elements"));m||p||(q=tdcOperationUI.isColumnDragged())&&(w=a.closest(".tdc-columns"));!q&&(t=tdcOperationUI.isRowDragged(),v=tdcOperationUI.isTempRowDragged(),t||v)&&(w=a.closest(".tdc-rows"));if(d||l||k||m||p||q||t||
v){var A="",x=a.find(".td_block_inner");x.length&&(A=x.attr("id"));if(!d&&!b.isUndefined(w)&&w.length){var z=w.children();x=z.index(a);var y=z.index(g);if(c!==tdcAdminWrapperUI.$recycle&&-1!==y&&1===Math.abs(x-y))return;if(l||m||p||t||v){if((l||m||t)&&c===tdcAdminWrapperUI.$recycle){g="Deleting ";tdConfirm.showModal(m?g+"inner row":t?g+"row":g+"element",tdcOperationUI,function(){if((-1===y&&1===z.length||2===z.length&&-1!==y)&&(!t||1!==tdcIFrameData.tdcRows.length)){var c="";B=a.closest(".tdc-inner-column");
B.length?c=" tdc-element-inner-column":(C=a.closest(".tdc-column"),C.length&&(c=" tdc-element-column"));c=f('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);w.append(c)}tdcRecycle.takeSnapshot("Delete element");tdcOperationUI.setDraggedElement(a);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:d,
wasElementDragged:l,wasInnerColumnDragged:k,wasInnerRowDragged:m,wasTempInnerRowDragged:p,wasColumnDragged:q,wasRowDragged:t,wasTempRowDragged:v,wasElementWithRowDragged:u,rowStartValues:r,draggedBlockUid:A,sourceColParam:h});tdcSidebarPanel.clearPanel();tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);tb_remove()},e,"Are you sure you want to delete this element?");return}if(-1===y&&1===z.length||2===z.length&&-1!==y){c="";var B=a.closest(".tdc-inner-column");if(B.length)c=
" tdc-element-inner-column";else{var C=a.closest(".tdc-column");C.length&&(c=" tdc-element-column")}c=f('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);w.append(c)}}}d&&(c="",l?c="tdc-element":p?c="tdc-element-inner-row-temp":m?c="tdc-element-inner-row":v?c="tdc-row-temp":t&&(c="tdc-row"),c=f('<div class="'+c+'">'+a.html()+"</div>"),b.isUndefined(a.data("shortcodeName"))||c.data("shortcodeName",
a.data("shortcodeName")),b.isUndefined(a.data("startValues"))||c.data("startValues",a.data("startValues")),b.isUndefined(a.data("shortcodeContent"))||c.data("shortcodeContent",a.data("shortcodeContent")),b.isUndefined(a.data("rowStartValues"))||c.data("rowStartValues",a.data("rowStartValues")),b.isUndefined(a.data("templateContent"))||c.data("templateContent",a.data("templateContent")),tdcOperationUI.setDraggedElement(c),a=tdcOperationUI.getDraggedElement());g.replaceWith(a);if(d||l)B=a.closest(".tdc-inner-column"),
B.length?(a.removeClass("tdc-element-column"),a.addClass("tdc-element-inner-column")):(C=a.closest(".tdc-column"),C.length&&(a.removeClass("tdc-element-inner-column"),a.addClass("tdc-element-column")));g=a.prev();g.hasClass(tdcOperationUI._emptyElementClass)&&g.remove();g=a.next();g.hasClass(tdcOperationUI._emptyElementClass)&&g.remove();tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:d,wasElementDragged:l,wasInnerColumnDragged:k,wasInnerRowDragged:m,wasTempInnerRowDragged:p,
wasColumnDragged:q,wasRowDragged:t,wasTempRowDragged:v,wasElementWithRowDragged:u,draggedBlockUid:A,sourceColParam:h})}else new tdcNotice.notice("_moveDraggedElement Error: $draggedElement not valid!",!0,!1)}},_copyElement:function(a){var c=tdcOperationUI.getCurrentElementOver(),g=tdcAdminWrapperUI.$placeholder;if(!b.isUndefined(c)&&!b.isUndefined(g)){var h=tdcUtil.getStorageItem("copyShortcodeType"),d=tdcUtil.getStorageItem("copyShortcodeAttrs"),l=tdcUtil.getStorageItem("copySourceCol"),k=tdcUtil.getStorageItem("copyShortcode"),
m=!1,p=!1,q=!1,t=!1,v=!1,u="",r=f('<div class="tdc-dropped"></div>');"vc_row"===h?(u="tdc-row",v=!0,r.addClass("tdc-row-temp")):"vc_column"===h?(u="tdc-element-column",q=!0):"vc_row_inner"===h?(u="tdc-element-inner-row",t=!0,r.addClass("tdc-element-inner-row-temp")):"vc_column_inner"===h?(u="tdc-element-inner-column",p=!0):""!==h&&(u="tdc-element",m=!0);r.addClass(u);r.data("shortcodeName",h);r.data("startValues",d);if(v||t)r.data("templateContent",k);else if(q||p){c=c.data("model_id");var w="";h=
tdcIFrameData.getModel(c).get("childCollection");b.isUndefined(h)||b.map(h.models,function(a,c){c={error:e,getShortcode:""};tdcIFrameData._checkModelData(a,c);b.isUndefined(c.getShortcode)||(w+=c.getShortcode)});h="";h=b.isUndefined(a)||!0!==a?tdcUtil.b64EncodeUnicode(tdcUtil.b64DecodeUnicode(k)+w):tdcUtil.b64EncodeUnicode(w+tdcUtil.b64DecodeUnicode(k));r.data("templateContent",h);r.data("model_id",c)}g.replaceWith(r);r.closest(".tdc-inner-columns").length?r.addClass("tdc-element-inner-column"):r.closest(".tdc-columns").length&&
r.addClass("tdc-element-column");tdcIFrameData.changeData({$refEl:r,wasSidebarElementDragged:!0,wasElementDragged:m,wasInnerColumnDragged:p,wasInnerRowDragged:!1,wasTempInnerRowDragged:t,wasColumnDragged:q,wasRowDragged:!1,wasTempRowDragged:v,wasElementWithRowDragged:!1,draggedBlockUid:"",sourceColParam:l})}}}})(jQuery,Backbone,_);var tdcZoneUI;
(function(f,d,b,e){tdcZoneUI={_elementCssClass:"tdc-zone",tdcZone:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcZoneUI.tdcZone=a.find("."+tdcZoneUI._elementCssClass);tdcZoneUI.tdcZone.each(function(a,b){tdcZoneUI.bindZone(f(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcZoneUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcZoneUI._mouseCoordinates},bindZone:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===
c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcZoneUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY}),tdcContextMenu.hide())}).mouseup(function(c){tdcMaskUI.setContentAtMouseUp(a)}).mouseenter(function(c){tdcMaskUI.setCurrentContainer(a)}).mouseleave(function(a){tdcMaskUI.setCurrentContainer(e)}).on("contextmousedown",
function(c){c.preventDefault();c.stopPropagation();tdcContextMenu.setContextMenu(c,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcOperationUI.activeElementOver(a))})},getElementCssClass:function(){return tdcZoneUI._elementCssClass}}})(jQuery,Backbone,_);var tdcRowUI;
(function(f,d,b,e){tdcRowUI={_elementCssClass:"tdc-row",tdcRow:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcRowUI.tdcRow=a.find("."+tdcRowUI._elementCssClass);tdcRowUI.tdcRow.each(function(a,b){tdcRowUI.bindRow(f(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcRowUI._mouseCoordinates},bindRow:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===
c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcRowUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(c){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())c.preventDefault(),
tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcRowUI._setMouseCoordinates(e);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcRowUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c),
tdcMaskUI.hide(),tdcRowUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove())}).mouseenter(function(c){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentContainer(a)}).mouseleave(function(a){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(a.preventDefault(),tdcOperationUI.setCurrentElementOver(e),
tdcRowUI.positionRowPlaceholder(a)):tdcMaskUI.setCurrentContainer(e)}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()){var b=a.outerHeight(!0),e=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(d.left+e)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+b)&&(tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c))}}).on("contextmousedown",function(c){c.preventDefault();
c.stopPropagation();tdcContextMenu.setContextMenu(c,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcOperationUI.activeElementOver(a))})},positionRowPlaceholder:function(a,c){var g=tdcAdminWrapperUI.$placeholder,h=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)h=a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);
else if("scroll"===a.type){h=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var l={pageX:h,pageY:d};tdcOperationUI.setCurrentElementOver(e);tdcRowUI.tdcRow.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(c).trigger(f.Event("fakemouseenterevent",l))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();
else{var k=tdcOperationUI.getCurrentElementOverOuterHeight();h=tdcOperationUI.getCurrentElementOverOuterWidth();var m=tdcOperationUI.getCurrentElementOverOffset();if(d>m.top+k/2){d=a.next();if(!d.length||d.length&&d.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(g),tdcOperationUI.updateInfoHelper();parseInt(m.top)+parseInt(k)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"",right:"auto",
bottom:"0",width:h,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"",right:"",bottom:"",width:h,"margin-left":""})}else{d=a.prev();if(!d.length||d.length&&d.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(g),tdcOperationUI.updateInfoHelper();parseInt(m.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"",right:"auto",bottom:"",width:h,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",
top:"",left:"",right:"",bottom:"",width:h,"margin-left":""})}b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcRowUI._elementCssClass}}})(jQuery,Backbone,_);var tdcColumnUI;
(function(f,d,b,e){tdcColumnUI={_elementCssClass:"tdc-column",tdcColumn:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcColumnUI.tdcColumn=a.find("."+tdcColumnUI._elementCssClass);tdcColumnUI.tdcColumn.each(function(a,b){tdcColumnUI.bindColumn(f(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcColumnUI._mouseCoordinates},bindColumn:function(a){a.unbind();a.click(function(a){a.preventDefault();
a.stopPropagation()}).mousedown(function(c){1===c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(c,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a)}),tdcColumnUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(c){tdcOperationUI.isColumnDragged(a)&&
(c.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(e),tdcColumnUI.positionColumnPlaceholder(c),tdcColumnUI._setMouseCoordinates(e));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){tdcOperationUI.isColumnDragged(a)&&(b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcColumnUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),
tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(c),tdcMaskUI.hide(),tdcColumnUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(c){tdcOperationUI.isColumnDragged(a)?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isColumnDragged(a)?
(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcColumnUI.positionColumnPlaceholder(c)):(tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inRow(a),b.isUndefined(c)||c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isColumnDragged(a)){var b=a.find(".tdc-elements:first");if(b.length){var e=b.outerHeight(!0);b=b.outerWidth();var d=a.offset(),l=0,k=a.prevAll("."+tdcColumnUI._elementCssClass);k.length&&k.each(function(a,c){l+=parseInt(f(c).find(".tdc-elements:first").width())});
l+=d.left;parseInt(l)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(l+b)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+e)&&(tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(c))}}}).on("contextmousedown",function(c){c.preventDefault();c.stopPropagation();tdcContextMenu.setContextMenu(c,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a)}),tdcOperationUI.activeElementOver(a))})},
positionColumnPlaceholder:function(a,c){var g=tdcAdminWrapperUI.$placeholder,h=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)h=a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){h=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var l={pageX:h,pageY:d};
tdcOperationUI.setCurrentElementOver(e);tdcOperationUI.getDraggedElement().closest(".tdc-columns").find(".tdc-column").each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(c).trigger(f.Event("fakemouseenterevent",l))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();else{var k=a.outerWidth(!0);d=tdcOperationUI.getCurrentElementOverOffset();var m=0,p=a.prevAll();p.length&&
p.each(function(a,c){a=f(c);a.hasClass("tdc-column")&&(m+=parseInt(a.outerWidth(!0)))});p=a.parent(".tdc-columns").parent(".vc_row");var q=p.css("position");if(b.isUndefined(q)||"static"!==q)if(p=p.css("padding-left"),b.isUndefined(p)||(p=parseInt(p.replace("px",""))),h>d.left+k/2){h=a.next();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(g),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m+k+p),"margin-left":-24,top:""})}else{h=
a.prev();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(g),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m+p),"margin-left":-24,top:""})}else if(h>d.left+k/2){h=a.next();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(g),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(d.left+k),"margin-left":-24,top:""})}else{h=a.prev();if(!h.length||h.length&&h.attr("id")!==
tdcAdminWrapperUI.placeholderId)a.before(g),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(d.left),"margin-left":-24,top:""})}b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerRowUI;
(function(f,d,b,e){tdcInnerRowUI={_elementCssClass:"tdc-element-inner-row",tdcElementInnerRow:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerRowUI.tdcElementInnerRow=a.find("."+tdcInnerRowUI._elementCssClass);tdcInnerRowUI.tdcElementInnerRow.each(function(a,b){tdcInnerRowUI.bindInnerRow(f(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcInnerRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerRowUI._mouseCoordinates},bindInnerRow:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a)}),tdcInnerRowUI._setMouseCoordinates({screenX:c.screenX,
screenY:c.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(c){c.preventDefault();tdcOperationUI.clearReadyToMove();tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcInnerRowUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):
(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c),tdcMaskUI.hide(),tdcInnerRowUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove())}).mouseenter(function(c){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&
(tdcMaskUI.setCurrentContainer(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcInnerRowUI.positionInnerRowPlaceholder(c)):(tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inColumn(a),b.isUndefined(c)||c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||
tdcOperationUI.isTempInnerRowDragged()){var b=a.outerHeight(!0),e=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(d.left+e)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+b)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c))}}).on("contextmousedown",function(c){c.preventDefault();c.stopPropagation();tdcContextMenu.setContextMenu(c,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),
$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a)}),tdcOperationUI.activeElementOver(a))})},positionInnerRowPlaceholder:function(a,c){var g=tdcAdminWrapperUI.$placeholder,h=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)h=a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){h=
tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var l={pageX:h,pageY:d};tdcOperationUI.setCurrentElementOver(e);tdcElementUI.tdcElement.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(c).trigger(f.Event("fakemouseenterevent",l))});tdcInnerRowUI.tdcElementInnerRow.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(c).trigger(f.Event("fakemouseenterevent",
l))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();else{var k=a.outerHeight(!0);h=a.innerWidth();var m=a.offset();if(d>m.top+k/2){d=a.next();if(!d.length||d.length&&d.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(g),tdcOperationUI.updateInfoHelper(e);parseInt(m.top)+parseInt(k)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",
top:"",left:"","margin-top":"","margin-left":"",bottom:"0",width:h}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:h})}else{d=a.prev();if(!d.length||d.length&&d.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(g),tdcOperationUI.updateInfoHelper(e);parseInt(m.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",
bottom:"",width:h}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:h})}b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerRowUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerColumnUI;
(function(f,d,b,e){tdcInnerColumnUI={_elementCssClass:"tdc-inner-column",tdcInnerColumn:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerColumnUI.tdcInnerColumn=a.find("."+tdcInnerColumnUI._elementCssClass);tdcInnerColumnUI.tdcInnerColumn.each(function(a,b){tdcInnerColumnUI.bindInnerColumn(f(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcInnerColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerColumnUI._mouseCoordinates},bindInnerColumn:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(c,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a)}),
tdcInnerColumnUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(c){tdcOperationUI.isInnerColumnDragged(a)&&(c.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(e),tdcInnerColumnUI.positionInnerColumnPlaceholder(c),tdcInnerColumnUI._setMouseCoordinates(e));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){tdcOperationUI.isInnerColumnDragged(a)&&
(b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcInnerColumnUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(c),tdcMaskUI.hide(),tdcInnerColumnUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(c){tdcOperationUI.isInnerColumnDragged(a)?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),
tdcInnerColumnUI.positionInnerColumnPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isInnerColumnDragged(a)?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcInnerColumnUI.positionInnerColumnPlaceholder(c)):(tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inInnerRow(a),b.isUndefined(c)||c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isInnerColumnDragged(a)){var b=
a.find(".tdc-elements:first");if(b.length){var e=b.outerHeight(!0);b=b.outerWidth();var d=a.offset(),l=0,k=a.prevAll("."+tdcInnerColumnUI._elementCssClass);k.length&&k.each(function(a,c){l+=parseInt(f(c).find(".tdc-elements:first").width())});l+=d.left;parseInt(l)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(l+b)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+e)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(c))}}}).on("contextmousedown",
function(c){c.preventDefault();c.stopPropagation();tdcContextMenu.setContextMenu(c,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a)}),tdcOperationUI.activeElementOver(a))})},positionInnerColumnPlaceholder:function(a,c){var g=tdcAdminWrapperUI.$placeholder,h=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||
"fakemouseenterevent"===a.type)h=a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){h=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var l={pageX:h,pageY:d};tdcOperationUI.setCurrentElementOver(e);tdcOperationUI.getDraggedElement().closest(".tdc-inner-columns").find(".tdc-inner-column").each(function(a,
c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(c).trigger(f.Event("fakemouseenterevent",l))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();else{d=a.outerWidth(!0);var k=a.offset(),m=0,p=a.prevAll();p.length&&p.each(function(a,c){a=f(c);a.hasClass("tdc-inner-column")&&(m+=parseInt(a.outerWidth(!0)))});p=a.parent(".tdc-inner-columns").parent(".vc_row_inner").css("padding-left");p=
b.isUndefined(p)?0:parseInt(p.replace("px",""));if(h>k.left+d/2){h=a.next();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(g),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m+d+p),"margin-left":-24})}else{h=a.prev();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(g),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m+p),"margin-left":-24})}b.isUndefined(c)||
!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcElementsUI;
(function(f,d,b,e){tdcElementsUI={tdcElements:e,init:function(){tdcElementsUI.tdcElements=tdcOperationUI.iframeContents.find(".tdc-elements");tdcElementsUI.tdcElements.each(function(a,c){tdcElementsUI.bindElementList(f(c))})},bindElementList:function(a){a.mousemove(function(a){a.preventDefault()}).mouseenter(function(a){a.preventDefault()}).mouseleave(function(a){a.preventDefault()})}}})(jQuery,Backbone,_);var tdcElementUI;
(function(f,d,b,e){tdcElementUI={_elementCssClass:"tdc-element",_innerColumnGap:10,tdcElements:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcElementUI.tdcElement=a.find("."+tdcElementUI._elementCssClass);tdcElementUI.tdcElement.each(function(a,b){tdcElementUI.bindElement(f(b))})},positionElementPlaceholder:function(a,c){var g={X:0,Y:0};if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)g.X=a.pageX,g.Y=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||
(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){g.X=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;g.Y=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var h={pageX:g.X,pageY:g.Y};tdcOperationUI.setCurrentElementOver(e);tdcElementUI.tdcElement.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(c).trigger(f.Event("fakemouseenterevent",h))});return}var d=tdcOperationUI.getCurrentElementOver();
if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(d))tdcOperationUI.hidePlaceholder();else{var l=tdcOperationUI.getCurrentElementOverOuterHeight();a=tdcOperationUI.getCurrentElementOverOuterWidth();var k=tdcOperationUI.getCurrentElementOverOffset(),m=tdcOperationUI.getCurrentElementOverHeight(),p=!1;"inline-block"===d.css("display")&&(p=!0);p?(l=tdcOperationUI.getCurrentElementOverPosition(),p=parseInt(d.css("margin-top")),g.Y>k.top+m/2?(g=tdcElementUI._checkInnerColumnLastElement(g),
b.isUndefined(g.elementOuterWidth)||(a=g.elementOuterWidth),parseInt(k.top)+parseInt(m)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?(k=parseInt(k.left),g.isInnerColumnLastElement&&(d=d.closest(".tdc-element-inner-row"),k=parseInt(d.offset().left)-parseInt(d.css("margin-left"))),tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:k,"margin-top":"","margin-left":"",bottom:"0",width:a})):(k=parseInt(l.left),g.isInnerColumnLastElement&&(d=d.closest(".tdc-element-inner-row"),
k=parseInt(d.position().left)+parseInt(d.css("margin-left"))),tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:l.top+p+m,left:k,"margin-top":"","margin-left":"",bottom:"",width:a}))):(g=tdcElementUI._checkInnerColumnFirstElement(g),b.isUndefined(g.elementOuterWidth)||(a=g.elementOuterWidth),parseInt(k.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?(k=parseInt(k.left)-parseInt(d.css("margin-left")),tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:k,"margin-top":"0",
"margin-left":"",bottom:"",width:a})):(k=parseInt(l.left),tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:l.top+p,left:k,"margin-top":"","margin-left":"",bottom:"",width:a})))):g.Y>k.top+m/2?(g=tdcElementUI._checkInnerColumnLastElement(g),b.isUndefined(g.elementOuterWidth)||(a=g.elementOuterWidth),parseInt(k.top)+parseInt(l)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"",
"margin-left":"",bottom:"0",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:a})):(g=tdcElementUI._checkInnerColumnFirstElement(g),b.isUndefined(g.elementOuterWidth)||(a=g.elementOuterWidth),parseInt(k.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",bottom:"",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",
top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:a}));b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},_checkInnerColumnFirstElement:function(a){var c={isInnerColumnFirstElement:!1},b=tdcAdminWrapperUI.$placeholder,h=tdcOperationUI.getCurrentElementOver(),d=tdcOperationUI.getCurrentElementOverOffset();tdcElementUI.isInnerColumnFirstElement(h)&&a.Y<d.top+tdcElementUI._innerColumnGap&&(c.isInnerColumnFirstElement=!0);if(c.isInnerColumnFirstElement){if(h=
h.closest(".tdc-element-inner-row"),c.elementOuterWidth=h.outerWidth(!0),a=h.prev(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)h.before(b),tdcOperationUI.updateInfoHelper(e)}else if(a=h.prev(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)h.before(b),tdcOperationUI.updateInfoHelper(e);return c},_checkInnerColumnLastElement:function(a){var c={isInnerColumnLastElement:!1},b=tdcAdminWrapperUI.$placeholder,h=tdcOperationUI.getCurrentElementOver(),d=tdcOperationUI.getCurrentElementOverHeight(),
f=tdcOperationUI.getCurrentElementOverOffset();tdcElementUI.isInnerColumnLastElement(h)&&a.Y>f.top+d-tdcElementUI._innerColumnGap&&(c.isInnerColumnLastElement=!0);if(c.isInnerColumnLastElement){if(h=h.closest(".tdc-element-inner-row"),c.elementOuterWidth=h.outerWidth(!0),a=h.next(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)h.after(b),tdcOperationUI.updateInfoHelper(e)}else if(a=h.next(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)h.after(b),tdcOperationUI.updateInfoHelper(e);
return c},positionEmptyElementPlaceholder:function(a){var c=tdcAdminWrapperUI.$placeholder,g=0,h=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)g=a.pageX,h=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){g=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;h=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var d=
{pageX:g,pageY:h};tdcOperationUI.setCurrentElementOver(e);tdcElementUI.tdcElement.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(c).trigger(f.Event("fakemouseenterevent",d))});return}var l=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(l))tdcOperationUI.hidePlaceholder();else{var k=tdcOperationUI.getCurrentElementOverOuterHeight();a=tdcOperationUI.getCurrentElementOverOuterWidth();g=tdcOperationUI.getCurrentElementOverOffset();
if(h>g.top+k/2){var m=!1;tdcElementUI.isInnerColumnLastElement(l)&&h>g.top+k-tdcElementUI._innerColumnGap&&(m=!0);m?(l=l.closest(".tdc-element-inner-row"),a=l.outerWidth(!0),h=l.next(),h.length||(l.after(c),tdcOperationUI.updateInfoHelper(e))):(h=l.next(),h.length||(l.after(c),tdcOperationUI.updateInfoHelper(e)));parseInt(g.top)+parseInt(k)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"",
"margin-left":"",bottom:0,width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":-50,"margin-left":"",bottom:"",width:a})}else k=!1,tdcElementUI.isInnerColumnFirstElement(l)&&h<g.top+tdcElementUI._innerColumnGap&&(k=!0),k?(l=l.closest(".tdc-element-inner-row"),a=l.outerWidth(!0),h=l.prev(),h.length||(l.before(c),tdcOperationUI.updateInfoHelper(e))):(h=l.prev(),h.length||(l.before(c),tdcOperationUI.updateInfoHelper(e))),parseInt(g.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?
tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:0,left:"","margin-top":0,"margin-left":"",bottom:"",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":0,"margin-left":"",bottom:"",width:a});tdcOperationUI.showPlaceholder()}},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcElementUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcElementUI._mouseCoordinates},bindElement:function(a){a.click(function(a){a.preventDefault();
a.stopPropagation()}).mousedown(function(c){if(1===c.which){if("td-lock-button"===c.target.className)return window.open(c.target.href),!1;c.preventDefault();c.stopPropagation();tdcOperationUI.activeDraggedElement(a);tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(a);tdcElementUI.positionElementPlaceholder(c,!0);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),
$currentInnerColumn:tdcOperationUI.inInnerColumn(a),$currentElement:a});tdcElementUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY});tdcOperationUI.setReadyToMove();tdcContextMenu.hide()}}).mouseup(function(c){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))c.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionElementPlaceholder(c),
tdcElementUI._setMouseCoordinates(e);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcElementUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(c),
tdcMaskUI.hide(),tdcElementUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove())}).mouseenter(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcElementUI.positionElementPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(e),tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inInnerColumn(a),b.isUndefined(c)?(c=tdcOperationUI.inColumn(a),b.isUndefined(c)||c.mouseenter()):c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")){c.preventDefault();c.stopPropagation();var b=a.outerHeight(!0),e=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(d.left+e)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+b)&&(tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(c))}}).on("contextmousedown",function(c){c.preventDefault();c.stopPropagation();
tdcContextMenu.setContextMenu(c,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a),$currentElement:a}),tdcOperationUI.activeElementOver(a))})},bindEmptyElement:function(a){a.click(function(a){a.preventDefault()}).mousedown(function(c){1===c.which&&(a.hasClass("tdc-element-column")?tdcColumnHandlerUI._triggerEvent(c):
a.hasClass("tdc-element-inner-column")&&tdcInnerColumnHandlerUI._triggerEvent(c))}).mouseup(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),c.stopPropagation(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionEmptyElementPlaceholder(c)):tdcMaskUI.setCurrentElement(a)}).mousemove(function(c){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||
tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(c)}).mouseenter(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(c)):
b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentElement(a)}).mouseleave(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcElementUI.positionEmptyElementPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentElement(e)})},isInnerColumnFirstElement:function(a){var c=a.closest(".tdc-inner-column");
return c.length&&(c=c.find(".tdc-element-inner-column"),c.length&&0===c.index(a))?!0:!1},isInnerColumnLastElement:function(a){var c=a.closest(".tdc-inner-column");return c.length&&(c=c.find(".tdc-element-inner-column"),c.length&&c.length===c.index(a)+1)?!0:!1},getElementCssClass:function(){return tdcElementUI._elementCssClass}}})(jQuery,Backbone,_);var tdcRecycleUI;
(function(f,d,b,e){tdcRecycleUI={_activeClass:"active",_showClass:"show",_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcRecycleUI._isInitialized=!1);tdcRecycleUI._isInitialized||(tdcAdminWrapperUI.$recycle.mouseup(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcRecycleUI._deactivate())}).mouseenter(function(a){(tdcOperationUI.isElementDragged()||
tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle),tdcRecycleUI._activate())}).mouseleave(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcRecycleUI._deactivate())}),tdcRecycleUI._isInitialized=
!0)},_activate:function(){tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._activeClass)},_deactivate:function(){tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._activeClass)},show:function(){!0!==tdcMain.getRecycleShown()&&(tdcMain.setRecycleShown(),!0===tdcMain.getRecycleShown()&&tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._showClass))},hide:function(){!1!==tdcMain.getRecycleShown()&&(tdcMain.resetRecycleShown(),tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._showClass))}}})(jQuery,
Backbone,_);var tdcMaskUI;
(function(f,d,b,e){tdcMaskUI={$currentContainer:e,$currentElement:e,$wrapper:e,$content:e,_inMouseUpBubbling:!1,_isInitialized:!1,_handlers:e,contentSettings:{innerColumn:{top:0,left:0},innerRow:{top:0,left:0},column:{top:0,left:0},row:{top:0,left:0}},init:function(a,c){b.isUndefined(c)||!0!==c||(tdcMaskUI._isInitialized=!1);tdcMaskUI._isInitialized||(tdcMaskUI.$wrapper=a,tdcMaskUI.$wrapper.parent().find("#tdc-mask-content").length||(tdcMaskUI.$content=f('<div id="tdc-mask-content"></div>'),tdcMaskUI.$wrapper.after(tdcMaskUI.$content)),
tdcMaskUI.$wrapper.parent().find("#tdc-mask-content-full").length||(tdcMaskUI.$contentFull=f('<div id="tdc-mask-content-full"></div>'),tdcMaskUI.$wrapper.after(tdcMaskUI.$contentFull)),tdcMaskUI.$wrapper.parent().find("#tdc-mask-handler-structure").length||(tdcMaskUI.$handlerStructure=f('<div id="tdc-mask-handler-structure"></div>'),tdcMaskUI.$wrapper.append(tdcMaskUI.$handlerStructure)),tdcZoneHandlerUI.init(c),tdcRowHandlerUI.init(c),tdcColumnHandlerUI.init(c),tdcInnerRowHandlerUI.init(c),tdcInnerColumnHandlerUI.init(c),
tdcElementHandlerUI.init(c),tdcMaskUI._isInitialized=!0)},setCurrentContainer:function(a){if(tdcMaskUI._isInitialized)if(tdcMaskUI.$currentContainer=a,b.isUndefined(tdcMaskUI.$currentContainer))tdcMaskUI.$content.css({top:"",left:"",width:"",height:""}),tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide(),tdcSidebar.setSidebarInfo("");else{var c="";if(tdcOperationUI.isZone(tdcMaskUI.$currentContainer)){var e=tdcMaskUI.$currentContainer;c="tdc-content-zone"}else tdcOperationUI.isRow(tdcMaskUI.$currentContainer)?
(e=tdcMaskUI.$currentContainer,c="tdc-content-row"):tdcOperationUI.isColumn(tdcMaskUI.$currentContainer)?(e=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),c="tdc-content-column"):tdcOperationUI.isInnerRow(tdcMaskUI.$currentContainer)?(e=tdcMaskUI.$currentContainer,c="tdc-content-inner-row"):tdcOperationUI.isInnerColumn(tdcMaskUI.$currentContainer)&&(e=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),c="tdc-content-inner-column");if(e.length){var h=e.offset();a=h.top;h=h.left;var d=
e.outerWidth();e=e.outerHeight(!0);tdcMaskUI.$content.css({top:a,left:h,width:d,height:e});tdcMaskUI.$content.attr("class",c);tdcMaskUI.$content.show();tdcMaskUI.$contentFull.hide();e=tdcMaskUI.$currentContainer.data("model_id");b.isUndefined(e)||(e=tdcIFrameData.getModel(e),tdcSidebar.setSidebarInfo(e.get("tag")))}}},setCurrentElement:function(a){if(tdcMaskUI._isInitialized&&!tdcSidebar.mouseOverSidebar)if(tdcMaskUI.$currentElement=a,b.isUndefined(tdcMaskUI.$currentElement))tdcMaskUI.$wrapper.hide(),
tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide();else{a=tdcMaskUI.$currentElement.closest(".tdc-zone").offset();var c=tdcMaskUI.$currentElement.offset(),e=tdcMaskUI.$currentElement.outerWidth(),h=tdcMaskUI.$currentElement.outerWidth(!0),d=tdcMaskUI.$currentElement.outerHeight(),f=tdcMaskUI.$currentElement.outerHeight(!0),k=tdcMaskUI.$currentElement.css("margin-top"),m=tdcMaskUI.$currentElement.css("margin-left");12>Math.abs(a.top-c.top)?tdcMaskUI.$wrapper.addClass("tdc-mask-top"):tdcMaskUI.$wrapper.removeClass("tdc-mask-top");
tdcMaskUI.$wrapper.css({top:c.top,left:c.left,width:e,height:d});tdcMaskUI.$content.css({top:c.top,left:c.left,width:e,height:d});tdcMaskUI.$contentFull.css({top:c.top-parseFloat(k),left:c.left-parseFloat(m),width:h,height:f});tdcMaskUI.$content.removeAttr("class");tdcMaskUI.$wrapper.show();tdcMaskUI.$content.show();tdcMaskUI.$contentFull.show();tdcMaskUI.setHandlers();a=tdcMaskUI.$currentElement.data("model_id");b.isUndefined(a)||(a=tdcIFrameData.getModel(a),c=a.get("attrs"),b.has(c,"custom_title")?
tdcSidebar.setSidebarInfo(c.custom_title):tdcSidebar.setSidebarInfo(a.get("tag")))}},repositionMask:function(a){tdcMaskUI._isInitialized&&(a=tdcAdminIFrameUI._$liveIframe[0].contentWindow.document.elementFromPoint(a.pageX,a.pageY),a=f(a).closest(".tdc-element"),a.length&&tdcMaskUI.setCurrentElement(a))},setContentAtMouseUp:function(a){a.hasClass("tdc-rows")?tdcMaskUI._inMouseUpBubbling?tdcMaskUI._inMouseUpBubbling=!1:tdcMaskUI.setCurrentContainer(a):a.hasClass("tdc-row")?tdcMaskUI._inMouseUpBubbling||
(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-column")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element-inner-row")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-inner-column")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element")&&(tdcMaskUI.setCurrentElement(a),
tdcMaskUI._inMouseUpBubbling=!0)},setHandlers:function(){tdcMaskUI._isInitialized&&(b.isUndefined(tdcMaskUI.$currentElement)||b.isUndefined(tdcMaskUI._handlers)||b.map(tdcMaskUI._handlers,function(a,c){a.setElement(tdcMaskUI.$currentElement)}))},addHandler:function(a,c){tdcMaskUI._isInitialized||(b.isUndefined(tdcMaskUI._handlers)?(tdcMaskUI._handlers={},tdcMaskUI._handlers[a]=c):b.has(tdcMaskUI._handlers,a)||(tdcMaskUI._handlers[a]=c))},show:function(){tdcMaskUI._isInitialized&&!b.isUndefined(tdcMaskUI.$wrapper)&&
(tdcMaskUI.$wrapper.show(),tdcMaskUI.$content.show())},hide:function(){tdcMaskUI._isInitialized&&!b.isUndefined(tdcMaskUI.$wrapper)&&(tdcMaskUI.$wrapper.hide(),tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide())}}})(jQuery,Backbone,_);var tdcZoneHandlerUI;
(function(f,d,b,e){tdcZoneHandlerUI={_handlerId:"tdc-zone",_handlerText:"Zone",_handlerCssClass:"tdc-mask-zone",$elementRow:e,_$handlerWrapper:e,_$handlerClone:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcZoneHandlerUI._isInitialized=!1);tdcZoneHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcZoneHandlerUI._handlerCssClass).length||(tdcZoneHandlerUI._$handlerWrapper=f('<div id="'+tdcZoneHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Zone settings">'+
tdcZoneHandlerUI._handlerText+"</div></div>"),tdcMaskUI.$handlerStructure.append(tdcZoneHandlerUI._$handlerWrapper)),tdcZoneHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcZoneHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcZoneHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcZoneHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcZoneHandlerUI.$elementRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcZoneHandlerUI.$elementRow)&&tdcZoneHandlerUI._triggerEvent(a)}),tdcMaskUI.addHandler(tdcZoneHandlerUI._handlerId,tdcZoneHandlerUI),tdcZoneHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inZone(a);b.isUndefined(a)?tdcZoneHandlerUI._$handlerWrapper.hide():(tdcZoneHandlerUI.$elementRow=a,tdcZoneHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||
b.isUndefined(tdcZoneHandlerUI.$elementRow)||tdcZoneHandlerUI.$elementRow.trigger(a)}}})(jQuery,Backbone,_);var tdcRowHandlerUI;
(function(f,d,b,e){tdcRowHandlerUI={_handlerId:"tdc-row",_handlerText:"Row",_handlerCssClass:"tdc-mask-row",$elementRow:e,_$handlerWrapper:e,_$handlerClone:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcRowHandlerUI._isInitialized=!1);tdcRowHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcRowHandlerUI._handlerCssClass).length||(tdcRowHandlerUI._$handlerWrapper=f('<div id="'+tdcRowHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Row settings">'+
tdcRowHandlerUI._handlerText+"</div></div>"),tdcRowHandlerUI._$handlerClone=f('<div class="tdc-mask-clone" title="Duplicate row"></div>'),tdcRowHandlerUI._$handlerWrapper.append(tdcRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcRowHandlerUI._$handlerWrapper)),tdcRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(tdcRowHandlerUI.$elementRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcRowHandlerUI.$elementRow)&&tdcRowHandlerUI._triggerEvent(a)}),tdcRowHandlerUI._$handlerClone.mousedown(tdcRowHandlerUI.cloneHandler),tdcMaskUI.addHandler(tdcRowHandlerUI._handlerId,tdcRowHandlerUI),tdcRowHandlerUI._isInitialized=!0)},setElement:function(a){a=
tdcOperationUI.inRow(a);b.isUndefined(a)?tdcRowHandlerUI._$handlerWrapper.hide():(tdcRowHandlerUI.$elementRow=a,tdcRowHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcRowHandlerUI.$elementRow)||tdcRowHandlerUI.$elementRow.trigger(a)},cloneHandler:function(a){if("click"!==a.type||1===a.which)a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone row",tdcRowHandlerUI,function(a){a=tdcRowHandlerUI.$elementRow.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",
!0,!1);else{a=tdcIFrameData.getModel(a);var c=a.get("parentModel"),h=c.get("childCollection");if(b.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model not in structure data!",!0,!1);else{tdcOperationUI.setDraggedElement(f('<div class="tdc-row">Cloned row</div>'));var d=tdcOperationUI.getDraggedElement();d.insertAfter(tdcRowHandlerUI.$elementRow);tdcRowUI.bindRow(d);var l=d.prevAll(".tdc-row").length;c=new tdcIFrameData.TdcModel({content:"",attrs:b.clone(a.get("attrs")),
tag:"vc_row",type:"closed",level:1,parentModel:c});new tdcIFrameData.TdcLiveView({model:c,el:d[0]});var k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:2,parentModel:c});d.data("model_id",c.cid);h.add(c,{at:l});h=new tdcIFrameData.TdcCollection;h.add(k);c.set("childCollection",h);k.set("childCollection",new tdcIFrameData.TdcCollection);c.getShortcodeRender(3,"",!0,a);tdcOperationUI.setDraggedElement(e);tb_remove()}}},[a],"Are you sure you want to clone the current row and all its elements?"),
tdcRowHandlerUI._inCloneOperation=!1},deleteHandler:function(a){null!==a&&a.preventDefault();a.preventDefault();a.stopPropagation();tdConfirm.showModal("Delete row",tdcRowHandlerUI,function(a){tdcOperationUI.setDraggedElement(tdcRowHandlerUI.$elementRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();var c=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");var b=a.children();c=b.index(c);if(-1===c&&1===b.length||2===b.length&&-1!==c)c=
"",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(c=" tdc-element-column"),c=f('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(c),a.append(c);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:!1,wasElementDragged:!1,wasInnerColumnDragged:!1,wasInnerRowDragged:!1,
wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!0,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);tdcSidebarPanel.clearPanel();tb_remove()},[a],"Are you sure you want to delete the current row and all its elements?")}}})(jQuery,Backbone,_);var tdcColumnHandlerUI;
(function(f,d,b,e){tdcColumnHandlerUI={_handlerId:"tdc-column",_handlerText:"Column",_handlerCssClass:"tdc-mask-column",$elementColumn:e,_$handlerWrapper:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcColumnHandlerUI._isInitialized=!1);tdcColumnHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcColumnHandlerUI._handlerCssClass).length||(a=f('<div id="'+tdcColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Column settings">'+tdcColumnHandlerUI._handlerText+
"</div></div>"),tdcColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a)),tdcColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcColumnHandlerUI._triggerEvent(a)}).on("contextmousedown",function(a){a.preventDefault();
tdcContextMenu.setContextMenu(a,tdcColumnHandlerUI.$elementColumn)&&tdcColumnHandlerUI._triggerEvent(a)}),tdcColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcColumnHandlerUI.$elementColumn);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcColumnHandlerUI._handlerId,tdcColumnHandlerUI),tdcColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inColumn(a);
b.isUndefined(a)?tdcColumnHandlerUI._$handlerWrapper.hide():(tdcColumnHandlerUI.$elementColumn=a,tdcColumnHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcColumnHandlerUI.$elementColumn)||tdcColumnHandlerUI.$elementColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcInnerRowHandlerUI;
(function(f,d,b,e){tdcInnerRowHandlerUI={_handlerId:"tdc-element-inner-row",_handlerText:"Inner Row",_handlerCssClass:"tdc-mask-inner-row",$elementInnerRow:e,_$handlerWrapper:e,_$handlerClone:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcInnerRowHandlerUI._isInitialized=!1);tdcInnerRowHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcInnerRowHandlerUI._handlerCssClass).length||(tdcInnerRowHandlerUI._$handlerWrapper=f('<div id="'+tdcInnerRowHandlerUI._handlerCssClass+
'"><div class="tdc-mask-handler-drag" title="Inner row settings">'+tdcInnerRowHandlerUI._handlerText+"</div></div>"),tdcInnerRowHandlerUI._$handlerClone=f('<div class="tdc-mask-clone" title="Duplicate inner row"></div>'),tdcInnerRowHandlerUI._$handlerWrapper.append(tdcInnerRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcInnerRowHandlerUI._$handlerWrapper)),tdcInnerRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();
tdcInnerRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcInnerRowHandlerUI.$elementInnerRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcInnerRowHandlerUI.$elementInnerRow)&&tdcInnerRowHandlerUI._triggerEvent(a)}),tdcInnerRowHandlerUI._$handlerClone.mousedown(tdcInnerRowHandlerUI.cloneHandler),
tdcMaskUI.addHandler(tdcInnerRowHandlerUI._handlerId,tdcInnerRowHandlerUI),tdcInnerRowHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerRow(a);b.isUndefined(a)?tdcInnerRowHandlerUI._$handlerWrapper.hide():(tdcInnerRowHandlerUI.$elementInnerRow=a,tdcInnerRowHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcInnerRowHandlerUI.$elementInnerRow)||tdcInnerRowHandlerUI.$elementInnerRow.trigger(a)},cloneHandler:function(a){if("click"!==
a.type||1===a.which)a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone inner row",tdcInnerRowHandlerUI,function(a){a=tdcInnerRowHandlerUI.$elementInnerRow.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,!1);else if(a=tdcIFrameData.getModel(a),b.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model not in structure data!",
!0,!1);else{tdcOperationUI.setDraggedElement(f('<div class="tdc-element-column tdc-element-inner-row">Cloned Inner Row</div>'));var c=tdcOperationUI.getDraggedElement();c.insertAfter(tdcInnerRowHandlerUI.$elementInnerRow);tdcInnerRowUI.bindInnerRow(c);var h=c.prevAll(".tdc-element-column").length,d=new tdcIFrameData.TdcModel({content:"",attrs:b.clone(a.get("attrs")),tag:"vc_row_inner",type:"closed",level:2,parentModel:a.get("parentModel")});new tdcIFrameData.TdcLiveView({model:d,el:c[0]});var l=new tdcIFrameData.TdcModel({content:"",
attrs:{},tag:"vc_column_inner",type:"closed",level:3,parentModel:d});c.data("model_id",d.cid);a.get("parentModel").get("childCollection").add(d,{at:h});c=new tdcIFrameData.TdcCollection;c.add(l);d.set("childCollection",c);c=new tdcIFrameData.TdcCollection;l.set("childCollection",c);l=tdcIFrameData._getDestinationCol(tdcOperationUI.getDraggedElement());d.getShortcodeRender(l,"",!0,a);tdcOperationUI.setDraggedElement(e);tb_remove()}},[a],"Are you sure you want to clone the current inner row and all its elements?")},
deleteHandler:function(a){null!==a&&a.preventDefault();tdConfirm.showModal("Delete inner row",tdcInnerRowHandlerUI,function(){tdcOperationUI.setDraggedElement(tdcInnerRowHandlerUI.$elementInnerRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);var a=tdcOperationUI.getDraggedElement(),g=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");var h=a.children();g=h.index(g);if(-1===g&&1===h.length||2===h.length&&-1!==g)g="",b.isUndefined(tdcElementHandlerUI.$element)&&(tdcElementHandlerUI.$element=
tdcInnerRowHandlerUI.$elementInnerRow),tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?g=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(g=" tdc-element-column"),g=f('<div class="'+tdcOperationUI._emptyElementClass+g+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(g),a.append(g);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:!1,wasElementDragged:!1,
wasInnerColumnDragged:!1,wasInnerRowDragged:!0,wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);tdcSidebarPanel.clearPanel();tb_remove()},e,"Are you sure you want to delete the current inner row and all its elements?")}}})(jQuery,Backbone,_);var tdcInnerColumnHandlerUI;
(function(f,d,b,e){tdcInnerColumnHandlerUI={_handlerId:"tdc-inner-column",_handlerText:"Inner Column",_handlerCssClass:"tdc-mask-inner-column",$elementInnerColumn:e,_$handlerWrapper:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcInnerColumnHandlerUI._isInitialized=!1);tdcInnerColumnHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcInnerColumnHandlerUI._handlerCssClass).length||(a=f('<div id="'+tdcInnerColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Inner column settings">'+
tdcInnerColumnHandlerUI._handlerText+"</div></div>"),tdcInnerColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a)),tdcInnerColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}).on("contextmousedown",
function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcInnerColumnHandlerUI.$elementInnerColumn)&&tdcInnerColumnHandlerUI._triggerEvent(a)}),tdcInnerColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcInnerColumnHandlerUI.$elementInnerColumn);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcInnerColumnHandlerUI._handlerId,tdcInnerColumnHandlerUI),
tdcInnerColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerColumn(a);b.isUndefined(a)?tdcInnerColumnHandlerUI._$handlerWrapper.hide():(tdcInnerColumnHandlerUI.$elementInnerColumn=a,tdcInnerColumnHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcInnerColumnHandlerUI.$elementInnerColumn)||tdcInnerColumnHandlerUI.$elementInnerColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcElementHandlerUI;
(function(f,d,b,e){tdcElementHandlerUI={_handlerId:"tdc-element",_handlerCssClass:"tdc-mask-element",_handlerText:"Element",_confirmDeletion:"Do you want to delete element?",$element:e,_$handlerWrapper:e,_$handlerClone:e,_$handlerDelete:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcElementHandlerUI._isInitialized=!1);tdcElementHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcElementHandlerUI._handlerCssClass).length||(tdcElementHandlerUI._$handlerWrapper=f('<div id="'+
tdcElementHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Element settings">'+tdcElementHandlerUI._handlerText+"</div></div>"),tdcElementHandlerUI._$handlerDelete=f('<div class="tdc-mask-element-delete" title="Delete element"></div>'),tdcElementHandlerUI._$handlerClone=f('<div class="tdc-mask-element-clone" title="Duplicate element"></div>'),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerDelete),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerClone),
tdcMaskUI.$handlerStructure.append(tdcElementHandlerUI._$handlerWrapper)),tdcElementHandlerUI._$handlerDelete.click(function(a){tdcElementHandlerUI.deleteHandlerConfirm(a)}),tdcElementHandlerUI._$handlerClone.click(function(a){tdcElementHandlerUI.cloneHandler(a)}),tdcElementHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcElementHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcElementHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcElementHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentElement(tdcElementHandlerUI.$element);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentElement(e);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcElementHandlerUI.$element)&&tdcElementHandlerUI._triggerEvent(a)}),tdcMaskUI.addHandler(tdcElementHandlerUI._handlerId,tdcElementHandlerUI),tdcElementHandlerUI._isInitialized=!0)},deleteHandlerConfirm:function(a){tdConfirm.showModal("Delete current element",
tdcElementHandlerUI,function(a){tdcElementHandlerUI.deleteHandler(a);tb_remove()},[a],"Are you sure you want to delete this element?")},deleteHandler:function(a){null!==a&&a.preventDefault();tdcOperationUI.setDraggedElement(tdcElementHandlerUI.$element);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();var c=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");var b=a.children();c=b.index(c);if(-1===c&&1===b.length||2===b.length&&-1!==c)c=
"",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(c=" tdc-element-column"),c=f('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(c),a.append(c);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:!1,wasElementDragged:!0,wasInnerColumnDragged:!1,wasInnerRowDragged:!1,
wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);tdcSidebarPanel.clearPanel()},cloneHandler:function(a){a.preventDefault();a.stopPropagation();a=tdcElementHandlerUI.$element.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,
!1);else if(a=tdcIFrameData.getModel(a),b.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model not in structure data!",!0,!1);else{var c=a.clone(),g=a.get("parentModel").get("childCollection");g.add(c,{at:g.indexOf(a)+1,silent:!0});tdcOperationUI.setDraggedElement(f('<div class="tdc-element">Cloned Element</div>'));g=tdcOperationUI.getDraggedElement();g.insertAfter(tdcElementHandlerUI.$element);tdcElementUI.bindElement(g);var h=tdcIFrameData._getDestinationModel(tdcOperationUI.getDraggedElement(),
[".tdc-inner-column",".tdc-column"]);b.isUndefined(h)&&new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Destination model not in structure data!",!0,!1);h=tdcIFrameData._getDestinationCol(tdcOperationUI.getDraggedElement());new tdcIFrameData.TdcLiveView({model:c,el:g[0]});g.data("model_id",c.cid);c.getShortcodeRender(h,"",!0,a);tdcOperationUI.setDraggedElement(e)}},setElement:function(a){!b.isUndefined(a)&&tdcOperationUI.isElement(a)?(tdcElementHandlerUI.$element=
a,tdcElementHandlerUI._$handlerWrapper.show()):tdcElementHandlerUI._$handlerWrapper.hide()},show:function(){tdcElementHandlerUI._$handlerWrapper.show()},hide:function(){tdcElementHandlerUI._$handlerWrapper.hide()},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcElementHandlerUI.$element)||tdcElementHandlerUI.$element.trigger(a)}}})(jQuery,Backbone,_);var tdcIFrameData;
(function(f,d,b,e){tdcIFrameData={iframeContents:e,tdcTopCollection:e,TdcModel:e,TdcCollection:e,TdcLiveView:e,_postOriginalContentJSON:e,_shortcodeParserSettingsClone:e,_isInitialized:!1,init:function(a,c){b.isUndefined(c)||!0!==c||(tdcIFrameData._isInitialized=!1);if(!tdcIFrameData._isInitialized&&(tdcIFrameData.iframeContents=a,tdcIFrameData._defineStructuredData(),!0===tdcIFrameData._initStructuredData())){c={};tdcIFrameData.bindViewsModelsWrappers(c,tdcIFrameData.tdcTopCollection,tdcIFrameData.iframeContents);
if(!b.isEmpty(c)){for(var e in c)tdcDebug.log(c[e]);a='The model does not match the <a href="'+a.attr("URL")+'" target="_blank">content</a>';b.isUndefined(c[e].info)||(a=c[e].info+". "+a);new tdcNotice.notice(a,!0,!1)}tdcDebug.log(tdcIFrameData.tdcTopCollection.models);""===tdcState.getHeaderTemplateId()?(tdcSidebar.$_headerTemplateZones.hide(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").hide()):"no_header"===tdcState.getHeaderTemplateId()?(tdcSidebar.$_headerTemplateZones.hide(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").hide()):
(tdcSidebar.$_headerTemplateZones.show(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").show());""===tdcState.getFooterTemplateId()?tdcSidebar.$_sidebar.find(".tdu-save-footer-template").hide():"no_footer"===tdcState.getFooterTemplateId()?tdcSidebar.$_sidebar.find(".tdu-save-footer-template").hide():tdcSidebar.$_sidebar.find(".tdu-save-footer-template").show();tdcIFrameData.addDummyContent();tdcIFrameData._isInitialized=!0;tdcRecycle.init()}},activateZone:function(a,c,g){tdcIFrameData.iframeContents.find(".tdc-zone").each(function(h){h=
f(this);if(h.data("type")===a){var d=h.data("model_id");if(!b.isUndefined(d)&&(d=tdcIFrameData.getModel(d),!b.isUndefined(d))){var l=d.get("blockUid");if(!b.isUndefined(l)){var k=tdcAdminIFrameUI.getLiveIframe(),m=k.contents().find("#"+l);m.length||(m=k.contents().find('[data-td-block-uid="'+l+'"]'));m.length&&(l={},tdcOperationUI.inRow(m)?tdcOperationUI.inRow(m)?tdcOperationUI.inColumn(m)?tdcOperationUI.inInnerRow(m)?tdcOperationUI.inInnerColumn(m)?(l.$currentZone=tdcOperationUI.inZone(m),l.$currentRow=
tdcOperationUI.inRow(m),l.$currentColumn=tdcOperationUI.inColumn(m),l.$currentInnerRow=tdcOperationUI.inInnerRow(m),l.$currentInnerColumn=tdcOperationUI.inInnerColumn(m),l.$currentElement=m):(l.$currentZone=tdcOperationUI.inZone(m),l.$currentRow=tdcOperationUI.inRow(m),l.$currentColumn=tdcOperationUI.inColumn(m),l.$currentInnerRow=tdcOperationUI.inInnerRow(m),l.$currentInnerColumn=m):(l.$currentZone=tdcOperationUI.inZone(m),l.$currentRow=tdcOperationUI.inRow(m),l.$currentColumn=tdcOperationUI.inColumn(m),
l.$currentInnerRow=m):(l.$currentZone=tdcOperationUI.inZone(m),l.$currentRow=tdcOperationUI.inRow(m),l.$currentColumn=m):(l.$currentZone=tdcOperationUI.inZone(m),l.$currentRow=m):l.$currentZone=m,tdcSidebar._currentModel=d,m.data("model_id",d.cid),tdcSidebar.setSettings(l,!0,d),tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-phone").trigger("click"),0<a.indexOf("sticky")?(0<a.indexOf("mobile")?tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-phone").trigger("click"):
"phone"===tdcSidebar.currentViewportSettings.name&&tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-all").trigger("click"),b.isUndefined(c)||(!0===c?(tdcSidebar.setForcedHeaderZone(a),h.parent().addClass("tdc-zone-sticky-active"),h.parent().removeClass("tdc-zone-sticky-inactive"),h.parent().removeClass("tdc-zone-sticky-invisible"),b.isUndefined(g)||!0!==g||(setTimeout(function(){tdcIFrameData.addDummyContent()},100),setTimeout(function(){tdcIFrameData.iframeContents.scrollTop(tdcAdminIFrameUI.getIframeWindow().tdHeader.getFixedHeaderHeight()+
210)},150),setTimeout(function(){tdcIFrameData.iframeContents.scrollTop(tdcAdminIFrameUI.getIframeWindow().tdHeader.getFixedHeaderHeight()+209)},200))):(h.parent().removeClass("tdc-zone-sticky-active"),h.parent().addClass("tdc-zone-sticky-inactive"),h.parent().addClass("tdc-zone-sticky-invisible")))):(0<a.indexOf("mobile")?tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-phone").trigger("click"):"phone"===tdcSidebar.currentViewportSettings.name&&tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-all").trigger("click"),
tdcSidebar.setForcedHeaderZone(e),b.isUndefined(g)||!0!==g||(setTimeout(function(){tdcIFrameData.addDummyContent()},100),setTimeout(function(){tdcIFrameData.iframeContents.scrollTop(0)},200))))}}}})},addDummyContent:function(){tdcIFrameData.iframeContents.find(".tdc-zone").each(function(a){if("tdc_content"===f(this).data("type")){a=tdcIFrameData.iframeContents.find(".tdc-dummy-content");var c=tdcIFrameData.iframeContents.contents().find("body"),b=c.height()-tdcAdminIFrameUI.getIframeWindow().innerHeight,
e=0;a.length&&a.remove();0>b?e=Math.abs(b)+tdcIFrameData.iframeContents.contents().find(".td-main-content-wrap").offset().top+300:5>c.height()-tdcAdminIFrameUI.getIframeWindow().innerHeight-tdcIFrameData.iframeContents.contents().find(".td-main-content-wrap").offset().top&&(e=tdcAdminIFrameUI.getIframeWindow().innerHeight-c.height()+tdcIFrameData.iframeContents.contents().find(".td-main-content-wrap").offset().top+300);c.append('<div class="tdc-dummy-content" style="height:'+e+'px"></div>')}})},rebuildZone:function(a,
c,g,d){var h=tdcIFrameData.getFirstModelByZoneType(a);if(!b.isUndefined(h)){var f=h.get("blockUid");tdcIFrameData.removeModel(h,!0,{silent:!0});h=tdcIFrameData._getOriginalContentJSON(c);if(b.isUndefined(h)||""===h)h=[{child:[tdcShortcodeParser.parse(0,'[tdc_zone type="'+a+'"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]')[0].child[0]],index:0,content:'[tdc_zone type="'+a+'"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]',shortcode:{tag:"tdc_zone",type:"closed",attrs:{named:{type:a}},content:"[vc_row][vc_column][/vc_column][/vc_row]"}}];
if(tdcIFrameData._initComponentData(a,h,!0)){h=tdcIFrameData.getFirstModelByZoneType(a);a=tdcIFrameData.iframeContents.find("#"+f);if(!a.length)return!1;c=a.get(0);a.data("model_id",h.cid);h.set("blockUid",f);h.set("html",c.innerHTML);new tdcIFrameData.TdcLiveView({model:h,el:c});b.isUndefined(g)||tdcIFrameData._checkModelData(h,{error:e,getShortcode:"",newImages:g});h.getShortcodeRender(3,f,!0,e,d)}return!0}return!1},setHeaderTemplate:function(a,c,g){if(""===a)tdcState.isNoHeader()?tdcIFrameData.iframeContents.find(".tdc-header-wrap").addClass("tdc-zone-invisible"):
tdcIFrameData.iframeContents.find(".tdc-header-wrap").removeClass("tdc-zone-invisible"),tdcIFrameData.iframeContents.find(".td-header-desktop-wrap, .td-header-desktop-sticky-wrap, .td-header-mobile-wrap, .td-header-mobile-sticky-wrap").addClass("tdc-zone-invisible"),tdcSidebar.$_headerTemplateZones.hide(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").hide(),b.isUndefined(g)||b.isUndefined(g.is_snapshot)||!g.is_snapshot?(tdcRecycle.init(),tdcRecycle.takeSnapshot()):"Newspaper"===window.tdcAdminSettings.themeName&&
["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(a,c){var h;b.isUndefined(g)||(h=JSON.parse(JSON.stringify(g)));"tdc_header_mobile_sticky"!==a||b.isUndefined(g)||b.isUndefined(g.is_snapshot)||!g.is_snapshot||(b.isUndefined(h)&&(h={}),h.lateCallback=function(){var a=f(tdcAdminIFrameUI._$liveIframe).contents();tdcIFrameData.init(a,!0);tdcRecycle.clearJsItems();tdcOperationUI.init(a);b.isUndefined(h.indexPath)||tdcSidebarPanel.showShortcodeFromPath(h.indexPath)});
tdcIFrameData.rebuildZone(a,"[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]",e,h)}),b.isUndefined(g)||b.isUndefined(g.saveHeaderTemplate)||b.isUndefined(g.headerTemplateId)||(tdcSavePost.updateHeaderTemplate(),window.eventHub.$emit("refresh-header-fonts",{headerTemplateId:g.headerTemplateId}),window.eventHub.$emit("refresh-header-colors",{headerTemplateId:g.headerTemplateId}));else{var h=JSON.parse(tdcUtil.b64DecodeUnicode(a));tdcIFrameData.iframeContents.find(".tdc-header-wrap").addClass("tdc-zone-invisible");
tdcIFrameData.iframeContents.find(".td-header-desktop-wrap, .td-header-desktop-sticky-wrap, .td-header-mobile-wrap, .td-header-mobile-sticky-wrap").removeClass("tdc-zone-invisible");tdcSidebar.$_headerTemplateZones.show();tdcSidebar.$_sidebar.find(".tdu-save-header-template").show();"Newspaper"===window.tdcAdminSettings.themeName&&["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(a,e){if(h.hasOwnProperty(a)){if(!b.isUndefined(g))var d=
JSON.parse(JSON.stringify(g));"tdc_header_mobile_sticky"!==a||b.isUndefined(g)||b.isUndefined(g.is_snapshot)||!g.is_snapshot||(b.isUndefined(d)&&(d={}),d.lateCallback=function(){var a=f(tdcAdminIFrameUI._$liveIframe).contents();tdcIFrameData.init(a,!0);tdcRecycle.clearJsItems();tdcOperationUI.init(a);b.has(g,"data")&&b.has(data,"replyJsForEval")&&tdcAdminIFrameUI.evalInIframe(g.data.replyJsForEval);b.isUndefined(d.indexPath)||tdcSidebarPanel.showShortcodeFromPath(d.indexPath)});tdcIFrameData.rebuildZone(a,
h[a],c,d)}});"header"===window.tdcPostSettings.tdbTemplateType?tdcSavePost.updateHeaderTemplate():b.isUndefined(g)||b.isUndefined(g.saveHeaderTemplate)||b.isUndefined(g.headerTemplateId)||(tdcSavePost.updateHeaderTemplate(),window.eventHub.$emit("refresh-header-fonts",{headerTemplateId:g.headerTemplateId}),window.eventHub.$emit("refresh-header-colors",{headerTemplateId:g.headerTemplateId}))}},setFooterTemplate:function(a,c,g){if(""===a){tdcState.isNoFooter()?tdcIFrameData.iframeContents.find(".tdc-footer-wrap").addClass("tdc-zone-invisible"):
tdcIFrameData.iframeContents.find(".tdc-footer-wrap").removeClass("tdc-zone-invisible");tdcIFrameData.iframeContents.find(".td-footer-wrap").addClass("tdc-zone-invisible");tdcSidebar.$_sidebar.find(".tdu-save-footer-template").hide();if(b.isUndefined(g)||b.isUndefined(g.is_snapshot)||!g.is_snapshot)tdcRecycle.init(),tdcRecycle.takeSnapshot();else if("Newspaper"===window.tdcAdminSettings.themeName){if(!b.isUndefined(g))var h=JSON.parse(JSON.stringify(g));tdcIFrameData.rebuildZone("tdc_footer","[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]",
e,h)}b.isUndefined(g)||b.isUndefined(g.saveFooterTemplate)||b.isUndefined(g.footerTemplateId)||(tdcSavePost.updateFooterTemplate(),window.eventHub.$emit("refresh-footer-fonts",{footerTemplateId:g.footerTemplateId}),window.eventHub.$emit("refresh-footer-colors",{footerTemplateId:g.footerTemplateId}))}else tdcIFrameData.iframeContents.find(".tdc-footer-wrap").addClass("tdc-zone-invisible"),tdcIFrameData.iframeContents.find(".td-footer-wrap").removeClass("tdc-zone-invisible"),tdcSidebar.$_sidebar.find(".tdu-save-footer-template").show(),
"Newspaper"===window.tdcAdminSettings.themeName&&(b.isUndefined(g)||(h=JSON.parse(JSON.stringify(g))),tdcIFrameData.rebuildZone("tdc_footer",a,c,h)),"footer"===window.tdcPostSettings.tdbTemplateType?tdcSavePost.updateFooterTemplate():b.isUndefined(g)||b.isUndefined(g.saveFooterTemplate)||b.isUndefined(g.footerTemplateId)||(tdcSavePost.updateFooterTemplate(),window.eventHub.$emit("refresh-footer-fonts",{footerTemplateId:g.footerTemplateId}),window.eventHub.$emit("refresh-footer-colors",{footerTemplateId:g.footerTemplateId}))},
_callbackShortcodeRender:function(a){b.isUndefined(a)||b.isUndefined(a.lateCallback)||(b.isUndefined(a.lateCallbackContext)?setTimeout(function(){a.lateCallback.call(this)},2E3):setTimeout(function(){a.lateCallback.call(a.lateCallbackContext)},2E3))},_defineStructuredData:function(){tdcIFrameData._isInitialized||(tdcIFrameData.TdcModel=Backbone.Model.extend({getShortcodeRender:function(a,c,g,h,d){var f=this,n={error:e,getShortcode:""};b.isUndefined(h)?tdcIFrameData._checkModelData(f,n):tdcIFrameData._checkModelData(h,
n);if(!b.isUndefined(n.getShortcode)){var m=new tdcJobManager.job;m.shortcode=n.getShortcode;m.columns=a;m.blockUid=c;m.tries=0;m.success_callback=function(a){tdcDebug.log(a);var n=tdcAdminIFrameUI.getIframeWindow();b.isUndefined(h)&&tdcIFrameData.deleteCallback(f);!1===g?f.set("blockUid",a.blockUid):f.set("blockUid",e);b.has(a,"replyHtml")&&(f.set("bindNewContent",g),f.set("shortcode",m.shortcode),f.set("html",a.replyHtml,d));b.has(a,"replyJsForEval")&&(n.tdcEvalGlobal={oldBlockUid:c},tdcAdminIFrameUI.evalInIframe(a.replyJsForEval));
b.isUndefined(d)||b.isUndefined(d.earlyCallback)||(b.isUndefined(d.earlyCallbackContext)?d.earlyCallback.call(this):d.earlyCallback.call(d.earlyCallbackContext))};b.isUndefined(d)||b.isUndefined(d.is_snapshot)||!0!==d.is_snapshot||(m.is_snapshot=!0);m.error_callback=function(a,c){tdcDebug.log(c);tdcDebug.log(a);m.tries||(m.tries++,tdcJobManager.addJob(m))};a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.addClass("tdc-dropped");tdcJobManager.addJob(m)}n={error:e,getShortcode:""};tdcIFrameData._checkModelData(f,
n);b.isUndefined(n.error)||tdcDebug.log(n.error);n={error:e,getShortcode:""};b.isUndefined(f.get("parentModel"))||(tdcIFrameData._checkModelData(f.get("parentModel"),n),b.isUndefined(n.error)||tdcDebug.log(n.error))}}),tdcIFrameData.TdcCollection=Backbone.Collection.extend({model:tdcIFrameData.TdcModel}),tdcIFrameData.TdcTopCollection=Backbone.Collection.extend({model:tdcIFrameData.TdcModel}),tdcIFrameData.TdcLiveView=Backbone.View.extend({initialize:function(){this.listenTo(this.model,"change:current",
this.changeCurrent);this.listenTo(this.model,"change:html",this.customRender);this.listenTo(this.model,"remove",this.customRemove)},changeCurrent:function(a,c,e){this.model.has("current")&&!b.isUndefined(this.model.get("current"))&&!0===this.model.get("current")?(this.$el.addClass("tdc-element-selected"),tdcOperationUI.activeElementOver()):(this.$el.removeClass("tdc-element-selected"),tdcOperationUI.inactiveElementOver());this.model.set("cssWidth",this.$el.width())},customRemove:function(a,c,b){this.$el.hasClass("tdc-rows")?
this.$el.html(""):this.remove()},customRender:function(a,c,g){tdcDebug.log("customRender - Rendering our model");if(this.model.has("html")&&!b.isUndefined(this.model.get("html"))){this.$el.removeClass("tdc-dropped");this.$el.removeClass("tdc-changed");this.$el.hasClass("tdc_zone")?this.$el.html(this.$el.html()+this.model.get("html")):this.$el.html(this.model.get("html"));setTimeout(function(){"undefined"!==typeof tdcIFrameData.iframeContents.lastMouseEvent&&tdcMaskUI.repositionMask(tdcIFrameData.iframeContents.lastMouseEvent)},
100);c=this.$el.find(".td_block_wrap");c.length&&0===parseInt(c.outerHeight(!0))&&c.addClass("tdc-block-empty");if(this.model.has("bindNewContent")&&!0===this.model.get("bindNewContent"))if(this.model.set("bindNewContent",!1,{silent:!0}),this.$el.hasClass("tdc-element-inner-row-temp")){if(a.has("templateContent")){c=tdcUtil.b64DecodeUnicode(a.get("templateContent"));var d=this.$el.find(".tdc-inner-row");a.set("type","closed");a.set("content",c);a.unset("shortcode",{silent:!0});a.unset("templateContent",
{silent:!0});tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);var n=tdcShortcodeParser.parse(2,c);n.length&&(n=b.clone(n[0].shortcode.attrs.named),a.set("attrs",n));this.$el.removeClass("tdc-element-inner-row-temp").addClass("tdc-element-inner-row");this.model.set("blockUid",d.attr("id"));window.addInnerRowWrappers(this.$el);if(!0===tdcIFrameData._initNewContentStructureData(4,c,a)){var l=a.get("childCollection"),k={};tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,4);if(!b.isEmpty(k)){for(var m in k)tdcDebug.log(k[m]);
new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}}}else if(d=this.$el.find(".tdc-inner-row"),l=a.get("childCollection"),this.$el.removeClass("tdc-element-inner-row-temp").addClass("tdc-element-inner-row"),this.model.set("blockUid",d.attr("id")),window.addInnerRowWrappers(this.$el),!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,4),!b.isEmpty(k))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcInnerRowUI.init(this.$el.parent());tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-element-inner-row")){d=this.$el.find(".tdc-inner-row");l=this.model.get("childCollection");
b.isUndefined(l)||l.reset();window.addInnerRowWrappers(this.$el);this.model.set("blockUid",d.attr("id"));var p=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(4,p,a)&&(l=this.model.get("childCollection"),!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,4),!b.isEmpty(k)))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);
tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-cloud-temp")){if(this.model.has("templateContent")){var q=this;c=q.model.get("templateContent");m=q.$el.find(".tdc-row");tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);
c=tdcShortcodeParser.parse(1,tdcUtil.b64DecodeUnicode(c));if(c.length!==m.length){new tdcNotice.notice("Errors happened in templateContent(content.length!==$tdcRows.length) during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}a=tdcIFrameData.getFirstModelByZoneType("tdc_content");b.isUndefined(a)&&new tdcNotice.notice("Errors happened in templateContent during tdc_content zone!",!0,!1);l=a.get("childCollection");b.isUndefined(l)&&new tdcNotice.notice("Errors happened in templateContent during tdc_content childCollection!",
!0,!1);l=new tdcIFrameData.TdcCollection;a.set("childCollection",l);k={};b.each(c,function(c,b,e){tdcIFrameData._getData(a,c,k)});b.isEmpty(k)||(tdcDebug.log(k),new tdcNotice.notice("Errors happened in templateContent during tdcIFrameData.changeData() -> _getData()!",!0,!1));c={error:e,shortcode:e};tdcIFrameData.checkCurrentData(c);b.isUndefined(c.error)||(tdcDebug.log(c.error),new tdcNotice.notice(k,!0,!1));l=a.get("childCollection");if(m.length!==l.length){new tdcNotice.notice("Errors happened in templateContent during() tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}q.$el.find(".tdc-row").each(function(a,c){var e=f(c);e.insertBefore(q.$el);a=l.at(a);new tdcIFrameData.TdcLiveView({model:a,el:c});var g=q.$el.prevAll().length;c=a.get("childCollection");l.add(a,{at:g});window.addRowWrappers(e);if(!0===tdcIFrameData._initNewContentStructureData(2,p,a)&&!b.isUndefined(c))if(g={},tdcIFrameData.bindViewsModelsWrappers(g,c,e,2),b.isEmpty(g))e.data("model_id",a.cid);else{for(var d in g)tdcDebug.log(g[d]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1)}});a.set("childCollection",l);m=tdcOperationUI.inZone(q.$el);q.$el.remove();tdcIFrameData.removeModel(q.model);tdcZoneUI.init(d);tdcRowUI.init(d);tdcColumnUI.init(d);tdcInnerRowUI.init(d);tdcInnerColumnUI.init(d);tdcElementUI.init(d);tdcSidebar.setSettings({$currentZone:m,$currentRow:d},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}}else if(this.$el.hasClass("tdc-row-temp")){if(a.has("templateContent")){c=tdcUtil.b64DecodeUnicode(a.get("templateContent"));d=this.$el.find(".tdc-row");
l=a.get("childCollection");a.set("type","closed");a.set("content",c);a.unset("shortcode",{silent:!0});a.unset("templateContent",{silent:!0});tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);n=tdcShortcodeParser.parse(1,c);n.length&&(n=b.clone(n[0].shortcode.attrs.named),a.set("attrs",n));this.$el.removeClass("tdc-row-temp").addClass(d.attr("class"));this.$el.attr("id",d.attr("id"));this.$el.html(d.html());this.model.set("blockUid",d.attr("id"));window.addRowWrappers(this.$el);
if(!0===tdcIFrameData._initNewContentStructureData(2,c,a)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,2),!b.isEmpty(k))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el.parent());tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:this.$el},e,this.model)}else{d=this.$el.find(".tdc-row");
l=a.get("childCollection");this.$el.removeClass("tdc-row-temp").addClass(d.attr("class"));this.$el.attr("id",d.attr("id"));this.$el.html(d.html());this.model.set("blockUid",d.attr("id"));window.addRowWrappers(this.$el);k={};tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,2);if(!b.isEmpty(k)){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el.parent());tdcColumnUI.init(this.$el);tdcElementUI.init(this.$el);
tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(c),$currentRow:this.$el,$currentColumn:tdcOperationUI.inColumn(c),$currentElement:c},e,this.model)}tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-zone")){d=this.$el.find(".tdc-zone");l=this.model.get("childCollection");b.isUndefined(l)||l.reset();this.$el.html(d.html());this.$el.attr("class",d.attr("class"));this.$el.attr("id",d.attr("id"));this.model.set("blockUid",d.attr("id"));window.addZoneWrappers(this.$el);
p=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(1,p,this.model)&&!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,1),!b.isEmpty(k))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el);tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:this.$el});
tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-row")){d=this.$el.find(".tdc-row");l=this.model.get("childCollection");b.isUndefined(l)||l.reset();this.$el.html(d.html());this.$el.attr("class",d.attr("class"));this.$el.attr("id",d.attr("id"));this.model.set("blockUid",d.attr("id"));window.addRowWrappers(this.$el);p=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(2,p,this.model)&&!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,
l,this.$el,2),!b.isEmpty(k))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:this.$el},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-column")){a.has("templateContent")&&(c=tdcUtil.b64DecodeUnicode(a.get("templateContent")),
a.set("type","closed"),a.unset("templateContent",{silent:!0}));d=this.$el.find(".tdc-column");l=this.model.get("childCollection");b.isUndefined(l)||l.reset();d.unwrap();this.$el=d;this.$el.data("model_id",this.model.cid);window.addColumnWrappers(this.$el);p=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,p,this.model)&&(l=this.model.get("childCollection"),!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,3),!b.isEmpty(k)))){for(m in k)tdcDebug.log(k[m]);
new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcColumnUI.init(this.$el.parent());tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:this.$el},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-inner-row")){d=this.$el.find(".tdc-inner-row");l=
this.model.get("childCollection");b.isUndefined(l)||l.reset();this.$el.html(d.html());window.addInnerRowWrappers(this.$el);p=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,p,this.model)&&!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,3),!b.isEmpty(k))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);
tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:this.$el},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-inner-column")){a.has("templateContent")&&(c=tdcUtil.b64DecodeUnicode(a.get("templateContent")),a.set("type","closed"),a.unset("templateContent",{silent:!0}));d=this.$el.find(".tdc-inner-column");l=this.model.get("childCollection");
b.isUndefined(l)||l.reset();d.unwrap();this.$el=d;this.$el.data("model_id",this.model.cid);window.addInnerColumnWrappers(this.$el);p=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(5,p,this.model)&&(l=this.model.get("childCollection"),!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,this.$el,5),!b.isEmpty(k)))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerColumnUI.init(this.$el.parent());
tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),$currentInnerColumn:this.$el},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc_zone")){d=this.$el.find(".tdc-row");c=this.model.cid;a=tdcIFrameData.getModel(c);l=a.get("childCollection");d.data("model_id",c);this.model.set("blockUid",
d.attr("id"));window.addZoneWrappers(this.$el);if(!b.isUndefined(l)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,l,d,2),!b.isEmpty(k))){for(m in k)tdcDebug.log(k[m]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcZoneUI.init(this.$el);tdcRowUI.init(this.$el);tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);this.$el=d;tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),
$currentRow:d},e,this.model);tdcIFrameData._callbackShortcodeRender(g)}else if(this.$el.hasClass("tdc-element")){d=this.$el.attr("class");m=[];b.isUndefined(d)||(m=this.$el.attr("class").split(/\s+/));this.$el.html(this.model.get("html"));d=this.$el.find(".td_block_wrap");d.unwrap();this.$el=d;this.$el.data("model_id",this.model.cid);this.model.set("blockUid",d.data("td-block-uid"));d=e;this.model.has("rebindToPanel")&&!0===this.model.get("rebindToPanel")&&(this.model.set("rebindToPanel",!1,{silent:!0}),
d=!0);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),$currentInnerColumn:tdcOperationUI.inInnerColumn(this.$el),$currentElement:this.$el},d,this.model);tdcIFrameData._callbackShortcodeRender(g);var t=this;f.each(m,function(a,c){0===c.indexOf("tdc-element")&&t.$el.addClass(c)});tdcElementUI.bindElement(this.$el)}(b.isUndefined(g)||b.isUndefined(g.is_snapshot)||
!g.is_snapshot)&&tdcRecycle.takeSnapshot()}}}))},_getPostOriginalContentJSON:function(a){if(!0===a||b.isUndefined(tdcIFrameData._postOriginalContentJSON)&&!b.isUndefined(window.tdcPostSettings))a=Object.keys(window.tdcAdminSettings.mappedShortcodes),a=a.filter(function(a){return 0>["tdc_zone","vc_row","vc_column","vc_row_inner","vc_column_inner"].indexOf(a)}),a={0:["tdc_zone"],1:["vc_row"],2:["vc_column"],3:["vc_row_inner"],4:["vc_column_inner"],5:a},tdcIFrameData._shortcodeParserSettingsClone=a,
tdcShortcodeParser.init(a),tdcIFrameData._postOriginalContentJSON=tdcShortcodeParser.parse(0,tdcUtil.b64DecodeUnicode(window.tdcPostSettings.postContent));return tdcIFrameData._postOriginalContentJSON},_getOldPostOriginalContentJSON:function(){if(b.isUndefined(tdcIFrameData._postOriginalContentJSON)&&!b.isUndefined(window.tdcPostSettings)){var a=Object.keys(window.tdcAdminSettings.mappedShortcodes);a=a.filter(function(a){return 0>["vc_row","vc_column","vc_row_inner","vc_column_inner"].indexOf(a)});
a={0:["vc_row"],1:["vc_column"],2:["vc_row_inner"],3:["vc_column_inner"],4:a};tdcIFrameData._shortcodeParserSettingsClone=a;tdcShortcodeParser.init(a);tdcIFrameData._postOriginalContentJSON=tdcShortcodeParser.parse(0,tdcUtil.b64DecodeUnicode(window.tdcPostSettings.postContent))}return tdcIFrameData._postOriginalContentJSON},_getOriginalContentJSON:function(a){var c=Object.keys(window.tdcAdminSettings.mappedShortcodes);c=c.filter(function(a){return 0>["tdc_zone","vc_row","vc_column","vc_row_inner",
"vc_column_inner"].indexOf(a)});c={0:["tdc_zone"],1:["vc_row"],2:["vc_column"],3:["vc_row_inner"],4:["vc_column_inner"],5:c};tdcIFrameData._shortcodeParserSettingsClone=c;tdcShortcodeParser.init(c);return tdcShortcodeParser.parse(0,a)},_getContentJSON:function(a,c){var e;b.isUndefined(window.tdcPostSettings)||(e=tdcShortcodeParser.parse(a,c));return e},_initStructuredData:function(){if(!tdcIFrameData._isInitialized){tdcIFrameData.tdcTopCollection=new tdcIFrameData.TdcTopCollection;var a=tdcIFrameData._getPostOriginalContentJSON();
a.length||(window.tdcPostSettings.postContent.length&&"header"!==window.tdcPostSettings.tdbTemplateType&&"footer"!==window.tdcPostSettings.tdbTemplateType?(a=tdcUtil.b64DecodeUnicode(window.tdcPostSettings.postContent),0<=a.indexOf("vc_row")?window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode('[tdc_zone type="tdc_content"]'+a+"[/tdc_zone]"):window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode('[tdc_zone type="tdc_content"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]')):window.tdcPostSettings.postContent=
tdcUtil.b64EncodeUnicode('[tdc_zone type="tdc_content"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]'),a=tdcIFrameData._getPostOriginalContentJSON(!0));var c={};c.tdc_content=a;a=tdcState.getHeaderTemplateContent();if(""!==a){a=JSON.parse(tdcUtil.b64DecodeUnicode(a));for(var e in a)c[e]=tdcIFrameData._getOriginalContentJSON(a[e])}e=tdcState.getFooterTemplateContent();""!==e&&(c.tdc_footer=tdcIFrameData._getOriginalContentJSON(e));var d=tdcShortcodeParser.parse(0,"[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]");
"tdc_header_desktop tdc_header_desktop_sticky tdc_header_mobile tdc_header_mobile_sticky tdc_content tdc_footer".split(" ").forEach(function(a){if("Newspaper"===window.tdcAdminSettings.themeName||"tdc_content"===a)if(b.isUndefined(c[a])||""===c[a]||"object"===typeof c[a]&&!c[a].length)c[a]=[{child:[d[0].child[0]],index:0,content:'[tdc_zone type="'+a+'"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]',shortcode:{tag:"tdc_zone",type:"closed",attrs:{named:{type:a}},content:"[vc_row][vc_column][/vc_column][/vc_row]"}}]});
for(var f in c)if(c.hasOwnProperty(f)&&!tdcIFrameData._initComponentData(f,c[f]))return;return!0}},_initComponentData:function(a,c,g){if(!b.isUndefined(g)&&!1!==g||!tdcIFrameData._isInitialized){if(c.length){var d={};b.each(c,function(c,b,g){tdcIFrameData._getData(e,c,d,e,a)});b.isEmpty(d)||(console.log(c),tdcDebug.log(d),new tdcNotice.notice("Errors happened during _initStructureData() -> _getData()!",!0,!1));c={error:e,shortcode:e};tdcIFrameData.checkCurrentData(c);b.isUndefined(c.error)||(tdcDebug.log(c.error),
new tdcNotice.notice(d,!0,!1))}return!0}},_initNewContentStructureData:function(a,c,g){c=tdcIFrameData._getContentJSON(a,c);if(c.length){var d={};b.each(c,function(c,b,e){tdcIFrameData._getData(g,c,d,a)});b.isEmpty(d)||(tdcDebug.log(d),new tdcNotice.notice(d,!0,!1));c={error:e,shortcode:e};tdcIFrameData.checkCurrentData(c);b.isUndefined(c.error)||(tdcDebug.log(c.error),new tdcNotice.notice("Errors happened during _initNewContentStructureData() -> checkCurrentData()!",!0,!1))}return!0},_getData:function(a,
c,e,d,f){var g;if(b.isUndefined(a))var h=tdcIFrameData.tdcTopCollection;else h=a.get("childCollection"),b.isUndefined(h)&&(h=new tdcIFrameData.TdcCollection,a.set("childCollection",h));for(var n in tdcIFrameData._shortcodeParserSettingsClone)if(!(!b.isUndefined(d)&&parseInt(d,10)>n||b.isUndefined(c.shortcode))&&b.isObject(c.shortcode)&&b.has(c.shortcode,"tag")&&-1!==b.indexOf(tdcIFrameData._shortcodeParserSettingsClone[n],c.shortcode.tag)){0<parseInt(n,10)&&b.isUndefined(a)&&(g="Not zones as the first elements!");
!b.isUndefined(a)&&parseInt(a.get("level"),10)>=parseInt(n,10)&&(g="Elements does not respect the shortcode levels! ParentModel (cid: "+a.cid+" ) level: "+a.get("level")+" - element level : "+n);!b.isUndefined(a)&&2<parseInt(n,10)-parseInt(a.get("level"),10)&&3!==parseInt(a.get("level"),10)&&5!==parseInt(n,10)&&(g="Elements respect the shortcode levels, but the difference higher than 2 is not allowed here!");b.isUndefined(g)||(e[b.keys(e).length]={element:c,info:g,parentModel:a});5!==parseInt(n,10)||
b.isUndefined(c.shortcode.content)||(d=b.clone(c.shortcode.attrs.named),d.content=c.shortcode.content,c.shortcode.attrs.named=d);n={content:c.content,attrs:c.shortcode.attrs.named,tag:c.shortcode.tag,type:c.shortcode.type,level:parseInt(n,10),parentModel:a,bindNewContent:!1};b.isUndefined(f)||(n.type_zone=f);var p=new tdcIFrameData.TdcModel(n);b.has(c,"child")&&0<c.child.length&&(p.set("childCollection",new tdcIFrameData.TdcCollection),b.each(c.child,function(a,c,b){tdcIFrameData._getData(p,a,e)}));
break}b.isUndefined(p)?e[b.keys(e).length]={element:c,info:"Element not found!",parentModel:a}:b.isUndefined(h)||h.add(p)},getModel:function(a,c){if(tdcIFrameData._isInitialized){var e;b.isUndefined(c)&&(c=tdcIFrameData.tdcTopCollection);b.each(c.models,function(c,g,d){b.isUndefined(e)&&(c.cid===a?e=c:c.has("childCollection")&&(c=c.get("childCollection"),e=tdcIFrameData.getModel(a,c)))});if(!b.isUndefined(e))return e}},getFirstModelByTag:function(a,c){if(tdcIFrameData._isInitialized){var e;b.isUndefined(c)&&
(c=tdcIFrameData.tdcTopCollection);b.each(c.models,function(c,g,d){b.isUndefined(e)&&(c.attributes.tag===a?e=c:c.has("childCollection")&&(c=c.get("childCollection"),e=tdcIFrameData.getFirstModelByTag(a,c)))});if(!b.isUndefined(e))return e}},getFirstModelByZoneType:function(a){var c;b.each(tdcIFrameData.tdcTopCollection.models,function(e,d,f){b.isUndefined(c)&&(b.isUndefined(e.attributes.type_zone)||e.attributes.type_zone!==a||(c=e))});if(!b.isUndefined(c))return c},getZoneParent:function(a){b.isString(a)&&
(a=tdcIFrameData.getModel(a));var c=a.get("parentModel");return b.isUndefined(c)?a:tdcIFrameData.getZoneParent(c)},removeModel:function(a,c,e){(b.isUndefined(c)||!0===c)&&tdcIFrameData.deleteCallback(a);c=a.get("parentModel");b.isUndefined(e)&&(e={});b.isUndefined(c)?tdcIFrameData.tdcTopCollection.remove(a,e):c.get("childCollection").remove(a,e)},deleteCallback:function(a){var c=a.get("blockUid");a=a.get("childCollection");tdcAdminIFrameUI.getIframeWindow().tdcComposerBlocksApi.deleteItem(c);!b.isUndefined(a)&&
a.length&&b.each(a.models,function(a,c,b){tdcIFrameData.deleteCallback(a)})},_checkModelData:function(a,c){if(b.isUndefined(c.error)){var g=a.get("parentModel");if(0!==a.level||b.isUndefined(g))if(!b.isUndefined(g)&&parseInt(g.get("level"),10)>=parseInt(a.level,10))c.error="Elements does not respect the shortcode levels!";else if(!b.isUndefined(g)&&2<parseInt(a.level,10)-parseInt(g.get("level"),10)&&2!==parseInt(g.get("level"),10)&&4!==parseInt(a.level,10))c.error="Elements respect the shortcode levels, but the difference higher than 2 is not allowed here!";
else{!b.isUndefined(c.getShortcode)&&b.isUndefined(c.deepLevel)&&(c.deepLevel=0,c["tempShortcodeDeepLevel"+c.deepLevel]="");if(!b.isUndefined(c.getShortcode)&&a.has("templateContent")&&""!==a.get("templateContent"))c.template=tdcUtil.b64DecodeUnicode(a.get("templateContent"));else if(a.has("childCollection")){b.isUndefined(c.getShortcode)||(c.deepLevel++,c["tempShortcodeDeepLevel"+c.deepLevel]="");var d=a.get("childCollection");b.each(d.models,function(a,b,e){tdcIFrameData._checkModelData(d.get(a.cid),
c)});b.isUndefined(c.getShortcode)||c.deepLevel--}if(!b.isUndefined(c.getModelsWithFonts)){var f=!1,l=a.get("attrs");b.map(l,function(e,g){!f&&0<g.indexOf("_font_")&&(b.isUndefined(c.modelsWithFonts)&&(c.modelsWithFonts=[]),c.modelsWithFonts.push(a),f=!0)})}if(!b.isUndefined(c.getModelsWithColors)){var k=!1;l=a.get("attrs");b.map(l,function(e,g){!k&&0<g.indexOf("_color")&&(b.isUndefined(c.modelsWithColors)&&(c.modelsWithColors=[]),c.modelsWithColors.push(a),k=!0)})}if(!b.isUndefined(c.getShortcode)){g=
a.get("type");var m=a.get("tag");l=a.get("attrs");var p="";if("undefined"!==typeof c.images){var q=b.clone(l);b.map(l,function(a,e){b.map(window.tdcAdminSettings.mappedShortcodes[m].params,function(a,g){if(e===a.param_name)if("attach_image"===a.type)a=l[a.param_name],g=tdcJobManager._getUniqueID(),b.isUndefined(c.images.ids)?(c.images.ids={},c.images.ids[a]=g):b.isUndefined(c.images.ids[a])?c.images.ids[a]=g:g=c.images.ids[a],q[e]=g;else if("tdc_css"===a.param_name&&""!==l.tdc_css){var d=JSON.parse(window.atob(l.tdc_css));
b.map(d,function(a,e){b.map(d[e],function(a,g){if(0===a.trim().indexOf("url")){var h=tdcJobManager._getUniqueID();b.isUndefined(c.images.urls)?(c.images.urls={},c.images.urls[a]=h):b.isUndefined(c.images.urls[a])?c.images.urls[a]=h:h=c.images.urls[a];d[e][g]=h}})});q.tdc_css=window.btoa(JSON.stringify(d))}})});l=q}else"undefined"!==typeof c.newImages&&(q=b.clone(l),b.map(l,function(a,e){b.map(window.tdcAdminSettings.mappedShortcodes[m].params,function(a,g){if(e===a.param_name)if("attach_image"===
a.type){var d=l[a.param_name];a=c.newImages.find(function(a){return d===a.uid.substring(8)});"undefined"!==typeof a&&(q[e]=a.attachment_id)}else if("tdc_css"===a.param_name&&""!==l.tdc_css){var h=JSON.parse(window.atob(l.tdc_css));b.map(h,function(a,e){b.map(h[e],function(a,b){var g=c.newImages.find(function(c){return a===c.uid.substring(8)});"undefined"!==typeof g&&(h[e][b]='url("'+g.url+'")')})});q.tdc_css=window.btoa(JSON.stringify(h))}})}),l=q,a.set("attrs",l));if("td_block_text_with_title"===
m||"vc_column_text"===m||"vc_raw_html"===m||"tdc_woo_shortcodes"===m)if(b.map(l,function(a,c){"content"!==c&&(p+=" "+c+'="'+a+'"')}),b.has(l,"content"))if("vc_raw_html"===m||"tdc_woo_shortcodes"===m)p="["+m+p+"]"+b.unescape(l.content)+"[/"+m+"]";else try{var t=tdcUtil.b64DecodeUnicode(l.content);p="["+m+p+"]"+t+"[/"+m+"]"}catch(v){p="["+m+p+"]"+b.unescape(l.content)+"[/"+m+"]"}else p="["+m+p+"][/"+m+"]";else switch(b.map(l,function(a,c){p+=" "+c+'="'+a+'"'}),g){case "single":p="["+m+p+"]";break;case "closed":t=
"";b.isUndefined(c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)])||(t=c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)],c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)]=e);p="["+m+p+"]"+t+"[/"+m+"]";break;case "template":p="vc_column"===m||"vc_column_inner"===m?"["+m+p+"]"+c.template+"[/"+m+"]":c.template}c["tempShortcodeDeepLevel"+c.deepLevel]+=p;0===c.deepLevel&&(c.getShortcode+=p)}}else c.error="Not zones as the first elements!"}},checkCurrentData:function(a){tdcIFrameData._isInitialized&&
b.each(tdcIFrameData.tdcTopCollection.models,function(c,b,e){tdcIFrameData._checkModelData(tdcIFrameData.tdcTopCollection.get(c.cid),a)})},changeData:function(a){if(tdcIFrameData._isInitialized){tdcMain.setContentModified();var c=a.$refEl,g=c.prevAll().length;if(a.wasSidebarElementDragged)if(a.wasElementDragged){var d=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-inner-column",".tdc-column"]);b.isUndefined(d)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",
!0,!1);var f=tdcIFrameData._getDestinationCol(a.$refEl);d.has("childCollection")||d.set("childCollection",new tdcIFrameData.TdcCollection);var l=d.get("childCollection");var k={},m=c.data("start-values"),p;"undefined"!==typeof m&&(m=JSON.parse(tdcUtil.b64DecodeUnicode(m)),"undefined"!==typeof m&&(b.isArray(m)&&m.length?(k=m[0],1<m.length&&(p=m)):k=m));m=c.data("shortcodeName");k=new tdcIFrameData.TdcModel({content:"",attrs:k,tag:m,type:"single",level:4,parentModel:d});new tdcIFrameData.TdcLiveView({model:k,
el:c[0]});b.isUndefined(p)||k.set("presetValues",p);tdcElementUI.bindElement(c);tdcRecycle.takeSnapshot(k.get("tag")+" : sidebar element added");c.data("model_id",k.cid);l.add(k,{at:g});k.set("parentModel",d);k.getShortcodeRender(f,a.draggedBlockUid,!0)}else if(a.wasTempInnerRowDragged)tdcRecycle.takeSnapshot("Sidebar inner-row added"),d=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-column"]),b.isUndefined(d)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",
!0,!1),f=tdcIFrameData._getDestinationCol(a.$refEl),d.has("childCollection")||d.set("childCollection",new tdcIFrameData.TdcCollection),l=d.get("childCollection"),m=c.data("templateContent"),b.isUndefined(m)?(d=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row_inner",type:"closed",level:3,parentModel:d}),new tdcIFrameData.TdcLiveView({model:d,el:c[0]}),k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column_inner",type:"closed",level:4,parentModel:d}),c.data("model_id",d.cid),l.add(d,
{at:g}),c=new tdcIFrameData.TdcCollection,c.add(k),d.set("childCollection",c),c=new tdcIFrameData.TdcCollection,k.set("childCollection",c)):(d=new tdcIFrameData.TdcModel({templateContent:m,attrs:{},tag:"vc_row_inner",type:"template",level:3,parentModel:d}),new tdcIFrameData.TdcLiveView({model:d,el:c[0]}),c.data("model_id",d.cid),l.add(d,{at:g})),d.getShortcodeRender(f,a.draggedBlockUid,!0);else if(a.wasTempRowDragged){tdcRecycle.takeSnapshot("Sidebar row added");m=c.data("templateContent");d=tdcIFrameData._getDestinationModel(a.$refEl,
[".tdc-zone"]);b.isUndefined(d)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);d.has("childCollection")||d.set("childCollection",new tdcIFrameData.TdcCollection);l=d.get("childCollection");if(b.isUndefined(m)){var q=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:1,parentModel:d});new tdcIFrameData.TdcLiveView({model:q,el:c[0]});k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:2,parentModel:q});
c.data("model_id",q.cid);g=c.prevAll(".tdc-row").length;l.add(q,{at:g});l=new tdcIFrameData.TdcCollection;l.add(k);q.set("childCollection",l);g=new tdcIFrameData.TdcCollection;k.set("childCollection",g);a.wasElementWithRowDragged&&(l={},d={},m=c.data("start-values"),f=c.data("row-start-values"),"undefined"!==typeof f&&(d=JSON.parse(window.atob(f))),q.set({attrs:d}),"undefined"!==typeof m&&(l=JSON.parse(window.atob(m)),b.isArray(l)&&(l=l[0])),m=c.data("shortcodeName"),c=new tdcIFrameData.TdcModel({content:"",
attrs:l,tag:m,type:"single",level:3,parentModel:k}),g.add(c),k=new tdcIFrameData.TdcCollection,c.set("childCollection",k))}else q=new tdcIFrameData.TdcModel({templateContent:m,attrs:{},tag:"vc_row",type:"template",level:1,parentModel:d}),new tdcIFrameData.TdcLiveView({model:q,el:c[0]}),g=c.prevAll(".tdc-row").length,c.data("model_id",q.cid),b.isUndefined(d)||(l.add(q,{at:g}),d.set("childCollection",l),q.set("childCollection",new tdcIFrameData.TdcCollection));q.getShortcodeRender(1,a.draggedBlockUid,
!0)}else if(a.wasColumnDragged){if(tdcRecycle.takeSnapshot("Column copied"),m=c.data("templateContent"),!b.isUndefined(m)){c=c.data("model_id");if(b.isUndefined(c)){new tdcNotice.notice("changeData Error: Column model id is not in $refEl data!",!0,!1);return}k=tdcIFrameData.getModel(c);if(b.isUndefined(k)){new tdcNotice.notice("changeData Error: Column model not in structure data!",!0,!1);return}k.set("templateContent",m);k.set("type","template");f=tdcIFrameData._getDestinationCol(a.$refEl);k.getShortcodeRender(f,
a.draggedBlockUid,!0)}}else{if(a.wasInnerColumnDragged&&(tdcRecycle.takeSnapshot("Inner column copied"),m=c.data("templateContent"),!b.isUndefined(m))){c=c.data("model_id");if(b.isUndefined(c)){new tdcNotice.notice("changeData Error: Column model id is not in $refEl data!",!0,!1);return}k=tdcIFrameData.getModel(c);if(b.isUndefined(c)){new tdcNotice.notice("changeData Error: Column model not in structure data!",!0,!1);return}k.set("templateContent",m);k.set("type","template");c=tdcIFrameData._getDestinationCol(a.$refEl);
k.getShortcodeRender(c,a.draggedBlockUid,!0)}}else{k=c.data("model_id");if(b.isUndefined(k)){new tdcNotice.notice("changeData Error: Element model id is not in $refEl data!",!0,!1);return}k=tdcIFrameData.getModel(k);if(b.isUndefined(k)){new tdcNotice.notice("changeData Error: Element model not in structure data!",!0,!1);return}if(a.wasElementDragged){tdcDebug.log("case 1");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("element recycled");tdcIFrameData.removeModel(k);
tdcRecycle.takeSnapshot(k.get("tag")+" : element recycled");return}tdcRecycle.takeSnapshot(k.get("tag")+" : element moved");p=k.get("parentModel");d=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-inner-column",".tdc-column"]);b.isUndefined(d)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);p.cid===d.cid?(f=p.get("childCollection"),f.remove(k,{silent:!0}),f.add(k,{at:g})):(f=tdcIFrameData._getDestinationCol(a.$refEl),d.has("childCollection")||d.set("childCollection",
new tdcIFrameData.TdcCollection),l=d.get("childCollection"),tdcIFrameData.removeModel(k,!1,{silent:!0}),l.add(k,{at:g}),k.set("parentModel",d),a.sourceColParam!==f&&k.getShortcodeRender(f,a.draggedBlockUid,!0));tdcRecycle.takeSnapshot(k.get("tag")+" : element moved")}else if(a.wasInnerRowDragged){tdcDebug.log("case 2");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("inner row recycled");tdcIFrameData.removeModel(k);tdcRecycle.takeSnapshot("Inner row recycled");
return}tdcRecycle.takeSnapshot("Inner row moved");p=k.get("parentModel");d=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-column"]);b.isUndefined(d)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);if(p.cid===d.cid)f=p.get("childCollection"),f.remove(k,{silent:!0}),f.add(k,{at:g});else{d.has("childCollection")||d.set("childCollection",new tdcIFrameData.TdcCollection);l=d.get("childCollection");tdcIFrameData.removeModel(k,!0,{silent:!0});l.add(k,{at:g});
k.set("parentModel",d);a=p.get("attrs");g=d.get("attrs");if(b.has(a,"width"))switch(a.width){case "1/3":f="13";break;case "2/3":f="23"}if(b.has(g,"width"))switch(g.width){case "1/3":m="13";break;case "2/3":m="23"}b.isUndefined(f)&&(f="11");b.isUndefined(m)&&(m="11");if(f!==m&&(a=k.get("childCollection"),!b.isUndefined(a))){a=tdcIFrameData.getChildCollectionWidths(a);b.isUndefined(a)&&(a="11");g="11";l=1;switch(m){case "11":switch(a){case "11":g="11";break;case "23_13":g="23_13";break;case "13_23":g=
"13_23";break;case "12_12":g="13_13_13";break;case "13_13_13":g="13_13_13"}l=3;break;case "13":switch(a){case "11":g="11";break;case "23_13":g="11";break;case "13_23":g="11";break;case "12_12":g="11";break;case "13_13_13":g="11"}break;case "23":switch(a){case "11":g="12_12";break;case "23_13":g="12_12";break;case "13_23":g="12_12";break;case "12_12":g="12_12";break;case "13_13_13":g="12_12"}l=2}if(a!==g||f!==m)tdcIFrameData.changeInnerRowModel(k,a,g),k.getShortcodeRender(l,null,!0)}a=tdcOperationUI.inZone(c);
g=tdcOperationUI.inRow(c);l=tdcOperationUI.inColumn(c);c=tdcOperationUI.inInnerRow(c);b.isUndefined(a)||b.isUndefined(g)||b.isUndefined(l)||b.isUndefined(c)||tdcSidebar.setSettings({$currentZone:a,$currentRow:g,$currentColumn:l,$currentInnerRow:c},!0)}tdcRecycle.takeSnapshot(k.get("tag")+" : inner row moved")}else if(a.wasInnerColumnDragged||a.wasColumnDragged)tdcDebug.log("case 3"),p=k.get("parentModel"),f=p.get("childCollection"),f.remove(k,{silent:!0}),f.add(k,{at:g}),a.wasColumnDragged?(a=tdcOperationUI.inZone(c),
g=tdcOperationUI.inRow(c),b.isUndefined(g)||b.isUndefined(a)||tdcSidebar.setSettings({$currentZone:a,$currentRow:g}),tdcRecycle.takeSnapshot("Column moved")):a.wasInnerColumnDragged&&(a=tdcOperationUI.inZone(c),g=tdcOperationUI.inRow(c),l=tdcOperationUI.inColumn(c),c=tdcOperationUI.inInnerRow(c),b.isUndefined(a)||b.isUndefined(g)||b.isUndefined(l)||b.isUndefined(c)||tdcSidebar.setSettings({$currentZone:a,$currentRow:g,$currentColumn:l,$currentInnerRow:c}),tdcRecycle.takeSnapshot("Inner-column moved"));
else if(a.wasRowDragged){tdcDebug.log("case 4");p=k.get("parentModel");m=p.get("blockUid");f=p.get("childCollection");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){f.remove(k);tdcDebug.log("row recycled");tdcRecycle.takeSnapshot("Row recycled");f.length||(q=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:1,parentModel:p}),new tdcIFrameData.TdcLiveView({model:q,el:tdcIFrameData.iframeContents.find("#"+m+" .tdc_zone")[0]}),k=new tdcIFrameData.TdcModel({content:"",
attrs:{},tag:"vc_column",type:"closed",level:2,parentModel:q}),f.add(q,{at:0}),l=new tdcIFrameData.TdcCollection,l.add(k),q.set("childCollection",l),k.set("childCollection",new tdcIFrameData.TdcCollection),q.getShortcodeRender(1,a.draggedBlockUid,!0));return}g=c.prevAll(".tdc-row").length;a=c.closest(".tdc-zone").data("model_id");l=f;p.cid!==a&&(d=tdcIFrameData.getModel(a),l=d.get("childCollection"));f.remove(k,{silent:!0});l.add(k,{at:g});d.set("childCollection",l);k.set("parentModel",d);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(c)});
f.length||(q=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:1,parentModel:p}),new tdcIFrameData.TdcLiveView({model:q,el:tdcIFrameData.iframeContents.find("#"+m+" .tdc_zone")[0]}),k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:2,parentModel:q}),f.add(q,{at:0}),l=new tdcIFrameData.TdcCollection,l.add(k),q.set("childCollection",l),k.set("childCollection",new tdcIFrameData.TdcCollection),setTimeout(function(){q.getShortcodeRender(1,
e,!0)},200));p.set("childCollection",f);tdcRecycle.takeSnapshot("Row moved");tdcDebug.log("newPosition: "+g);tdcDebug.log(c)}}tdcDebug.log(tdcIFrameData.tdcTopCollection)}},_parseModelWidthAttrs:function(a){a=a.get("attrs");var c=3;if(b.has(a,"width"))switch(a.width){case "1/3":c=1;break;case "2/3":c=2;break;case "1/2":c=1}return c},getColumnNumber:function(a){var c=3,e=parseInt(a.get("level"),10),d=a.get("parentModel");b.isUndefined(d)||(4===e?(a=tdcIFrameData._parseModelWidthAttrs(d),c=3===a?tdcIFrameData.getColumnNumber(d):
a):(a=tdcIFrameData._parseModelWidthAttrs(a),c=3===a?tdcIFrameData.getColumnNumber(d):a));return c},_getDestinationModel:function(a,c){for(var e,d=0;d<c.length&&(e=a.closest(c[d]),!e.length);d++);e.length||new tdcNotice.notice("_getDestinationModel Error: Container destination not available!",!0,!1);a=e.data("model_id");b.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model id of the container destination not in data!",!0,!1);a=tdcIFrameData.getModel(a);b.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model not in structure data!",
!0,!1);return a},_getDestinationCol:function(a){var c=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");if(a.length&&(a=a.data("model_id"),b.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model id not in data!",!0,!1),a=tdcIFrameData.getModel(a),b.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(c.length)return c=c.data("model_id"),
b.isUndefined(c)&&new tdcNotice.notice("_getDestinationCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(c),b.isUndefined(c)&&new tdcNotice.notice("_getDestinationCol Error: Tne column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a);new tdcNotice.notice("_getDestinationCol Error: The destination container is not inside of .tdc-column !",!0,!1)},_getSourceCol:function(a){var c=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");if(a.length&&
(a=a.data("model_id"),b.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model id not in data!",!0,!1),a=tdcIFrameData.getModel(a),b.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(c.length)return c=c.data("model_id"),b.isUndefined(c)&&new tdcNotice.notice("_getSourceCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(c),b.isUndefined(c)&&
new tdcNotice.notice("_getSourceCol Error: Tne column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a)},getShortcodeFromData:function(a){a.getShortcode="";var c=tdcIFrameData.getFirstModelByZoneType("tdc_content");tdcIFrameData._checkModelData(c,a)},getHeaderShortcodeFromData:function(){var a={};"Newspaper"===window.tdcAdminSettings.themeName&&["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(c){var d={error:e,
getShortcode:""},h=tdcIFrameData.getFirstModelByZoneType(c);tdcIFrameData._checkModelData(h,d);b.isUndefined(d.error)?b.isUndefined(d.getShortcode)?delete a[c]:a[c]=d.getShortcode:new tdcNotice.notice(d.errors,!0,!1)});if(!b.isEmpty(a))return a.tdc_is_header_sticky=tdcState.isHeaderSticky(),a.tdc_is_mobile_header_sticky=tdcState.isMobileHeaderSticky(),a},getFooterShortcodeFromData:function(){var a={};if("Newspaper"===window.tdcAdminSettings.themeName){var c={error:e,getShortcode:""},d=tdcIFrameData.getFirstModelByZoneType("tdc_footer");
tdcIFrameData._checkModelData(d,c);if(!b.isUndefined(c.error)){new tdcNotice.notice(c.errors,!0,!1);return}b.isUndefined(c.getShortcode)||(a=c.getShortcode)}if(!b.isEmpty(a))return a},bindViewsModelsWrappers:function(a,c,e,d){if(b.isEmpty(a)&&(b.isUndefined(d)&&(d=0),!b.isUndefined(c))){var g=[];switch(d){case 0:var h=[];e.find(".tdc-zone").each(function(){var a=f(this);a.parents(".menu-item").length||h.push(a)});if(c.models.length!==h.length){a[b.keys(a).length]={collection:c,jqDOMElements:h,info:"Error at zones: "+
c.models.length+"(models) : "+h.length+"(dom)"};return}d++;b.each(h,function(c,b,e){b=f(c);e=b.data("type");e=tdcIFrameData.getFirstModelByZoneType(e);b.data("model_id",e.cid);e.set("blockUid",b.attr("id"));e.set("html",c.innerHTML);new tdcIFrameData.TdcLiveView({model:e,el:c});e.has("childCollection")&&tdcIFrameData.bindViewsModelsWrappers(a,e.get("childCollection"),b,d)});d--;return;case 1:e.find(".tdc-row").each(function(){var a=f(this);a.parents(".menu-item").length||g.push(a)});if(c.models.length!==
g.length){a[b.keys(a).length]={collection:c,jqDOMElements:g,info:"Error at rows: "+c.models.length+"(models) : "+g.length+"(dom)"};return}break;case 2:e.find(".tdc-columns:first").children(".tdc-column").each(function(){var a=f(this);a.parents(".menu-item").length||g.push(a)});if(c.models.length!==g.length){a[b.keys(a).length]={collection:c,jqDOMElements:g,info:"Errors at columns: "+c.models.length+"(models) : "+g.length+"(dom)",level:d};return}break;case 3:e.find(".tdc-elements:first").children(".tdc-element, .tdc-element-inner-row").each(function(){var a=
f(this);a.parents(".menu-item").length||g.push(a)});if(c.models.length!==g.length){a[b.keys(a).length]={collection:c,jqDOMElements:g,info:"Errors at columns elements: "+c.models.length+"(models) : "+g.length+"(dom)",level:d};return}break;case 4:e.find(".tdc-inner-columns:first").children(".tdc-inner-column").each(function(){var a=f(this);a.parents(".menu-item").length||g.push(a)});if(c.models.length!==g.length){a[b.keys(a).length]={collection:c,jqDOMElements:g,info:"Errors at inner columns: "+c.models.length+
"(models) : "+g.length+"(dom)",level:d};return}break;case 5:if(e.find(".tdc-elements:first").children(".tdc-element").each(function(){var a=f(this);a.parents(".menu-item").length||g.push(a)}),c.models.length!==g.length){a[b.keys(a).length]={collection:c,jqDOMElements:g,info:"Errors at elements: "+c.models.length+"(models) : "+g.length+"(dom)",level:d};return}}d++;b.each(g,function(e,g,h){g=c.models[g];h=f(e);h.data("model_id",g.cid);g.set("html",e.innerHTML,{silent:!0});if(5===g.get("level")){var n=
h.data("td-block-uid");if(b.isUndefined(n)){var l=h.find(".td_block_inner, .tdb-block-inner, .td-post-sharing");l.length&&(n=l.attr("id"))}}else 3===g.get("level")?(l=h.find(".tdc-inner-row"),l.length&&(n=l.attr("id"))):1===g.get("level")&&(n=h.attr("id"));g.set("blockUid",n);new tdcIFrameData.TdcLiveView({model:g,el:e});!h.hasClass("tdc-element")&&g.has("childCollection")&&0<b.size(g.get("childCollection"))&&tdcIFrameData.bindViewsModelsWrappers(a,g.get("childCollection"),h,d)});d--}},changeRowModel:function(a,
c,e){var d=a.get("childCollection");if("11"===c&&("23_13"===e||"13_23"===e||"13_13_13"===e)){e=e.split("_");var g=e[0].charAt(0)+"/"+e[0].charAt(1),f=d.at(0),k=f.get("attrs");b.isUndefined(k)?f.set("attrs",{width:g}):(k=b.clone(k),k.width=g,f.set("attrs",k));d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:e[1].charAt(0)+"/"+e[1].charAt(1)},type:"closed",level:1,parentModel:a}));3===e.length&&d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:e[2].charAt(0)+
"/"+e[2].charAt(1)},type:"closed",level:1,parentModel:a}));tdcIFrameData.changeColumnModel(f,c,e[0])}else if(("23_13"===c||"13_23"===c||"13_13_13"===c)&&"11"===e){c=c.split("_");f=d.at(0);k=f.get("attrs");var m=f.get("childCollection"),p=d.at(1),q=p.get("childCollection");b.isUndefined(k)||(k=b.clone(k),delete k.width,f.set("attrs",k));b.isUndefined(m)&&(m=new tdcIFrameData.TdcCollection,f.set("childCollection",m));!b.isUndefined(q)&&q.length&&b.each(q.models,function(a,c,b){a.set("parentModel",f);
m.add(a)});3===c.length&&(a=d.at(2),d=a.get("childCollection"),!b.isUndefined(d)&&d.length&&b.each(d.models,function(a,c,b){a.set("parentModel",f);m.add(a)}),tdcIFrameData.removeModel(a));tdcIFrameData.removeModel(p);tdcIFrameData.changeColumnModel(f,c[0],e)}else if(!("23_13"!==c&&"13_23"!==c&&"13_13_13"!==c||"23_13"!==e&&"13_23"!==e&&"13_13_13"!==e)){c=c.split("_");e=e.split("_");g=e[0].charAt(0)+"/"+e[0].charAt(1);var t=e[1].charAt(0)+"/"+e[1].charAt(1);f=d.at(0);k=f.get("attrs");p=d.at(1);var v=
p.get("attrs");q=p.get("childCollection");3===e.length?d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:e[2].charAt(0)+"/"+e[2].charAt(1)},type:"closed",level:1,parentModel:a})):3===c.length&&(a=d.at(2),d=a.get("childCollection"),!b.isUndefined(d)&&d.length&&(b.isUndefined(q)&&(q=new tdcIFrameData.TdcCollection,p.set("childCollection",q)),b.each(d.models,function(a,c,b){a.set("parentModel",p);q.add(a)})),tdcIFrameData.removeModel(a));k=b.clone(k);k.width=g;f.set("attrs",k);
c[0]!==e[0]&&tdcIFrameData.changeColumnModel(f,c[0],e[0]);g=b.clone(v);g.width=t;p.set("attrs",g);c[1]!==e[1]&&tdcIFrameData.changeColumnModel(p,c[1],e[1])}tdcDebug.log(tdcIFrameData.tdcTopCollection.models)},changeFluidStructureModel:function(a,c,e){var d=a.get("childCollection"),g=a.get("tag"),f="vc_column";c=c.split("_");var k=e.split("_");if("vc_row"===g||"vc_row_inner"===g){"vc_row_inner"===g&&(f="vc_column_inner");if(k.length>c.length)for(g=0;g<k.length;g++){e="";for(var m=0;m<k[g].length;m++)e+=
k[g].charAt(m)+"/";""!==e&&(e=e.substring(0,e.length-1));if(g<c.length){var p=d.at(g);m=p.get("attrs");var q=b.clone(m);q.width=e;p.set("attrs",q)}else d.add(new tdcIFrameData.TdcModel({content:"",tag:f,attrs:{width:e},type:"closed",level:1,parentModel:a}))}else for(g=0;g<c.length;g++)if(g<k.length){p=d.at(g);m=p.get("attrs");q=b.clone(m);e="";for(m=0;m<k[g].length;m++)e+=k[g].charAt(m)+"/";""!==e&&(e=e.substring(0,e.length-1));q.width=e;p.set("attrs",q);var t=p}else{p=d.at(k.length);a=p.get("childCollection");
var v=t.get("childCollection");b.isUndefined(v)&&(v=new tdcIFrameData.TdcCollection,t.set("childCollection",v));b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",t);v.add(a)});tdcIFrameData.removeModel(p)}tdcDebug.log(tdcIFrameData.tdcTopCollection.models)}},changeColumnModel:function(a,c,e){if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(e))){var d=a.get("childCollection");if(!b.isUndefined(d)&&d.length){var g=a.get("attrs");!b.isUndefined(g)&&b.has(g,"width");b.each(d.models,
function(d,g,h){if("vc_row_inner"===d.get("tag")&&(d=d.get("childCollection"),!b.isUndefined(d)&&d.length)){var f="";b.each(d.models,function(a,c,e){a=a.get("attrs");!b.isUndefined(a)&&b.isObject(a)&&b.has(a,"width")&&(f=c===e.length-1?f+a.width:f+(a.width+"_"))});f=f.replace(/\//g,"");"12_12"!==f&&"23_13"!==f&&"13_23"!==f&&"13_13_13"!==f&&(f="");if("11"===c)if("23"===e)if("23_13"===f){var n=d.at(0),l=d.at(1);h=n.get("attrs");g=l.get("attrs");h=b.clone(h);g=b.clone(g);h.width="1/2";g.width="1/2";
n.set("attrs",h);l.set("attrs",g)}else if("13_23"===f)n=d.at(0),l=d.at(1),h=n.get("attrs"),g=l.get("attrs"),h=b.clone(h),g=b.clone(g),h.width="1/2",g.width="1/2",n.set("attrs",h),l.set("attrs",g);else if("13_13_13"===f){n=d.at(0);l=d.at(1);d=d.at(2);h=n.get("attrs");g=l.get("attrs");var k=d.get("attrs");h=b.clone(h);g=b.clone(g);b.clone(k);h.width="1/2";g.width="1/2";n.set("attrs",h);l.set("attrs",g);g=d.get("childCollection");if(!b.isUndefined(g)&&g.length){var m=l.get("childCollection");b.isUndefined(m)&&
(m=new tdcIFrameData.TdcCollection,l.set("childCollection",m));b.each(g.models,function(a,c,b){m.add(a);a.set("parentModel",l)})}tdcIFrameData.removeModel(d)}else{if(d.models.length){n=d.at(0);h=n.get("attrs");h=b.clone(h);var r=n.get("childCollection");delete h.width;n.set("attrs",h);b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,n.set("childCollection",r));var w=0;for(b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",
n);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}}else{if("13"===e&&d.models.length)for(n=d.at(0),h=n.get("attrs"),h=b.clone(h),r=n.get("childCollection"),delete h.width,n.set("attrs",h),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,n.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",n);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else if("23"===
c)if("11"===e)if("12_12"===f)n=d.at(0),l=d.at(1),h=n.get("attrs"),g=l.get("attrs"),h=b.clone(h),g=b.clone(g),h.width="1/3",g.width="1/3",n.set("attrs",h),l.set("attrs",g),g=new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:3,parentModel:a}),d.add(g);else{if(d.models.length)for(n=d.at(0),h=n.get("attrs"),h=b.clone(h),r=n.get("childCollection"),delete h.width,n.set("attrs",h),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,n.set("childCollection",
r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a){a.set("parentModel",n);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else{if("13"===e&&d.models.length)for(n=d.at(0),h=n.get("attrs"),h=b.clone(h),r=n.get("childCollection"),delete h.width,n.set("attrs",h),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,n.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||
b.each(a.models,function(a,c,b){a.set("parentModel",n);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else if("13"===c)if("11"===e)if(""===f||"12_12"!==f&&"23_13"!==f&&"13_23"!==f&&"13_13_13"!==f){if(d.models.length)for(n=d.at(0),h=n.get("attrs"),h=b.clone(h),r=n.get("childCollection"),delete h.width,n.set("attrs",h),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,n.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||
b.each(a.models,function(a,c,b){a.set("parentModel",n);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else"12_12"===f&&d.models.length&&(n=d.at(0),l=d.at(1),h=n.get("attrs"),g=l.get("attrs"),h.width="1/3",g.width="1/3",n.set("attrs",h),l.set("attrs",g),d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:1,parentModel:a})));else if("23"===e&&(""===f||"12_12"!==f)&&d.models.length)for(n=d.at(0),h=n.get("attrs"),h=b.clone(h),r=n.get("childCollection"),
delete h.width,n.set("attrs",h),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,n.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",n);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}})}}},changeInnerRowModel:function(a,c,e){if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(e))){var d=a.get("childCollection");if("11"!==c||"12_12"!==e&&"23_13"!==e&&"13_23"!==
e&&"13_13_13"!==e)if("12_12"!==c&&"23_13"!==c&&"13_23"!==c||"11"!==e&&"12_12"!==e&&"23_13"!==e&&"13_23"!==e&&"13_13_13"!==e)"13_13_13"!==c||"11"!==e&&"12_12"!==e&&"23_13"!==e&&"13_23"!==e?tdcIFrameData.changeFluidStructureModel(a,c,e):("11"===e?(q=d.at(0),t=q.get("attrs"),g=q.get("childCollection"),k=d.at(1),f=k.get("childCollection"),a=d.at(2),d=a.get("childCollection"),b.isUndefined(t)||(t=b.clone(t),delete t.width,q.set("attrs",t)),b.isUndefined(g)&&(g=new tdcIFrameData.TdcCollection,q.set("childCollection",
g)),!b.isUndefined(f)&&f.length&&b.each(f.models,function(a,c,b){a.set("parentModel",q);g.add(a)}),!b.isUndefined(d)&&d.length&&b.each(d.models,function(a,c,b){a.set("parentModel",q);g.add(a)}),tdcIFrameData.removeModel(k)):(m=e.split("_"),p=m[0].charAt(0)+"/"+m[0].charAt(1),c=m[1].charAt(0)+"/"+m[1].charAt(1),q=d.at(0),t=q.get("attrs"),k=d.at(1),e=k.get("attrs"),f=k.get("childCollection"),a=d.at(2),d=a.get("childCollection"),t=b.clone(t),t.width=p,q.set("attrs",t),e=b.clone(e),e.width=c,k.set("attrs",
e),b.isUndefined(f)&&(f=new tdcIFrameData.TdcCollection,k.set("childCollection",f)),!b.isUndefined(d)&&d.length&&b.each(d.models,function(a,c,b){a.set("parentModel",k);f.add(a)})),tdcIFrameData.removeModel(a));else if("11"===e){q=d.at(0);t=q.get("attrs");var g=q.get("childCollection");k=d.at(1);var f=k.get("childCollection");b.isUndefined(t)||(t=b.clone(t),delete t.width,q.set("attrs",t));b.isUndefined(g)&&(g=new tdcIFrameData.TdcCollection,q.set("childCollection",g));!b.isUndefined(f)&&f.length&&
b.each(f.models,function(a,c,b){a.set("parentModel",q);g.add(a)});tdcIFrameData.removeModel(k)}else m=e.split("_"),p=m[0].charAt(0)+"/"+m[0].charAt(1),c=m[1].charAt(0)+"/"+m[1].charAt(1),q=d.at(0),t=q.get("attrs"),k=d.at(1),e=k.get("attrs"),t=b.clone(t),t.width=p,q.set("attrs",t),e=b.clone(e),e.width=c,k.set("attrs",e),3===m.length&&d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:m[2].charAt(0)+"/"+m[2].charAt(1)},type:"closed",level:3,parentModel:a}));else{var k=new tdcIFrameData.TdcModel({content:"",
tag:"vc_column_inner",type:"closed",level:3,parentModel:a}),m=e.split("_"),p=m[0].charAt(0)+"/"+m[0].charAt(1);c=m[1].charAt(0)+"/"+m[1].charAt(1);var q=d.at(0),t=q.get("attrs");b.isUndefined(t)?q.set("attrs",{width:p}):(t=b.clone(t),t.width=p,q.set("attrs",t));k.set("attrs",{width:c});d.add(k);3===m.length&&d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:m[2].charAt(0)+"/"+m[2].charAt(1)},type:"closed",level:3,parentModel:a}))}}},getChildCollectionWidths:function(a){if(!b.isUndefined(a)){var c;
b.map(a.models,function(a,e){a=a.get("attrs");b.has(a,"width")&&(c=b.isUndefined(c)?a.width.replace("/",""):c+("_"+a.width.replace("/","")))});return c}}}})(jQuery,Backbone,_);var tdcAdminIFrameUI;
(function(f,d,b,e){tdcAdminIFrameUI={_liveIframeWindowObject:e,_$liveIframe:e,getIframeWindow:function(){b.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(a){tdcAdminIFrameUI.getIframeWindow().eval(a)},
initContent:function(a){if(!a.find(".td-main-content-wrap .tdc-row").length){var c="",b="";"header"===window.tdcPostSettings.tdbTemplateType&&(c=" style=\"height: 1500px; background-color: #f9f9f9; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQBAMAAABykSv/AAAAFVBMVEUAAAAtKiYtKiYtKiYtKiYtKiYtKiazrNZrAAAAB3RSTlMAGwQIEQwV0M30jwAABqdJREFUeNrsncuS0zAQRYON2fMIa/PIrA0FrEPisHZ4rSHk/7+BKFMVGUl2R5LHlsM5C9VM102oPKqYvu6+XrzeLE58U8eqPB1FdTqyr+r3H+p4ey42qthSLrRSF13Kj1rZuP4hrfxwUeYuZd6rVNI/6vmO6sef6lF3a6VSxUWtjk/qAU8uRUt5UMXaLBrK5kGVx1JVf79Qhafq56e/Tsf+2el49FIX15dikHItKuOLzfmzb73Plfoq6Te/NoqG8i5cWQ77nOUCAAAmo1LHa3Xk6shKdZaOYqaVb+KUWb8yM55TViq+vFD6p6rye3063qn/MZ+0io1VlJVLD2Vgcd8qnl/j56leyL5bufRUVvqr9f7ykeXG55jrYkuZXhEAAKbhzebSV34495XN6ci36vf7Ynk6Hq9V8azcXYpKaRc7lYUufr9XGkWttB4uKJ3mw7tLU59L5oOolIuvApSZbD7opn5eRcwHAIDpsD2BeRbb5sNnj55dMApkpVxcCMoxzIcXXuZDYb1kSWkUq4Xu3+fkM2A+AAAkxJtzt7izzQfbUji4lLYnoJS6WPW7BwenpeBb7DEfpMmH8NGFeJsC8wEAAAzGm3x4WKXu+wSl2SG2zYfltebDY5dSthSSMR+GLVrugay0zQf7T5SU3APMBwCAWbIyzYf1xXyoDfPBZVMUW8c8Qy5YCkMXPdYunie8dvG4bT7U2rpRqmLrKprKplN58FTa77OtdH/KrF0AAAQxb/Mh6zQfMj/zYRFmPoQtUwjK+GLhYT6MtnahlYU4+aCV1UKRinuA+QAAMEtW5pBD02k+uNt/P+XOU/k/mQ968sERsHB9cauLZYDy8K/yzleJ+QAAMCVG59XjHkQpcz9l5q28rmefPPNhL60wVGmFV6y7Rjj28giHQv4aqGJQOkR8jkSO+QAAkDgr3VcKkw/FVrh6rpUb59VzP+XOqUw182GMtQvbPUhVydoFAMCE2GMGk+9iZIIyaynJfHiIzIc8JvNBmw9kPgAAQDDx19n/XHOdvelUHnTRXOUQrrN7mA9JZT7E3+1Cd/rDKctOZWO++cL9R5h8AACYEt0hSkZBlDIXlGbf56+U1y7kMYDZmA8hxSWZD5gPAAAzo2U+fLhmdH/XnUVQutIAetIh/AInDze/diFlPtgDKsNlPpShmQ81mQ8AAKkRYim88VAGxEjGBU7KlgKZD8OlQ5D5AAAAAjHmg327Cvcuhqk0mmI5cNLd6srpEGQ+TJT5ICt18Q7zAQAgCfryGeY0MJ9Qz95cua0gZz58TivzwVbGZz5k5eDpELKSzAcAgDmgW11xnkFUDnqdfedSHnX/O9e1i1eh5kN8PkP9sJkPDZkPAABJMNDahRzrJyhjipPmNO4DchoLp3KGgZPdL0R/N4b/arlDQph8AAC4LYRWd6yi3OoeOlvd+mbNB2cE6PdqaDto+AhQzAcAgImIW6bwU2YDKyMCJ0dY0Ai6SUS6axfeIxzxQzWyUvC1mHwAAJg5cuZDTKtrK8l8EM2HrZWYEb8Is7l6EWbjuQiD+QAAkBr/zdpFk15UQsfaxY2EV4wRJ5INECeS9SkBAGASdKtbz7/VvR3zYSQ7KD4CFPMBACBFxr7oPIfMh3Xk2kVs5sON3LYjbKMnvfEbAACYBDnzoUop8+FeSebDkEXplqbmw/uVWwInAQCmxe77pKw/v3X7/PYnH4bLfBg7cHIpKSP2R7oHEszimMrsKiXmAwBAEty3useQeMNUlMfbMh9WQuaDEQEaY/KQ+QAA8Le9M1ZBGIai6BD7A6K7i3tB3aWCc8Ff8P+/QQoSJYm9jZH6Gs4ZOjwudOnSm9z7aqRg0YBQFsbtM5RVLYmw0/mQMRSdDyJMESqdUKpPK1PJzQcAAJMUn7OXLHaMLQWx2PGeXOyYEbtY249d7C9q+amKt+QHYY50PgAA1IOV0gZDsYvZOh/Ofrh5i11MfulqiZ0Pop9BKAs7H9JKOh8AAEyiYhfHdvI5e5s+Z89XdpnKSjofVv7mg//TH4+3uFDZT2ly+Kzs6XwAAKgAM+6BIfMhbxhbClrZ+GF8rHDdWu182JnqfHB0PgAA1M0pefdgWUMRu2iWGLsILAWXNB+EpaDMhw7zAQCgQp7/70tabDFj58PmJ4WT83Y+bG0VTtL5AAAAmA/FnQ/OhPngfYbIfIjDFLFS9zNopTYfiF0AANhlWjR+hoBGaeeD2cLJEWXdnQ/98DwMj/3wcO0wbMOhV95ew9248vCFsgk+mOjtaSUAAPyLB4YdjhTNmj87AAAAAElFTkSuQmCC')\" ",
b="tdc-header-custom-class");a.find(".tdc-content-wrap").prepend('<div id="td_uid_start_zone_content_wrap" class="tdc-zone '+b+'" '+c+'><div class="tdc_zone"><div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div></div></div>')}},init:function(){window.addWrappers=function(a,c,b){a=a.find(c);a.find(".tdc-zone").length||a.find(".tdc-row").wrapAll('<div class="tdc-zone" data-type="tdc_content"></div>');
a.find(".tdc-zone").data("type",b);a.find(".tdc-row").each(function(a,c){f(c).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});a.find(".tdc-column").each(function(a,c){a=f(c);a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.each(function(a,c){a=f(c);a.closest(".tdb_single_content").length&&!a.hasClass("tdb_single_content")?console.log(a):a.addClass("tdc-element")})});a.find(".tdc-inner-row").each(function(a,
c){f(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){a=f(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=f(c).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){a=f(c);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,c){a=
f(c).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=f(c).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,c){a="";c=f(c);c.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":c.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');
tdcElementUI.bindEmptyElement(a);c.append(a)})};window.addZoneWrappers=function(a){a.find(".tdc-row").each(function(a,b){f(b).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});a.find(".tdc-column").each(function(a,b){a=f(b);a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,
c){a=f(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=f(c).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,b){a=f(b).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);b.append(a)})};window.addRowWrappers=function(a){a.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');
a.find(".tdc-column").each(function(a,b){a=f(b);a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){a=f(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=f(c).find(".wpb_wrapper"),c.length&&
c.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,b){a=f(b).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,
b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);b.append(a)})};window.addColumnWrappers=function(a){a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element");
a.find(".tdc-inner-row").each(function(a,c){f(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){a=f(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=f(c).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){a=f(c);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});
c=a.find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=a.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,c){a="";c=f(c);c.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":c.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');
tdcElementUI.bindEmptyElement(a);c.append(a)})};window.addInnerRowWrappers=function(a){var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element");a.find(".tdc-inner-row").each(function(a,c){f(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){a=f(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=f(c).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});
a.find(".tdc-elements:empty").each(function(a,c){a="";c=f(c);c.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":c.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);c.append(a)})};window.addInnerColumnWrappers=function(a){var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element");c=a.find(".tdc-element");
c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=a.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,c){a="";c=f(c);c.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":c.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);
c.append(a)})};window.addLoopWrappers=function(a){a.find(".td-main-content").wrap('<div class="tdc-loop-content"></div>')};window.addSidebarWrappers=function(a){a.find(".td-main-sidebar").wrap('<div class="tdc-sidebar-content"></div>')};window.checkTdBlockWrap=function(a){a.each(function(a,b){a=f(b);0===parseInt(a.height())?a.addClass("tdc-block-empty"):a.removeClass("tdc-block-empty")})};tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},loadIframe:function(){(tdDetect.isIe8||tdDetect.isIe9||
tdDetect.isIe10)&&tdConfirm.showModalOk("Browser Information","TagDiv Composer does not work with Internet Explorer 8, 9, 10",function(){tb_remove()});var a=f(this).contents();"header"===window.tdcPostSettings.tdbTemplateType&&a.find(".tdc-content-wrap").html("");tdcAdminIFrameUI.initContent(a);tdcAdminIFrameUI._liveIframeWindowObject=f(this).get(0).contentWindow;var c=f('<div id="tdc-recycle" class="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');a.find("body").prepend(c);
tdcAdminWrapperUI.$recycle=c;tdcIFrameData._postOriginalContentJSON=e;window.addWrappers(a,".td-main-content-wrap","tdc_content");window.addWrappers(a,".td-header-desktop-wrap","tdc_header_desktop");window.addWrappers(a,".td-header-desktop-sticky-wrap","tdc_header_desktop_sticky");window.addWrappers(a,".td-header-mobile-wrap","tdc_header_mobile");window.addWrappers(a,".td-header-mobile-sticky-wrap","tdc_header_mobile_sticky");window.addWrappers(a,".td-footer-wrap","tdc_footer");tdcIFrameData.init(a,
!0);tdcOperationUI.init(a,!0);a.on("click","a",function(a){a.preventDefault();"undefined"!==this.href&&window.open(this.href,"_blank")});a[0].addEventListener("mousedown",function(a){1!==a.which&&a.stopPropagation()},!0);a[0].addEventListener("mousemove",function(c){a.lastMouseEvent=c},!0);a.on("click",function(a){tdcContextMenu.hide()});a.on("scroll",function(a){tdcContextMenu.hide()});a.bind("contextmenu",function(a){if(!a.ctrlKey){a.preventDefault();var c=a.pageX,b=a.pageY,e=0,d=f("#tdc-context-menu"),
g=d.width();d=d.height();tdcMain.getSidebarInline()&&(e=tdcSidebar.$_sidebar.width());c+g+e>tdcWindowFrame.$_window.width()&&(c=tdcWindowFrame.$_window.width()-g-e);b+d>tdcAdminIFrameUI.getIframeWindow().scrollY+tdcWindowFrame.$_window.height()&&(b=tdcAdminIFrameUI.getIframeWindow().scrollY+tdcWindowFrame.$_window.height()-d);e=tdcAdminIFrameUI.getLiveIframe();e=(e.parent().width()-e.width())/2;f(a.target).trigger(f.Event("contextmousedown",{pageX:c+e,pageY:b}))}})},checkIframe:function(a){if(b.isUndefined(a)){a=
window.tdcPostSettings.postUrl;var c="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&(c+="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId);!1!==window.tdcPostSettings.tdbTemplateType&&(c+="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);a=0>a.indexOf("?")?a+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c):a+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c);a=f('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+a+'" scrolling="auto" style="width: 100%; height: 100%" class="tdc-responsive-all"></iframe>').on("load",
tdcAdminIFrameUI.loadIframe);f("#tdc-live-iframe-wrapper").append(a)}else{var d=a;c=d.contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=d.get(0).contentWindow;d=f('<div id="tdc-recycle" class="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');tdcDebug.log(tdcIFrameData.tdcTopCollection.models);c.find("body").prepend(d);tdcAdminWrapperUI.$recycle=d;tdcIFrameData._postOriginalContentJSON=e;window.addWrappers(c,".td-main-content-wrap","tdc_content");
window.addWrappers(c,".td-header-desktop-wrap","tdc_header_desktop");window.addWrappers(c,".td-header-desktop-sticky-wrap","tdc_header_desktop_sticky");window.addWrappers(c,".td-header-mobile-wrap","tdc_header_mobile");window.addWrappers(c,".td-header-mobile-sticky-wrap","tdc_header_mobile_sticky");window.addWrappers(c,".td-footer-wrap","tdc_footer");tdcIFrameData.init(c,!0);tdcOperationUI.init(c,!0);c.find("a").each(function(a,c){c.setAttribute("target","_blank")});a.removeClass("tdc-live-iframe");
a.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=a}}})(jQuery,Backbone,_);var tdcMain={};
(function(){tdcMain={_contentModified:!1,_sidebarInline:!1,_sidebarHidden:!1,_recycleShown:!1,init:function(){tdcAdminIFrameUI.init()},getContentModified:function(){return tdcMain._contentModified},setContentModified:function(){tdcMain._contentModified=!0},resetContentModified:function(){tdcMain._contentModified=!1},setSidebarInline:function(){tdcMain._sidebarInline=!0},getSidebarInline:function(){return tdcMain._sidebarInline},resetSidebarInline:function(){tdcMain._sidebarInline=!1},setSidebarHidden:function(){tdcMain._sidebarHidden=
!0},getSidebarHidden:function(){return tdcMain._sidebarHidden},resetSidebarHidden:function(){tdcMain._sidebarHidden=!1},setRecycleShown:function(){tdcMain._recycleShown=(tdcOperationUI.isRowDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isElementDragged())&&!tdcOperationUI.isSidebarElementDragged()},getRecycleShown:function(){return tdcMain._recycleShown},resetRecycleShown:function(){tdcMain._recycleShown=!1}};tdcMain.init()})();var tdcSidebarPanel={};
(function(f){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:f,$_paramNameSwitch:f,_hook:{_hooks:[],addAction:function(d,b){_.isUndefined(tdcSidebarPanel._hook._hooks[d])&&(tdcSidebarPanel._hook._hooks[d]=[]);tdcSidebarPanel._hook._hooks[d].push(b)},doAction:function(d,b){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[d]))for(var e=0;e<tdcSidebarPanel._hook._hooks[d].length;e++)tdcSidebarPanel._hook._hooks[d][e](b)},removeAction:function(d){_.isUndefined(tdcSidebarPanel._hook._hooks[d])||
delete tdcSidebarPanel._hook._hooks[d]},hasCallback:function(d,b){return _.isUndefined(tdcSidebarPanel._hook._hooks[d])?!1:0<=tdcSidebarPanel._hook._hooks[d].indexOf(b)}},init:function(){var d=jQuery("body");d.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{var e=jQuery(this);b=e.val();var a=tdcIFrameData.getModel(e.data("model_id"));e=e.data("param_name");
if("tdb_mobile_menu"===a.get("tag")&&"menu_id"===e){var c=tdcState.getHeaderTemplateId();"no_header"!==c&&(""===c&&(c=window.tdcAdminSettings.headerTemplateId),""!==c&&(c=c.toString().replace("tdb_template_",""),tdcSavePost.saveMobileMenu(c,b)))}tdcSidebarController.onUpdate(a,e,this.oldValue,b);this.oldValue=b;"block_template_id"!==e&&0!==e.indexOf("tds_")||setTimeout(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),
$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});d.on("change focus",".tdc-tab-no-design .tdc-property-dropdown-responsive select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),c=b.data("param_name"),d=b.attr("name"),h=b.closest(".tdc-property-responsive");e="all"===tdcSidebar.currentViewportSettings.name&&
e===b.find("option:first").val()?tdcSidebarPanel.deleteResponsiveValue(d,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateDropdownResponsiveValues(d,e,tdcSidebar.currentViewportSettings.name);h.removeClass("tdc-css-inherited");h.find(".tdc-inherit-select").hide();"all"!==tdcSidebar.currentViewportSettings.name&&(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),h=b.closest(".tdc-property-responsive"),"undefined"===typeof d?(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),
"all"),"undefined"!==typeof d&&(b.val(""),h.addClass("tdc-css-inherited"),h.find(".tdc-inherit-select").show())):(b.val(d),h.removeClass("tdc-css-inherited"),h.find(".tdc-inherit-select").show()),h.find(".tdc-inherit-select").show());tdcSidebarController.onUpdate(a,c,this.oldValue,e)}});d.on("change focus",".tdc-tab-no-design .tdc-property-dropdown-responsive input[type=radio]",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),
c=b.data("param_name"),d=b.attr("name"),h=b.closest(".tdc-property-responsive");e="all"===tdcSidebar.currentViewportSettings.name&&e===b.find("input:first").val()?tdcSidebarPanel.deleteResponsiveValue(d,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateDropdownResponsiveValues(d,e,tdcSidebar.currentViewportSettings.name);h.removeClass("tdc-css-inherited");h.find(".tdc-inherit-select").hide();"all"!==tdcSidebar.currentViewportSettings.name&&(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),
tdcSidebar.currentViewportSettings.name),"undefined"===typeof d?(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all"),"undefined"!==typeof d&&(b.prop("checked",!1),h.find("input[type=radio]:first").prop("checked",!0),h.addClass("tdc-css-inherited"),h.find(".tdc-inherit-select").show())):(h.find("input[type=radio]").prop("checked",!1),h.find('input[type=radio][value="'+d+'"]').prop("checked",!0),h.removeClass("tdc-css-inherited"),h.find(".tdc-inherit-select").show()),h.find(".tdc-inherit-select").show());
tdcSidebarController.onUpdate(a,c,this.oldValue,e)}});d.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield input",function(b){if("focusin"===b.type||this.oldValue===this.value)this.oldValue=this.value;else{var e=jQuery(this).val(),a=tdcIFrameData.getModel(jQuery(this).data("model_id"));"cut"===b.type&&(e="");tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,_.escape(e));this.oldValue=e}});d.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield-responsive input",
function(b){if("focusin"===b.type||this.oldValue===this.value)this.oldValue=this.value;else{var e=jQuery(this),a=e.val(),c=tdcIFrameData.getModel(e.data("model_id"));"cut"===b.type&&(a="");if(this.oldValue!==a){var d=e.attr("name");b=e.closest(".tdc-property-responsive");d=tdcSidebarPanel.updateTextfieldResponsiveValues(d,a,tdcSidebar.currentViewportSettings.name);var h="";_.isUndefined(e.data("placeholder"))||(h=e.data("placeholder"));e.attr("placeholder",h);b.removeClass("tdc-css-inherited");""===
a&&"all"!==tdcSidebar.currentViewportSettings.name&&(a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),tdcSidebar.currentViewportSettings.name),"undefined"===typeof a?(a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all"),"undefined"!==typeof a&&(e.val(""),e.attr("placeholder",a),b.addClass("tdc-css-inherited"),b.find(".tdc-inherit-select").show())):(e.val(a),b.removeClass("tdc-css-inherited"),b.find(".tdc-inherit-select").show()),b.find(".tdc-inherit-select").show());a=d;tdcSidebarController.onUpdate(c,
jQuery(this).data("param_name"),this.oldValue,_.escape(a));"all"===tdcSidebar.currentViewportSettings.name&&(this.oldValue=e.val())}}});d.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range input",function(b){var e=jQuery(this),a=this;if("range"===e.attr("type"))e.next('input[type="text"]').val(e.val());else if("text"===e.attr("type")){a=e.val().trim();var c=e.data("default_value");""!==a||_.isUndefined(c)||""===c||(a=c,e.val(a));e.prev('input[type="range"]').val(a);e=e.prev('input[type="range"]');
a=e.get(0)}e=a;"focusin"===b.type?e.oldValue=e.value:(a=jQuery(e).val(),c=tdcIFrameData.getModel(jQuery(e).data("model_id")),"cut"===b.type&&(a=""),tdcSidebarController.onUpdate(c,jQuery(e).data("param_name"),e.oldValue,_.escape(a)),e.oldValue=a)});d.on("keyup change input",".tdc-tab-no-design .tdc-property-range-responsive input",function(b){b=jQuery(this);var e=this,a=b.closest(".tdc-property-responsive");a.removeClass("tdc-css-inherited");if("range"===b.attr("type")){var c=b.val();b.next('input[type="text"]').val(c);
b.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(b.attr("name"),c,tdcSidebar.currentViewportSettings.name))}else if("text"===b.attr("type")){c=b.val().trim();e=b.prev('input[type="range"]');var d=b.data("default_value");if("all"===tdcSidebar.currentViewportSettings.name)""!==c||_.isUndefined(d)||""===d||(c=d,b.val(c));else if(""===c){var h=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all");"undefined"===typeof h?_.isUndefined(d)||""===d||(c=d,b.val(c)):(b.val(""),
b.attr("placeholder",h))}e.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(e.attr("name"),c,tdcSidebar.currentViewportSettings.name));"undefined"===typeof h?e.val(c):(e.val(h),a.addClass("tdc-css-inherited"));e=b.prev('input[type="range"]').get(0)}h=e;a=jQuery(h);b=a.data("data-to-save");a=tdcIFrameData.getModel(a.data("model_id"));h.oldValue!==b&&(tdcSidebarController.onUpdate(a,jQuery(h).data("param_name"),h.oldValue,_.escape(b)),h.oldValue=b)});d.on("keyup focus change input",
".tdc-tab-no-design .tdc-property-range_multiple input",function(b){var e=jQuery(this),a=this;if("range"===e.attr("type")){var c=e.closest(".tdc-property").find('input[type="radio"]:checked');e.closest(".tdc-property").find('input[type="text"]').val(e.val());c.data("last_value",e.val())}else if("text"===e.attr("type")){a=e.closest(".tdc-property").find('input[type="range"]');c=e.closest(".tdc-property").find('input[type="radio"]:checked');var d=c.data("default_value"),h=e.val().trim();""!==h||_.isUndefined(d)||
""===d||(h=d,e.val(h));a.val(h);c.data("last_value",h);a=a.get(0)}else if("radio"===e.attr("type")){a=e.closest(".tdc-property").find('input[type="range"]');c=e.closest(".tdc-property").find('input[type="text"]');e.closest(".tdc-property").find('input[type="radio"]:checked');h=e.data("last_value");d=e.data("default_value");var f=e.data("unit");e=a.data("min_"+f);var l=a.data("max_"+f);f=a.data("step_"+f);a.get(0).min=e;a.get(0).max=l;a.get(0).step=f;""===h?(c.val(d),a.val(d)):(c.val(h),a.val(h));
a=a.get(0)}d="";c=jQuery(a).parent().find('input[type="radio"]:checked');c.length&&(d=jQuery(c[0]).data("unit_value"));"focusin"===b.type?a.oldValue=a.value+d:(b=a.value+d,d=tdcIFrameData.getModel(jQuery(a).data("model_id")),tdcSidebarController.onUpdate(d,jQuery(a).data("param_name"),a.oldValue,_.escape(b)),a.oldValue=b)});d.on("keyup change input",".tdc-tab-no-design .tdc-property-range_multiple-responsive input",function(b){var e=jQuery(this),a=e.closest(".tdc-property-responsive"),c=a.find('input[type="range"]'),
d=a.find('input[type="radio"]:checked'),h=a.find('input[type="text"]'),f=c.get(0),l="",k=d.data("default_value"),m=tdcIFrameData.getModel(c.data("model_id")),p=c.data("param_name"),q=window.tdcAdminSettings.mappedShortcodes[m.attributes.tag],t=m="";var v=[];for(var u=0;u<q.params.length;u++)if(p===q.params[u].param_name){u=q.params[u].tdc_values;for(var r in u)u.hasOwnProperty(r)&&(v.push(u[r].unit),""===m||""===t)&&(m=u[r].value,t=u[r].unit);break}d.length&&(l=d.data("unit_value"));if("range"===
e.attr("type"))v=c.val(),h.val(v),d.data("last_value",v),h.val(v),c.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+l,tdcSidebar.currentViewportSettings.name)),a.removeClass("tdc-css-inherited");else if("text"===e.attr("type")){if("input"===b.type||"change"===b.type)return;a.removeClass("tdc-css-inherited");v=h.val().trim();if("all"===tdcSidebar.currentViewportSettings.name)""!==v||_.isUndefined(k)||""===k?(c.val(v),d.data("last_value",v),c.data("data-to-save",
tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+l,tdcSidebar.currentViewportSettings.name))):(c.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+p,tdcSidebar.currentViewportSettings.name)),c.data("range_value",m),c.data("range_unit",t),c.val(m),l=a.find('input[type="radio"][data-unit_value="'+t+'"]'),q=l.data("unit"),r=c.data("min_"+q),d=c.data("max_"+q),q=c.data("step_"+q),l.prop("checked",!0),f.min=r,f.max=d,f.step=q,f.value=m,l.data("last_value",m),h.val(m));
else if(""===v)if(l=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),"undefined"===typeof l)c.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+p,tdcSidebar.currentViewportSettings.name)),c.data("range_value",m),c.data("range_unit",t),c.val(m),l=a.find('input[type="radio"][data-unit_value="'+t+'"]'),q=l.data("unit"),r=c.data("min_"+q),d=c.data("max_"+q),q=c.data("step_"+q),l.prop("checked",!0),f.min=r,f.max=d,f.step=q,f.value=m,l.data("last_value",m),h.val(m),a.addClass("tdc-css-inherited");
else for(u=0;u<q.params.length;u++){if(p===q.params[u].param_name){v=[];h=[];u=q.params[u].tdc_values;for(r in u)u.hasOwnProperty(r)&&v.push(u[r].unit);for(u=0;u<v.length&&!(h=l.split(v[u]),1<h.length);u++);h.length&&(m=h[0],t=v[u],c.data("range_value",m),c.data("range_unit",t),l=a.find('input[type="radio"][data-unit_value="'+t+'"]'),q=l.data("unit"),r=c.data("min_"+q),d=c.data("max_"+q),q=c.data("step_"+q),l.prop("checked",!0),f.min=r,f.max=d,f.step=q,f.value=m,l.data("last_value",m),a.find('input[type="text"]').val(m));
c.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+p,tdcSidebar.currentViewportSettings.name));a.addClass("tdc-css-inherited");break}}else c.val(v),d.data("last_value",v),c.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+l,tdcSidebar.currentViewportSettings.name))}else if("radio"===e.attr("type")){if("input"===b.type)return;p=d.data("last_value");q=d.data("unit");r=c.data("min_"+q);d=c.data("max_"+q);q=c.data("step_"+q);f.min=r;f.max=d;f.step=
q;""===p?(h.val(k),c.val(k),v=k):(h.val(p),c.val(p),v=p);c.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+l,tdcSidebar.currentViewportSettings.name));a.removeClass("tdc-css-inherited")}l="";a=jQuery(f).parent().find('input[type="radio"]:checked');a.length&&(l=jQuery(a[0]).data("unit_value"));"focusin"===b.type?f.oldValue=f.value+l:(a=jQuery(f),b=a.data("data-to-save"),m=tdcIFrameData.getModel(a.data("model_id")),f.oldValue!==b&&(tdcSidebarController.onUpdate(m,
jQuery(f).data("param_name"),f.oldValue,_.escape(b)),f.oldValue=b))});d.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val();b.is(":checked")||(e="");var a=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(a,b.data("param_name"),this.oldValue,e);this.oldValue=e}});d.on("focus change",".tdc-tab-no-design .tdc-property-checkbox-responsive input",function(b){if("focusin"===
b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),c=b.data("param_name");b.is(":checked")||(e="");var d=b.attr("name"),h=b.closest(".tdc-property-responsive");e="all"===tdcSidebar.currentViewportSettings.name&&""===e?tdcSidebarPanel.deleteResponsiveValue(d,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateCheckboxResponsiveValues(d,e,tdcSidebar.currentViewportSettings.name);h.removeClass("tdc-css-inherited");h.find(".tdc-inherit-checkbox").hide();
"all"!==tdcSidebar.currentViewportSettings.name&&(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),h=b.closest(".tdc-property-responsive"),"undefined"===typeof d?(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all"),"undefined"!==typeof d&&(h.addClass("tdc-css-inherited"),h.find(".tdc-inherit-checkbox").show())):(h.removeClass("tdc-css-inherited"),h.find(".tdc-inherit-checkbox").show()),h.find(".tdc-inherit-checkbox").show());tdcSidebarController.onUpdate(a,
c,this.oldValue,e);this.oldValue=e}});d.on("click",".tdc-tab-no-design .tdc-image-wrap",tdcSidebarPanel.tdcImageWrapHandler);d.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);d.on("click",".tdc-tab-no-design .tdc-icon-wrap",tdcSidebarPanel.tdcIconWrapHandler);d.on("click",".tdc-tab-no-design .tdc-icon-remove",tdcSidebarPanel.tdcIconRemoveHandler);d.on("click",".tdc-tab-no-design .tdc-inherit-select",tdcSidebarPanel.tdcInheritSelectHandler);d.on("click",".tdc-tab-no-design .tdc-inherit-checkbox",
tdcSidebarPanel.tdcInheritCheckboxHandler);d.on("click",".tdc-icon-selector-content > span",function(b){b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());b.find(".selected").removeClass("selected");var e=jQuery(this),a=e.data("font_class"),c=tdcIFrameData.getModel(b.data("model_id"));e.addClass("selected");var d=b.prev(".tdc-property-wrap");d.find(".tdc-icon-wrap").html(e.html());d.find(".tdc-icon-remove").removeClass("tdc-hidden-button");tdcSidebarController.onUpdate(c,
b.data("param_name"),"",a)});d.on("change","#tdc-icon-selector .tdc-icon-selector-lib",function(){var b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());var e=jQuery(this).val(),a=b.find(".tdc-icon-selector-filter");b.find(".tdc-icon-selector-content").children(".tdc-font-separator").each(function(){var c=jQuery(this),b=c.data("font_id");""===e||e===b?(c.show(),c.nextAll("span").each(function(){var c=jQuery(this),b=c.data("font_class"),e=a.val().trim();""!==e&&-1===b.indexOf(e)?
c.hide():c.show()})):(c.hide(),c.nextAll("span").hide())})});d.on("click",".tdc-tab-no-design .tdc-gradient-wrap",function(b){b=jQuery("#tdc-gradient");b.length||(b=tdcSidebar.buildGradient());var e=jQuery(this),a=e.closest(".tdc-property-wrap");e=e.next("input").val();b.toggle();a.after(b);a.next().find(".wp-picker-container").find("input.wp-color-picker").tdGradientColorPicker("open_gradient",e)});d.on("click",".tdc-colorpicker-wrap",function(b){tdcSidebarPanel.showHideTdcPalette.call(this,b)});
d.on("click",".tdc-property-editor_css .tdc-property-title",function(b){tdcSidebarPanel.showHideTdcCssEditor.call(this,b)});d.on("change focus",".tdc-tab-no-design .tdc-property-woo_search_version select",function(b){b=jQuery(this).val();var e=jQuery(".tdc-woos-dropdown"),a=jQuery(".tdc-woos-regular");""===b?(e.show(),a.hide()):"regular"===b&&(e.hide(),a.show())});d.on("click",".tdc-property-flex_layout label",function(b){b=jQuery(this);var e=jQuery(".tdc-property-flex_horiz_align"),a=jQuery(".tdc-property-flex_vert_align"),
c=jQuery(".tdc-property-flex_layout_reverse");"Row"===b.attr("title")?(e.hasClass("tdc-flex-row-align-rev")||e.addClass("tdc-flex-row-align-rev"),a.hasClass("tdc-flex-row-align-rev")||a.addClass("tdc-flex-row-align-rev"),c.find("input").is(":checked")&&(e.hasClass("tdc-flex-row-rev-align-rev")||e.addClass("tdc-flex-row-rev-align-rev"))):(e.hasClass("tdc-flex-row-align-rev")&&e.removeClass("tdc-flex-row-align-rev"),a.hasClass("tdc-flex-row-align-rev")&&a.removeClass("tdc-flex-row-align-rev"),e.hasClass("tdc-flex-row-rev-align-rev")&&
e.removeClass("tdc-flex-row-rev-align-rev"))});d.on("change",".tdc-property-flex_layout_reverse input",function(b){b=jQuery(this);var e=jQuery(".tdc-property-flex_layout .tdc-property-input-radio:checked"),a=jQuery(".tdc-property-flex_horiz_align");"column"===e.val()&&(b.is(":checked")?a.hasClass("tdc-flex-row-rev-align-rev")||a.addClass("tdc-flex-row-rev-align-rev"):a.hasClass("tdc-flex-row-rev-align-rev")&&a.removeClass("tdc-flex-row-rev-align-rev"))});d.on("mousedown",function(b){var e=jQuery("#tdc-sidebar"),
a=jQuery("#tdc-icon-selector"),c=jQuery("#tdc-gradient"),d=jQuery("#tdc-palette"),h=jQuery("#tdc-font-list"),f=jQuery(".tdc-preset-values-list");a.length?a.get(0).contains(b.target)||(a.hide(),e.after(a)):a=tdcSidebar.buildIconSelector();c.length?c.get(0).contains(b.target)||(a=jQuery(b.target),a.hasClass("tdc-gradient-wrap")||(c.hide(),e.after(c))):c=tdcSidebar.buildGradient();d.length?d.get(0).contains(b.target)||(a=jQuery(b.target),a.hasClass("tdc-colorpicker-wrap")||(d.hide(),e.after(d),d.find("input.wp-color-picker").tdPaletteColorPicker("save_color"))):
d=tdcSidebar.buildPalette();h.length&&!h.get(0).contains(b.target)&&(h.hide(),e.after(h));!f.length||f.get(0).contains(b.target)||jQuery(".tdc-preset-values").get(0).contains(b.target)?f.is(":visible")&&jQuery(".tdc-preset-values").get(0).contains(b.target)&&setTimeout(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),
$currentElement:tdcSidebar.getCurrentElement()},!0)},100):f.is(":visible")&&(f.hide(),e=jQuery(b.target),jQuery(".tdc-top-buttons").get(0).contains(b.target)||e.hasClass("tdc-top-buttons")||jQuery(".tdc-sidebar-bottom").get(0).contains(b.target)||e.hasClass("tdc-sidebar-bottom")||jQuery(".tdc-current-element-head").get(0).contains(b.target)||e.hasClass("tdc-current-element-head")?jQuery(".tdc-current-element-head").get(0).contains(b.target)||e.hasClass("tdc-current-element-head")?(tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),
$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0),jQuery(".tdc-current-element-head").trigger(b)):tdcSidebarPanel.clearPanel():setTimeout(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),
$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},100))});d.on("keyup focus paste cut change","input.tdc-icon-selector-filter",function(b){b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());var e=this.value.trim();b.find(".tdc-icon-selector-content").find(".tdc-font-separator:visible").each(function(){jQuery(this).nextAll("span").each(function(){var a=jQuery(this);-1===a.data("font_class").indexOf(e)?a.hide():a.show()})})});
d.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var e=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(e,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});d.on("change",".tdc-tab-no-design .tdc-property-gradient input",function(b){b=jQuery(this).val();var e=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(e,
jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b});d.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);var e=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var a=e.val(),c=tdcSidebar.getCurrentRow().data("model_id");c=tdcIFrameData.getModel(c);var b=c.get("childCollection");this.oldValue="11";_.isUndefined(b)||
(b=tdcIFrameData.getChildCollectionWidths(b),_.isUndefined(b)||(this.oldValue=b));"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(c,this.oldValue,a),c.getShortcodeRender(1,null,!0)):this.oldValue!==a&&(tdcIFrameData.changeFluidStructureModel(c,this.oldValue,
a),c.getShortcodeRender(1,null,!0));this.oldValue=a},300)});d.on("change",".tdc-tab-no-design .tdc-property-dropdown.tdc-add-class input.tdc-property-input-radio",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val(),a=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(a,b.data("param_name"),this.oldValue,e);this.oldValue=e}});d.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(b){if("focusin"===
b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var e=tdcSidebar._$currentInnerRow.data("model_id");e=tdcIFrameData.getModel(e);tdcIFrameData.changeInnerRowModel(e,this.oldValue,b);e.getShortcodeRender(tdcIFrameData.getColumnNumber(e),null,!0);this.oldValue=b}});d.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);
var e=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=setTimeout(function(){var a=e.val(),c=tdcSidebar._$currentInnerRow.data("model_id");c=tdcIFrameData.getModel(c);var b=c.get("childCollection");this.oldValue="11";_.isUndefined(b)||(b=tdcIFrameData.getChildCollectionWidths(b),_.isUndefined(b)||(this.oldValue=b));tdcIFrameData.changeInnerRowModel(c,this.oldValue,a);c.getShortcodeRender(tdcIFrameData.getColumnNumber(c),null,!0);this.oldValue=a},300)});d.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",
function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var e=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(e,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});d.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(b){b.preventDefault();var e=jQuery(this);b=jQuery("#tdc-wpeditor");var a=b.children(".content"),c=e.data("mapped_parameter_name");e=e.data("model_id");var d=tdcIFrameData.getModel(e).get("parentModel").get("attrs"),
h="tdc-three-column";if(_.has(d,"width"))switch(d.width){case "1/3":h="tdc-one-column";break;case "2/3":h="tdc-two-column"}a.addClass("tdc-dropped-wpeditor");a.html('<iframe id="tdc-iframe-wpeditor" class="'+h+'" src="'+window.tdcAdminSettings.pluginUrl+"/includes/wpeditor.php?wp_path="+window.tdcAdminSettings.ABSPATH+'" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+e+'" data-mapped_parameter_name="'+c+'"></iframe>');b.show();tdcWindowFrame.setWindowFrame(b)});d.on("click","#tdc-wpeditor .tdc-iframe-close-button",
function(b){b.preventDefault();jQuery("#tdc-wpeditor").hide()});d.on("click","#tdc-zone .tdc-iframe-close-button",function(b){b.preventDefault();jQuery("#tdc-zone").hide()});d.on("click",".tdc-sidebar-shortcode-row",function(b){b=jQuery(b.currentTarget).data("model_id");b=tdcIFrameData.getModel(b);var e={error:f,getShortcode:""};_.isUndefined(b)||tdcIFrameData._checkModelData(b,e);_.isUndefined(e.getShortcode)||console.log(e.getShortcode)});d.on("click",".tdc-sidebar-current-styles-settings",function(b){b=
tdcSidebarPanel.getCurrentStyleSettings(b);if(!_.isUndefined(b)){var e="",a;for(a in b)e+='"'+a+'" => "'+b[a]+'",\n';console.log(e)}});d.on("click",".tdc-sidebar-font-reset",function(b){tdConfirm.modal({caption:"Clear Font Settings",htmlInfoContent:"This will clear all values for this font group settings.",textYes:"Yes",objectContext:this,callbackYes:function(){tb_remove();var b=jQuery(this),a=b.data("model_id"),c=tdcIFrameData.getModel(a),d=c.get("attrs");d=_.clone(d);for(var h="font-family font-size font-line-height font-style font-weight font-transform font-spacing".split(" "),
f="",l=0;l<h.length;l++){var k=b.closest(".tdc-font-manager-wrap").nextAll(".tdc-"+h[l]+":first");if(k.length){var m=k.find('[data-model_id="'+a+'"]');m.length&&(m.val(""),m.data("responsive",""),k.removeClass("tdc-css-inherited"),f=k.find(".tdc-inherit"),f.length&&f.hide(),f=m.data("placeholder"),"undefined"!==typeof f&&m.attr("placeholder",f),f=m.data("param_name"),delete d[f],m=m.attr("name"),tdcSidebarPanel.deleteResponsiveValues(m))}}c.set("attrs",d);tdcSidebarController.onUpdate(c,f,"","")}})});
d.on("click",".tdc-sidebar-font-save",function(b){b=jQuery(this);var e=b.data("model_id");e=tdcIFrameData.getModel(e).get("attrs");var a=b.data("param_name").replace("font_settings",""),c="font_family font_size font_line_height font_style font_weight font_transform font_spacing".split(" "),d={};_.each(e,function(b,e,g){if(0===e.indexOf(a))for(g=0;g<c.length;g++)if(0<e.indexOf(c[g])){d[c[g]]=b;break}});_.isEmpty(d)||tdConfirm.modal({caption:"Saving Font Settings",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},
100);return'<label>Font Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var a=jQuery("#TB_ajaxContent"),c=a.find(".info");a=a.find("input").val().trim();if(""===a)c.html("Please enter a font name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings.fonts&&(window.tdcAdminSettings.tdcSavings.fonts=
[]);-1===_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,{name:a})?(c.html("Saving..."),window.tdcAdminSettings.tdcSavings.fonts.push({name:a,value:window.btoa(JSON.stringify(d))}),tdcUtil.updateTdcSavings(window,function(){jQuery("#TB_ajaxContent").find(".info").html("Font has been saved!");setTimeout(function(){tb_remove()},500)})):c.html("Font name already exists! Choose another one")}}})});d.on("click",".tdc-sidebar-font-load",function(){var b=jQuery(this),e=b.closest(".tdc-property-wrap"),
a=b.data("model_id"),c=b.data("param_name");if(""!==window.tdcAdminSettings.tdcSavings&&("undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts||"undefined"!==typeof window.tdcAdminSettings.tdcSavings.recentFonts)){var d=jQuery("#tdc-font-list");d.length||(d=tdcSidebar.buildFontList(a,c));d.html("");"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts&&(jQuery('<div class="tdc-font-list-header"><span>Saved fonts</span></div>').appendTo(d),_.map(window.tdcAdminSettings.tdcSavings.fonts,
function(b){jQuery('<div class="tdc-font-settings" data-value="'+b.value+'" data-model_id="'+a+'" data-param_name="'+c+'"><span class="tdc-font-name">'+b.name+'</span><span class="tdc-font-delete"></span></div>').appendTo(d)}));if("undefined"!==typeof window.tdcAdminSettings.tdcSavings.recentFonts){jQuery('<div class="tdc-font-list-header"><span>Recent fonts</span></div>').appendTo(d);b=_.invert(window.tdcAdminSettings.mappedFontFamily);for(var h=window.tdcAdminSettings.tdcSavings.recentFonts.length;0<
h;h--){var f=window.tdcAdminSettings.tdcSavings.recentFonts[h],l=b[f];_.isUndefined(l)||jQuery('<div class="tdc-recent-font-settings" data-value="'+f+'" data-model_id="'+a+'" data-param_name="'+c+'"><span class="tdc-font-name">'+l+'</span><span class="tdc-recent-font-delete"></span></div>').appendTo(d)}}e.after(d);d.toggle()}});d.on("click",".tdc-font-delete",function(b){b.stopImmediatePropagation();var e=jQuery(this).closest(".tdc-font-settings");b=e.data("name");b=_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,
{name:b});window.tdcAdminSettings.tdcSavings.fonts.splice(b,1);tdcUtil.updateTdcSavings(this,function(){e.remove()})});d.on("click",".tdc-recent-font-delete",function(b){b.stopImmediatePropagation();var e=jQuery(this).closest(".tdc-recent-font-settings");b=e.data("name");b=_.findIndex(window.tdcAdminSettings.tdcSavings.recentFonts,{name:b});window.tdcAdminSettings.tdcSavings.recentFonts.splice(b,1);tdcUtil.updateTdcSavings(this,function(){e.remove()})});d.on("click",".tdc-font-settings",function(){var b=
jQuery(this),e=b.data("value");e=JSON.parse(window.atob(e));var a=b.data("model_id");a=tdcIFrameData.getModel(a);var c=a.get("attrs"),d=b.data("param_name").replace("font_settings",""),h="font_family font_size font_line_height font_style font_weight font_transform font_spacing".split(" ");_.each(e,function(a,b,e){-1!==_.indexOf(h,b)&&(c[d+b]=a)});a.set({attrs:c,rebindToPanel:!0});tdcSidebarController.onUpdate(a)});d.on("click",".tdc-recent-font-settings",function(){var b=jQuery(this),e=b.data("value"),
a=b.data("model_id");a=tdcIFrameData.getModel(a);var c=a.get("attrs");b=b.data("param_name").replace("font_settings","");c[b+"font_family"]=e;a.set({attrs:c,rebindToPanel:!0});tdcSidebarController.onUpdate(a)});tdcSidebarPanel.$_paramNameSwitch=d.find(".tdc-param-name-switch");if(0<tdcSidebarPanel.$_paramNameSwitch.length)d.on("click",".tdc-param-name-switch",function(){jQuery(this).toggleClass("tdc-param-name-switch-active");jQuery(".tdc-param-name").toggleClass("tdc-param-name-active")})},getCurrentStyleSettings:function(d,
b){_.isUndefined(b)&&(b=jQuery(d.currentTarget).data("model_id"),b=tdcIFrameData.getModel(b),d={error:f},_.isUndefined(b)||tdcIFrameData._checkModelData(b,d));var e=b.get("tag");b=b.get("attrs");b=_.clone(b);if(!_.isUndefined(b)){var a={};d={};for(var c in b)0===c.indexOf("tds_")&&(a[c]=b[c]);c=window.tdcAdminSettings.mappedShortcodes[e].params;for(e=0;e<c.length;e++){var g=!1,h=c[e];if(0===h.param_name.indexOf("tds_")){for(var n in a)if(h.param_name===n){d[n]=a[n];g=!0;break}g||(d[h.param_name]=
"")}}for(n in a)switch(a=n.split("-"),a.length){case 2:if(!_.has(d,n)){c=a[0];a=!1;for(var l in d)if(c===d[l]&&1===l.split("-").length){a=!0;break}if(!a){var k;for(k in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[k],c)){var m=k;break}_.has(d,m)&&""===d[m]&&window.tdcAdminSettings.globalStyle[m]===c&&(a=!0)}a||delete b[n]}break;case 3:c=a[0];e=a[2];for(k in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[k],c)){m=k;break}a=
!1;for(l in d)if(c===d[l]&&l===m+"-"+e){a=!0;break}a||_.has(d,m+"-"+e)&&""===d[m+"-"+e]&&window.tdcAdminSettings.globalStyle[m]===c&&(a=!0);a||delete b[n]}return b}},getCurrentListAtts:function(d,b,e){_.isUndefined(b)&&(d=jQuery(d.currentTarget).data("model_id"),b=tdcIFrameData.getModel(d),d={error:f},_.isUndefined(b)||tdcIFrameData._checkModelData(b,d));d=b.get("tag");b=b.get("attrs");var a=_.clone(b);if(!_.isUndefined(a)){var c={};b={};for(var g in a)0===g.indexOf("tds_")&&(c[g]=a[g]);g=window.tdcAdminSettings.mappedShortcodes[d].params;
for(var h=0;h<g.length;h++){var n=!1,l=g[h];if(0===l.param_name.indexOf("tds_")){for(var k in c)if(l.param_name===k){b[k]=c[k];n=!0;break}n||(b[l.param_name]="")}}for(k in c)switch(c=k.split("-"),c.length){case 2:if(!_.has(b,k)){g=c[0];c=!1;for(var m in b)if(g===b[m]&&1===m.split("-").length){c=!0;break}if(!c){var p;for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],g)){var q=p;break}_.has(b,q)&&""===b[q]&&window.tdcAdminSettings.globalStyle[q]===g&&(c=
!0)}c||delete a[k]}break;case 3:g=c[0];n=c[2];for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],g)){q=p;break}c=!1;for(m in b)if(g===b[m]&&m===q+"-"+n){c=!0;break}c||_.has(b,q+"-"+n)&&""===b[q+"-"+n]&&window.tdcAdminSettings.globalStyle[q]===g&&(c=!0);c||delete a[k]}var t=[],v;for(v in window.tdcAdminSettings.listStyles[e])if(v===d){for(h=0;h<window.tdcAdminSettings.listStyles[e][v].length;h++)k=window.tdcAdminSettings.listStyles[e][v][h],_.isArray(k)?
_.map(k,function(c){_.isUndefined(a[c])||(_.isUndefined(t[h])&&(t[h]=[]),t[h].push(a[c]))}):_.isUndefined(a[k])||(_.isArray(a[k])&&a[k].length?t[h]=a[k][0]:t[h]=a[k]);break}return t}},showHideTdcCssEditor:function(d){d=jQuery("#tdc-editor-css");var b=jQuery(this).closest(".tdc-property-wrap"),e=b.find("textarea:first");d.length||tdcSidebar.buildEditorCss();tdcSidebar.$editorTextarea=e;b.next("#tdc-editor-css").length?d.toggle():(b.after(d),d.show(),tdcSidebar.editorCss.getSession().setValue(e.val()))},
showHideTdcPalette:function(d){d=jQuery("#tdc-palette");var b=jQuery(this).closest(".tdc-property-wrap");d.length||tdcSidebar.buildPalette();b.next("#tdc-palette").length?(d.toggle(),tdcSidebarPanel.saveTdcPalette()):(tdcSidebarPanel.saveTdcPalette(),b.after(d),d.show(),tdcSidebarPanel.openTdcPalette())},saveTdcPalette:function(){var d=jQuery("#tdc-palette"),b=d.prev(".tdc-property-wrap");d.length||tdcSidebar.buildPalette();b.length&&(b=b.find("input").val(),d=d.find("input.wp-color-picker"),d.tdPaletteColorPicker("open_palette",
b),d.tdPaletteColorPicker("save_color"))},openTdcPalette:function(){var d=jQuery("#tdc-palette"),b=d.prev(".tdc-property-wrap");d.length||tdcSidebar.buildPalette();b.length&&(b=b.find("input").val(),d.find("input.wp-color-picker").tdPaletteColorPicker("open_palette",b))},tdcIconWrapHandler:function(d){var b=jQuery(this),e=jQuery("#tdc-icon-selector");e.length||(e=tdcSidebar.buildIconSelector());var a=b.closest(".tdc-property-wrap");d=e.find(".tdc-icon-selector-filter");var c=e.find(".tdc-icon-selector-lib"),
g=e.find(".tdc-icon-selector-content");c.val("");d.val("");g.children().each(function(){jQuery(this).show()});e.data("model_id",b.data("model_id"));e.data("param_name",b.data("param_name"));e.show();a.after(e);b=e.data("param_name");e=tdcIFrameData.getModel(e.data("model_id")).get("attrs");var h="";_.has(e,b)&&(h=e[b].trim());d.focus();g.find("span").each(function(){var a=jQuery(this),b=a.data("font_class");if(h===b){for(a.addClass("selected");!a.prev(".tdc-font-separator").length;)a=a.prev();a=a.prev(".tdc-font-separator").data("font_id");
c.val(a);c.trigger("change")}else a.removeClass("selected")})},tdcIconRemoveHandler:function(d){var b=jQuery(d.currentTarget);d=b.closest(".tdc-property-wrap").find(".tdc-icon-wrap");b.addClass("tdc-hidden-button");d.addClass("tdc-no-icon-selected");d.html("");b=d.data("model_id");b=tdcIFrameData.getModel(b);tdcSidebarController.onUpdate(b,d.data("param_name"),"","")},tdcImageWrapHandler:function(d){var b=jQuery(d.currentTarget);b.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;
wp.media.editor.open(b);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(e){if(-1!==e.indexOf("[caption")){var a=/\[caption(.*)\](.*)\[\/caption\]/g.exec(e);3===a.length&&(e=a[2])}var c=jQuery("img",e).attr("src"),d=a="",h="";"undefined"===typeof c?(e=jQuery(e),c=e.attr("src"),a=e.attr("class"),d=e.attr("height"),
h=e.attr("width")):(e=jQuery("img",e),a=e.attr("class"),d=e.attr("height"),h=e.attr("width"));jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:a,action:"tdc_ajax_get_image_id"}}).done(function(a,e,g){"success"===e&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(b.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),
b.attr("style","background-image: url( '"+c+"') "),b.data("image_link",c),b.data("image_id",a.image_id),b.data("image_height",d),b.data("image_width",h),b.removeClass("tdc-no-image-selected"),window.send_to_editor=window.original_send_to_editor,window.tb_remove(),e="",g=b.data("model_id"),g=tdcIFrameData.getModel(g),b.hasClass("tdc-no-image-selected")||(e=a.image_id.toString()),a=g.get("attrs"),a.media_size_image_height=d,a.media_size_image_width=h,g.set("attrs",a),tdcSidebarController.onUpdate(g,
b.data("param_name"),"",e)))}).fail(function(a,c,b){})};return!1},tdcImageRemoveHandler:function(d){var b=jQuery(d.currentTarget);d=b.closest(".tdc-property-wrap").find(".tdc-image-wrap");b.addClass("tdc-hidden-button");d.addClass("tdc-no-image-selected");jQuery.removeData(d,"image_link");d.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");b=d.data("model_id");b=tdcIFrameData.getModel(b);tdcSidebarController.onUpdate(b,d.data("param_name"),
"","")},tdcInheritSelectHandler:function(d){d=jQuery(d.currentTarget);var b=d.closest(".tdc-property-wrap"),e=b.find("[data-responsive]"),a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all");b.hasClass("tdc-property-dropdown-responsive")&&(b.hasClass("tdc-visual-selector")?(e=b.find("[data-responsive]:checked:first"),e.length&&e.prop("checked",!1),"undefined"===typeof a?(b.removeClass("tdc-css-inherited"),e=b.find("[data-responsive]:first")):(b.addClass("tdc-css-inherited"),e=b.find('[data-responsive][value="'+
a+'"]')),e.length&&e.prop("checked",!0)):"undefined"===typeof a?(b.removeClass("tdc-css-inherited"),e.find("option:selected").removeAttr("selected").find("option:first").attr("selected","selected")):(b.addClass("tdc-css-inherited"),e.val(a)),b=tdcSidebarPanel.deleteResponsiveValue(e.attr("name"),tdcSidebar.currentViewportSettings.name),a=tdcIFrameData.getModel(e.data("model_id")),e=e.data("param_name"),tdcSidebarController.onUpdate(a,e,"",b));d.hide()},tdcInheritCheckboxHandler:function(d){d=jQuery(d.currentTarget);
var b=d.closest(".tdc-property-wrap"),e=b.find("[data-responsive]"),a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all");b.hasClass("tdc-property-checkbox-responsive")&&("undefined"===typeof a?(b.removeClass("tdc-css-inherited"),e.removeAttr("checked")):(""===a?e.removeAttr("checked"):e.attr("checked","checked"),b.addClass("tdc-css-inherited")),b=tdcSidebarPanel.deleteResponsiveValue(e.attr("name"),tdcSidebar.currentViewportSettings.name),a=tdcIFrameData.getModel(e.data("model_id")),
e=e.data("param_name"),tdcSidebarController.onUpdate(a,e,"",b));d.hide()},bindPanelToModel:function(d,b){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==d.cid||!_.isUndefined(b)&&(_.isUndefined(b)||!0===b)){b=window.tdcAdminSettings.mappedShortcodes[d.attributes.tag];tdcSidebarPanel._deletePanel();jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=d;for(var e=[],a=0;a<b.params.length;a++){var c=tdcSidebarPanel._defaultGroupName;_.isEmpty(b.params[a].group)||
(c=b.params[a].group);e.push(c)}e=_.uniq(e);var g=c="",h=tdcSidebar.getCurrentTabId(),f,l;c+='<div class="tdc-sidebar-header"><div class="tdc-tabs">';var k=l=f="";for(a=0;a<e.length;a++){g=tdcSidebarPanel._fixGroupName(e[a]);var m=tdcUtil.makeSafeForCSS(g);0===a?(f='<a href="#" data-tab-id="td-tab-'+m+'" class="tdc-tab-active" title="'+g+' settings">'+g+'<span class="tdc-tab-search-notice"></span></a>',l='<a href="#" data-tab-id="td-tab-'+m+'" title="'+g+' settings">'+g+'<span class="tdc-tab-search-notice"></span></a>'):
_.isUndefined(h)||h!=="td-tab-"+m?k+='<a href="#" data-tab-id="td-tab-'+m+'" title="'+g+' settings">'+g+'<span class="tdc-tab-search-notice"></span></a>':(f=l,k+='<a href="#" data-tab-id="td-tab-'+m+'" class="tdc-tab-active" title="'+g+' settings">'+g+'<span class="tdc-tab-search-notice"></span></a>')}c=c+(f+k)+"</div>";k=l=f=a="";if(tdcState.isMobileComposer())switch(tdcSidebar.currentViewportSettings.name){case "all":a="selected";break;case "phone":k="selected"}else switch(tdcSidebar.currentViewportSettings.name){case "all":a=
"selected";break;case "landscape":f="selected";break;case "portrait":l="selected";break;case "phone":k="selected"}c+='<div class="tdc-tab-responsive"><div class="tdc-responsive-buttons">';tdcState.isMobileComposer()?c+='<div class="tdc-responsive-all tdc-responsive-tablet-landscape '+a+'" title="Phone landscape"><span class="tdc-tablet-landscape-icon"></span></div>':(c+='<div class="tdc-responsive-all '+a+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>',"Newspaper"===window.tdcAdminSettings.themeName&&
(c+='<div class="tdc-responsive-tablet-landscape '+f+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>'),c+='<div class="tdc-responsive-tablet-portrait '+l+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>');c+='<div class="tdc-responsive-phone '+k+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div></div>';c+="</div>";c+='<div class="tdc-search">';c+='<i class="td-icon-search"></i>';c+='<input type="text" placeholder="Search settings..." />';
c+="</div></div>";c+='<div class="tdc-sidebar-sticky-a"></div>';c+='<div class="tdc-sidebar-sticky-b"></div>';c+='<div class="tdc-tab-content-wrap">';k=l=f="";for(a=0;a<e.length;a++){g=tdcSidebarPanel._fixGroupName(e[a]);m=tdcUtil.makeSafeForCSS(g);g="tdc-tab-no-design";var p=d.get("tag");"css"===m&&(g="tdc-tab-design");0===a?(f='<div class="tdc-tab-content tdc-tab-content-visible '+g+'" id="td-tab-'+m+'">',l='<div class="tdc-tab-content '+g+'" id="td-tab-'+m+'">',m=window.tdcAdminSettings.mappedShortcodes[p].tdc_start_values,
d.unset("presetValues"),_.isUndefined(m)||(m=JSON.parse(window.atob(m)),_.isArray(m)&&1<m.length&&d.set("presetValues",m)),d.has("presetValues")&&(m=d.get("presetValues"),k+=tdcSidebarPanel._addPresetValuesSelector(m,d))):_.isUndefined(h)||h!=="td-tab-"+m?k+='<div class="tdc-tab-content '+g+'" id="td-tab-'+m+'">':(f=l,k+='<div class="tdc-tab-content tdc-tab-content-visible '+g+'" id="td-tab-'+m+'">');k+=tdcSidebarPanel._bindGroupAndGetHtml(e[a],b,d);m=' data-model_id="'+d.cid+'" ';"dev"===window.tdcAdminSettings.deployMode&&
(k+='<div class="tdc-sidebar-row-buttons">',k+='<div class="tdc-sidebar-button tdc-sidebar-shortcode-row" '+m+' title="Get the shortcode of the current row">CONSOLE: shortcode</div>',k+='<div class="tdc-sidebar-button tdc-sidebar-current-styles-settings" '+m+' title="Get the current styles\' settings">CONSOLE: style presets</div>',k+="</div>");k+="</div>"}c=c+(f+k)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(c);jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");tdcSidebarPanel._hook.addAction("panel_rendered",
function(){"undefined"===typeof window.tdcResponsiveValues&&(window.tdcResponsiveValues={},"all"===tdcSidebar.currentViewportSettings.name?jQuery(".tdc-tab-content-wrap").removeClass("tdc-viewport-responsive"):jQuery(".tdc-tab-content-wrap").addClass("tdc-viewport-responsive"),jQuery(".tdc-tab-content-wrap .tdc-property-responsive").each(function(){var a=jQuery(this),c=a.find("[data-responsive]"),b=c.attr("name"),e=c.data("responsive");try{var d=window.atob(e);window.tdcResponsiveValues[b]=JSON.parse(d)}catch(w){e=
{},a.hasClass("tdc-property-textfield-responsive")?""!==c.val()&&(e.all=c.val()):a.hasClass("tdc-property-dropdown-responsive")?a.hasClass("tdc-visual-selector")?(c=a.find("[data-responsive]:checked:first"),c.length?e.all=c.val():(c=a.find("[data-responsive]:first"),c.length&&(e.all=c.val()))):c.find("option:first").val()!==c.val()&&(e.all=c.val()):a.hasClass("tdc-property-checkbox-responsive")?c.is(":checked")&&(e.all=c.val()):a.hasClass("tdc-property-range-responsive")?e.all=c.data("value"):a.hasClass("tdc-property-range_multiple-responsive")&&
(e.all=c.data("range_value")+c.data("range_unit")),window.tdcResponsiveValues[b]=e}tdcSidebarPanel.setViewportCurrentResponsiveValue(c)}))});tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-tab-content-wrap").find('select[name$="font_family"]').change(function(a){a=jQuery(this).val();""===window.tdcAdminSettings.tdcSavings&&(window.tdcAdminSettings.tdcSavings={});"undefined"===typeof window.tdcAdminSettings.tdcSavings.recentFonts&&(window.tdcAdminSettings.tdcSavings.recentFonts=
[]);var c=window.tdcAdminSettings.tdcSavings.recentFonts.indexOf(a);-1!==c&&window.tdcAdminSettings.tdcSavings.recentFonts.splice(c,1);window.tdcAdminSettings.tdcSavings.recentFonts.push(a);20<=window.tdcAdminSettings.tdcSavings.recentFonts.length&&window.tdcAdminSettings.tdcSavings.recentFonts.splice(0,1);tdcUtil.updateTdcSavings()})});jQuery(".tdc-breadcrumbs").show();0<tdcSidebarPanel.$_paramNameSwitch.length&&(tdcSidebarPanel.$_paramNameSwitch.show(),tdcSidebarPanel.$_paramNameSwitch.hasClass("tdc-param-name-switch-active")&&
jQuery(".tdc-param-name").addClass("tdc-param-name-active"));tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===d.get("tag")){var a=jQuery("body .tdc-row-col-dropdown select"),c=jQuery("body .tdc-row-stretch-dropdown select"),b=d.get("childCollection");if(!_.isUndefined(b)){b=tdcIFrameData.getChildCollectionWidths(b);_.isUndefined(b)&&(b="11");a.length?a.val(b):(a=jQuery("body .tdc-row-col-dropdown input[value='"+b+"']"),a.length&&
a.attr("checked","checked"));a=d.get("attrs");if(_.has(a,"full_width"))var e=a.full_width;_.isUndefined(e)&&(e="");c.val(e)}}})();(function(){if("vc_row_inner"===d.get("tag")){var a=jQuery("body .tdc-innerRow-col-dropdown select"),c=d.get("childCollection");if(!_.isUndefined(c)){c=tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");var b=d.get("parentModel").get("attrs"),e="";_.has(b,"width")&&(e=b.width.replace("/",""));if(a.length)switch(a.val(c),e){case "":case "11":a.find("option[value=12_12]").addClass("tdc-block-col");
a.find("option[value=23_13]").removeClass("tdc-block-col");a.find("option[value=13_23]").removeClass("tdc-block-col");a.find("option[value=13_13_13]").removeClass("tdc-block-col");break;case "13":a.find("option[value=12_12]").addClass("tdc-block-col");a.find("option[value=23_13]").addClass("tdc-block-col");a.find("option[value=13_23]").addClass("tdc-block-col");a.find("option[value=13_13_13]").addClass("tdc-block-col");break;case "23":a.find("option[value=12_12]").removeClass("tdc-block-col"),a.find("option[value=23_13]").addClass("tdc-block-col"),
a.find("option[value=13_23]").addClass("tdc-block-col"),a.find("option[value=13_13_13]").addClass("tdc-block-col")}else if(a=jQuery('body .tdc-innerRow-col-dropdown input[value="'+c+'"]'),a.length)switch(a.attr("checked","checked"),a.next("label").show(),e){case "":case "11":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");a.parent().find("input[value=23_13] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_23] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").removeClass("tdc-block-col");
break;case "13":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");a.parent().find("input[value=23_13] + label").addClass("tdc-block-col");a.parent().find("input[value=13_23] + label").addClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col");break;case "23":a.parent().find("input[value=12_12] + label").removeClass("tdc-block-col"),a.parent().find("input[value=23_13] + label").addClass("tdc-block-col"),a.parent().find("input[value=13_23] + label").addClass("tdc-block-col"),
a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col")}}}})();(function(){var a=d.get("tag");if("vc_row"===a||"vc_row_inner"===a||"vc_column"===a||"vc_column_inner"===a){a=jQuery("body .tdc-property-flex_layout");var c=d.get("childCollection");if(!_.isUndefined(c)&&a.length){c=jQuery("body .tdc-property-flex_horiz_align");var b=jQuery("body .tdc-property-flex_vert_align"),e=jQuery("body .tdc-property-flex_layout_reverse");a.find("input[value=column]").is(":checked")&&(c.addClass("tdc-flex-row-align-rev"),
b.addClass("tdc-flex-row-align-rev"),e.find("input").is(":checked")&&c.addClass("tdc-flex-row-rev-align-rev"))}}})();(function(){if("td_woo_products_live_search"===d.get("tag")){var a=jQuery("body .tdc-property-woo_search_version select").val(),c=jQuery("body .tdc-woos-dropdown"),b=jQuery("body .tdc-woos-regular");""===a?b.hide():"regular"===a&&c.hide()}})()}},_bindGroupAndGetHtml:function(d,b,e){var a="",c=e.get("attrs");if("tdc_zone"===e.get("tag"))var g=c.type;for(var h=0;h<b.params.length;h++){var f=
b.params[h].param_name,l=b.params[h].group;if(d===tdcSidebarPanel._defaultGroupName&&_.isEmpty(b.params[h].group)||b.params[h].group===d){if(!_.isUndefined(g)&&(!_.isUndefined(b.params[h].zone_group)&&g!==b.params[h].zone_group||"type"===f))continue;a+=tdcSidebarPanel._bindParamAndGetHtml(b.params[h],e)}if("block_template_id"===f){l=c.block_template_id;_.isEmpty(l)&&(l=window.tdcAdminSettings.globalBlockTemplate);f=window.tdcAdminSettings.mappedBlockTemplates;for(var k=0;k<f[l].params.length;k++)if(d===
tdcSidebarPanel._defaultGroupName&&_.isEmpty(f[l].params[k].group)||f[l].params[k].group===d)a+=tdcSidebarPanel._bindParamAndGetHtml(f[l].params[k],e)}else if(0===f.indexOf("tds_")){var m=f.split("-");k=m[0];var p;2===m.length?p=m[1]:2<m.length&&new tdcNotice.notice('Param "'+f+'" must have up to at most one "-" separator ',!0,!1);f=c[f];_.isEmpty(f)&&(f=window.tdcAdminSettings.globalStyle[k]);m=window.tdcAdminSettings.settingsStyle[k];for(k=0;k<m[f].params.length;k++)if(l==d||_.isUndefined(l)&&d===
tdcSidebarPanel._defaultGroupName){var q=JSON.parse(JSON.stringify(m[f].params[k]));q.param_name=f+"-"+q.param_name;_.isUndefined(p)||(q.param_name+="-"+p);a+=tdcSidebarPanel._bindParamAndGetHtml(q,e)}}}return a},_bindParamAndGetHtml:function(d,b){switch(d.type){case "custom":return tdcSidebarPanel.addCustom(d,b);case "colorpicker":return tdcSidebarPanel.addColorpicker(d,b);case "gradient":return tdcSidebarPanel.addGradient(d,b);case "dropdown":return tdcSidebarPanel.addDropDown(d,b);case "dropdown-responsive":return tdcSidebarPanel.addDropDownResponsive(d,
b);case "checkbox":return tdcSidebarPanel.addCheckBox(d,b);case "checkbox-responsive":return tdcSidebarPanel.addCheckBoxResponsive(d,b);case "range":return tdcSidebarPanel.addRange(d,b);case "range-responsive":return tdcSidebarPanel.addRangeResponsive(d,b);case "range_multiple":return tdcSidebarPanel.addRangeMultiple(d,b);case "range_multiple-responsive":return tdcSidebarPanel.addRangeMultipleResponsive(d,b);case "icon":return tdcSidebarPanel.addIconSelector(d,b);case "attach_image":return tdcSidebarPanel.addUploadImage(d,
b);case "textfield":return tdcSidebarPanel.addTextField(d,b);case "do_shortcode_textfield":return tdcSidebarPanel.addDoShortcode(d,b);case "textfield-responsive":return tdcSidebarPanel.addTextFieldResponsive(d,b);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(d,b);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(d,b);case "editor_css":return tdcSidebarPanel.addEditorCss(d,b);case "css_editor":return"";case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(d,
b);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(d,b);case "text_separator":return tdcSidebarPanel.addTextSeparatorHorizontal(d,b);case "font_header":return tdcSidebarPanel.addFontHeader(d,b);case "font_title":return tdcSidebarPanel.addFontTitle(d,b);case "font_reset":return tdcSidebarPanel.addFontReset(d,b);case "font_save":return tdcSidebarPanel.addFontSave(d,b);case "font_load":return tdcSidebarPanel.addFontLoad(d,b);case "font_settings":return tdcSidebarPanel.addFontSettings(d,
b);case "shadow_header":return tdcSidebarPanel.addShadowHeader(d,b);case "shadow_title":return tdcSidebarPanel.addShadowTitle(d,b);case "spot_header":return tdcSidebarPanel.addSpotHeader(d,b);case "clearfix":return tdcSidebarPanel.addClearfix(d,b);case "tdc_hidden_field":return"";default:return d.param_name+" - "+d.type+"<br>"}},_deletePanel:function(){tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=f;tdcSidebarPanel.saveTdcPalette();jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-param-name-switch").hide();
jQuery(".tdc-inspector .tdc-current-element-head").empty();jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");delete window.tdcResponsiveValues;tdcSidebar.hideWpeditor()},_getParameterClasses:function(d){var b="tdc-property-wrap tdc-property-"+
d.type;b+=" tdc-property-"+d.param_name;_.isUndefined(d.class)||(b+=" "+d.class);return b},_getParameterCurrentValue:function(d,b){b=b.get("attrs");return _.isUndefined(b[d.param_name])?"dropdown"===d.type||_.isUndefined(d.value)?"":d.value:b[d.param_name]},_getParameterDomName:function(d){return"tdc-param-"+d.param_name},_getParamterDataAtts:function(d,b){var e="";if("undefined"===typeof b)return e;e+=' data-model_id="'+b.cid+'"';"undefined"!==typeof d&&(e+=' data-param_name="'+d.param_name+'"',
"woo_shortcode"===d.param_name&&(e+='id="woo_shortcode" '));return e},_fixGroupName:function(d){switch(d){case "Design options":return"Css";case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return d},clearPanel:function(){tdcSidebarPanel._deletePanel()},blurInputPanel:function(){jQuery("body").find("input").blur()},_addPresetValuesSelector:function(d,b){b='<div class="tdc-preset-values tdc-sidebar-horizontal-separator"><i class="tdc-font-fa tdc-font-fa-cube"></i>Pre-made style presets<i class="tdc-font-fa tdc-font-fa-angle-right"></i></div><ul class="tdc-preset-values-list" data-model_id="'+
(b.cid+'">');for(var e=1;e<d.length;e++){var a="";_.isUndefined(d[e].tdc_preset_individual)||(a='data-individual="1"');var c="";_.isUndefined(d[e].tdc_preset_class)||(c=' class="'+d[e].tdc_preset_class+'"');b+="<li "+a+" "+c+' data-values="'+window.btoa(JSON.stringify(d[e]))+'">'+d[e].tdc_preset_name+"</li>"}b+="</ul>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackPresets)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackPresets);return b},callbackPresets:function(){jQuery(".tdc-preset-values").click(function(){jQuery(this).next(".tdc-preset-values-list").toggle()});
jQuery(".tdc-preset-values-list > li").click(function(){var d=jQuery(this),b=d.data("individual"),e=d.parent(".tdc-preset-values-list");d=JSON.parse(window.atob(d.data("values")));var a=tdcIFrameData.getModel(e.data("model_id")),c={};_.isUndefined(b)||(c=_.clone(a.get("attrs")));_.isObject(d)&&(_.map(d,function(b,e){var d=!1;_.map(window.tdcAdminSettings.mappedShortcodes[a.get("tag")].params,function(a,g){a.param_name===e&&(d=!0,c[e]=b)});if(!d){var g=c.block_template_id;if(_.isUndefined(g)||""===
g)g=window.tdcAdminSettings.globalBlockTemplate;_.isUndefined(g)||_.map(window.tdcAdminSettings.mappedBlockTemplates[g].params,function(a,g){a.param_name===e&&(d=!0,c[e]=b)})}d||0!==e.indexOf("tds_")||(c[e]=b)}),a.set("attrs",c));tdcSidebarController.onUpdate(a)})},addColorpicker:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span class="tdc-search-data"'+
e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><div class="tdc-colorpicker-wrap" title="'+(d.heading+'">');a=a+"</div><input "+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(d,b)+'"/>');a=a+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");a+="</div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackColorPicker)||tdcSidebarPanel._hook.addAction("panel_rendered",
tdcSidebarPanel.callbackColorPicker);return a},addCustom:function(d,b){b="";_.has(d,"description")&&""!==d.description&&(b=' title="'+d.description+'" ');var e='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';e+='<div class="tdc-property-title"><span class="tdc-search-data"'+b+">"+d.heading+"</span></div>";e=e+'<div class="tdc-property">'+d.value;e=e+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");return e+"</div>"},callbackEditorCss:function(){tdcSidebar.buildEditorCss()},
callbackColorPicker:function(){jQuery("#tdc-palette-color-picker").tdPalette();jQuery(".tdc-tab-no-design .tdc-property-colorpicker").each(function(){var d=jQuery(this),b=d.find("input");d=d.find(".tdc-colorpicker-wrap");_.isUndefined(b.val())||""===b.val()||d.attr("style","background: "+b.val())})},addGradient:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span class="tdc-search-data"'+
e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><div class="tdc-gradient-wrap tdc-no-gradient-selected"></div><input '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(d,b)+'"/>');a=a+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");a+="</div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackGradient)||tdcSidebarPanel._hook.addAction("panel_rendered",
tdcSidebarPanel.callbackGradient);return a},callbackGradient:function(){jQuery("#tdc-gradient-color-picker").tdGradient();jQuery(".tdc-property-gradient").each(function(){var d=jQuery(this),b=d.find("input");d=d.find(".tdc-gradient-wrap");if(!_.isUndefined(b.val())&&""!==b.val())try{var e=JSON.parse(window.atob(b.val()));_.isUndefined(e.css)||d.attr("style",e.css)}catch(a){e=b.val(),_.isUndefined(e)||d.attr("style","background: "+e)}})},addDropDown:function(d,b){if("tdb_mobile_menu"===b.get("tag")&&
"menu_id"===d.param_name){var e=b.get("attrs");e.menu_id=window.tdcPostSettings.mobileMenuId;b.set("attrs",e)}var a=e=!1;_.has(d,"tdc_dropdown_images")&&""!==d.tdc_dropdown_images&&(e=!0);_.has(d,"tdc_dropdown_texts")&&""!==d.tdc_dropdown_texts&&(a=!0);var c="",g="",f=Object.keys(d.value);if(_.has(d,"tdc_min_options")&&f.length<=parseInt(d.tdc_min_options))return c;for(var n=0;n<f.length;n++){var l=!1,k="",m="",p=f[n],q=String(tdcSidebarPanel._getParameterCurrentValue(d,b)),t=String(d.value[f[n]]);
_.isObject(d.value[f[n]])&&(l=!0,t=_.values(d.value[f[n]])[0],p=_.keys(d.value[f[n]])[0]);e||a?(0===n&&""===q&&(q=t),q===t&&(k=" checked "),m=_.uniqueId(),q=t,"vc_row"!==b.attributes.tag&&"vc_row_inner"!==b.attributes.tag||-1!==d.param_name.indexOf("flex_")||(q="col_"+q),g+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(d,b)+' id="'+m+'" name="'+tdcSidebarPanel._getParameterDomName(d)+'" '+k+' value="'+t+'">',e?(k="",l&&(k="tdc-standard-value"),g+='<label class="tdc-property-input-radio-label '+
k+'" for="'+m+'" title="'+p+'"><div class="'+q+'"></div></label>'):g+='<label class="tdc-property-input-radio-label" for="'+m+'" title="'+p+'">'+t+"</label>"):(q===t&&(k=' selected="selected" '),"__"===t&&-1!==p.search("--")&&(m=" disabled "),g+="<option "+k+" "+m+' value="'+t+'">'+p+"</option>")}f="";_.has(d,"description")&&""!==d.description&&(f=' title="'+d.description+'" ');c+='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span class="tdc-search-data"'+
f+">"+d.heading+"</span></div>";c+='<div class="tdc-property">';e||a?c+=g:(c+="<select "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'">',c=c+g+"</select>");c=c+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");return c+"</div>"},addDropDownResponsive:function(d,b){var e=!1,a=!1;_.has(d,"tdc_dropdown_images")&&""!==d.tdc_dropdown_images&&(e=!0);_.has(d,"tdc_dropdown_texts")&&""!==d.tdc_dropdown_texts&&(a=!0);var c="",g="",f=Object.keys(d.value);
if(_.has(d,"tdc_min_options")&&f.length<=parseInt(d.tdc_min_options))return c;var n=' data-responsive="" ',l=String(tdcSidebarPanel._getParameterCurrentValue(d,b));try{var k=JSON.parse(window.atob(l));n=' data-responsive="'+l+'" ';"undefined"!==typeof k[tdcSidebar.currentViewportSettings.name]&&(l=k[tdcSidebar.currentViewportSettings.name])}catch(r){}for(k=0;k<f.length;k++){var m=!1,p="",q=f[k],t=String(d.value[f[k]]);_.isObject(d.value[f[k]])&&(m=!0,t=_.values(d.value[f[k]])[0],q=_.keys(d.value[f[k]])[0]);
if(e||a){0===k&&""===l&&(l=t);l===t&&(p=" checked ");var v=_.uniqueId(),u=t;"vc_row"!==b.attributes.tag&&"vc_row_inner"!==b.attributes.tag||-1!==d.param_name.indexOf("flex_")||(u="col_"+u);g+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(d,b)+' id="'+v+'" name="'+tdcSidebarPanel._getParameterDomName(d)+'" '+p+' value="'+t+'" '+n+">";e?(p="",m&&(p="tdc-standard-value"),g+='<label class="tdc-property-input-radio-label '+p+'" for="'+v+'" title="'+q+'"><div class="'+
u+'"></div></label>'):g+='<label class="tdc-property-input-radio-label" for="'+v+'" title="'+q+'">'+t+"</label>"}else l===t&&(p=' selected="selected" '),g+="<option "+p+' value="'+t+'">'+q+"</option>"}f="";_.has(d,"description")&&""!==d.description&&(f=' title="'+d.description+'" ');c+='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span class="tdc-search-data"'+f+">"+d.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select" style="display: block;"></div></span></div>';
c+='<div class="tdc-property">';e||a?c+=g:(c+="<select "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" '+n+f+">",c=c+g+"</select>");c=c+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");return c+"</div>"},addCheckBox:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a="";""!==tdcSidebarPanel._getParameterCurrentValue(d,b)&&(a=" checked ");var c='<div class="'+tdcSidebarPanel._getParameterClasses(d)+
'">';c+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";c=c+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="checkbox" value="yes" '+a+"/>");c=c+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");return c+"</div>"},addCheckBoxResponsive:function(d,b){var e="",a=' data-responsive="" ',c=String(tdcSidebarPanel._getParameterCurrentValue(d,b));try{var g=
JSON.parse(window.atob(c));a=' data-responsive="'+c+'" ';"undefined"!==typeof g[tdcSidebar.currentViewportSettings.name]&&(c=g[tdcSidebar.currentViewportSettings.name])}catch(h){}""!==c&&(e=" checked ");g="";_.has(d,"description")&&""!==d.description&&(g=' title="'+d.description+'" ');c='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span class="tdc-search-data"'+g+">"+d.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-checkbox" style="display: block;"></div></span></div>';
c=c+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="checkbox" value="yes" '+e+a+"/>");c=c+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");return c+"</div>"},addRange:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a="";_.has(d,"range_max")&&""!==d.range_max&&(a=d.range_max);var c="";_.has(d,"range_min")&&""!==d.range_min&&(c=d.range_min);
var g="";_.has(d,"range_step")&&""!==d.range_step&&(g=d.range_step);var f="";_.has(d,"value")&&""!==d.value&&(f=d.value);var n="";""!==tdcSidebarPanel._getParameterCurrentValue(d,b)&&(n=tdcSidebarPanel._getParameterCurrentValue(d,b));var l='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';l+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";l=l+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+
'" type="range" data-value="'+n+'" data-min="'+c+'" data-max="'+a+'" data-step="'+g+'" min="'+c+'" max="'+a+'" step="'+g+'" value="'+n+'" />');l=l+('<input type="text" class="tdc_range_value" data-default_value="'+f+'" value="'+n+'"/></div><span class="tdc-param-name">')+(d.param_name+"</span>");return l+="</div>"},addRangeResponsive:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a="";_.has(d,"range_max")&&""!==d.range_max&&(a=d.range_max);
var c="";_.has(d,"range_min")&&""!==d.range_min&&(c=d.range_min);var g="";_.has(d,"range_step")&&""!==d.range_step&&(g=d.range_step);var f="";_.has(d,"value")&&""!==d.value&&(f=d.value);""!==tdcSidebarPanel._getParameterCurrentValue(d,b)&&tdcSidebarPanel._getParameterCurrentValue(d,b);var n="";_.has(d,"placeholder")&&""!==d.placeholder&&(n=' data-placeholder="'+d.placeholder+'" placeholder="'+d.placeholder+'" ');var l=' data-responsive="" ',k=tdcSidebarPanel._getParameterCurrentValue(d,b);try{var m=
JSON.parse(window.atob(k));l=' data-responsive="'+k+'" ';k="undefined"===typeof m[tdcSidebar.currentViewportSettings.name]?"":m[tdcSidebar.currentViewportSettings.name]}catch(p){}m='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';m+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";m=m+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="range" data-value="'+
k+'" data-min="'+c+'" data-max="'+a+'" data-step="'+g+'" min="'+c+'" max="'+a+'" step="'+g+'" value="'+k+'" '+l+" />");m=m+('<input type="text" class="tdc_range_value" data-default_value="'+f+'" '+n+' value="'+k+'"/></div><span class="tdc-param-name">')+(d.param_name+"</span>");return m+="</div>"},addRangeMultiple:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a=d.tdc_values,c=tdcSidebarPanel._getParameterCurrentValue(d,b),g="",f="",n=[],l=
"",k="",m="",p="",q="",t="",v="",u;for(u in a)a.hasOwnProperty(u)&&(n.push(a[u].unit),""===k||""===l)&&(p=a[u].unit,k=' data-range_unit="'+p+'" ',m=a[u].value,l=' data-range_value="'+m+'" ',q=a[u].range_min,t=a[u].range_max,v=a[u].range_step);if(""!==c){for(var r=[],w=0;w<n.length&&!(r=c.split(n[w]),1<r.length);w++);r.length&&(p=n[w],k=' data-range_unit="'+p+'" ',m=r[0],l=' data-range_value="'+m+'" ')}for(u in a)a.hasOwnProperty(u)&&(c=_.uniqueId(),g+=" data-value_"+u+'="'+a[u].value+'" ',g+=" data-min_"+
u+'="'+a[u].range_min+'" ',g+=" data-max_"+u+'="'+a[u].range_max+'" ',g+=" data-step_"+u+'="'+a[u].range_step+'" ',n=a[u].value,r="",a[u].unit===p&&(n=m,q=a[u].range_min,t=a[u].range_max,v=a[u].range_step,r="checked"),f+='<input name="'+tdcSidebarPanel._getParameterDomName(d)+'_unit" data-unit="'+u+'" data-unit_value="'+a[u].unit+'" type="radio" id="'+c+'" '+r+' data-default_value="'+a[u].value+'" data-last_value="'+n+'"/>',f+='<label for="'+c+'">'+a[u].unit+"</label>");a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+
'">';a+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><input class="tdc-multiple-range" '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="range" '+l+" "+k+" "+g+' min="'+q+'" max="'+t+'" step="'+v+'" value="'+m+'"/>');a=a+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+f+'</div><input type="text" class="tdc_range_value" value="'+(m+'"/>');
a+="</div>";a+="</div>";a+='<span class="tdc-param-name">'+d.param_name+"</span>";return a+="</div>"},addRangeMultipleResponsive:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a=d.tdc_values,c=tdcSidebarPanel._getParameterCurrentValue(d,b),g="",f="",n=[],l=' data-responsive="" ',k="",m="",p="",q="",t="",v="",u="",r;for(r in a)a.hasOwnProperty(r)&&(n.push(a[r].unit),""===m||""===k)&&(q=a[r].unit,m=' data-range_unit="'+q+'" ',p=a[r].value,k=
' data-range_value="'+p+'" ',t=a[r].range_min,v=a[r].range_max,u=a[r].range_step);if(""!==c){var w=c;try{var A=JSON.parse(window.atob(c));l=' data-responsive="'+c+'" ';w="undefined"===typeof A[tdcSidebar.currentViewportSettings.name]?"":A[tdcSidebar.currentViewportSettings.name]}catch(x){}if(""!==w){c=[];for(A=0;A<n.length&&!(c=w.split(n[A]),1<c.length);A++);c.length&&(q=n[A],m=' data-range_unit="'+q+'" ',p=c[0],k=' data-range_value="'+p+'" ')}}for(r in a)a.hasOwnProperty(r)&&(n=_.uniqueId(),g+=" data-value_"+
r+'="'+a[r].value+'" ',g+=" data-min_"+r+'="'+a[r].range_min+'" ',g+=" data-max_"+r+'="'+a[r].range_max+'" ',g+=" data-step_"+r+'="'+a[r].range_step+'" ',w=a[r].value,c="",a[r].unit===q&&(w=p,t=a[r].range_min,v=a[r].range_max,u=a[r].range_step,c="checked"),f+='<input name="'+tdcSidebarPanel._getParameterDomName(d)+'_unit" data-unit="'+r+'" data-unit_value="'+a[r].unit+'" type="radio" id="'+n+'" '+c+' data-default_value="'+a[r].value+'" data-last_value="'+w+'"/>',f+='<label for="'+n+'">'+a[r].unit+
"</label>");a='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><input class="tdc-multiple-range" '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="range" '+k+" "+m+" "+g+" "+l+' min="'+t+'" max="'+v+'" step="'+u+'" value="'+p+'"/>');a=a+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+
f+'</div><input type="text" class="tdc_range_value" value="'+(p+'"/>');a+="</div>";a+="</div>";a+='<span class="tdc-param-name">'+d.param_name+"</span>";return a+="</div>"},addIconSelector:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><div class="tdc-icon-wrap tdc-no-icon-selected" '+
(tdcSidebarPanel._getParamterDataAtts(d,b)+">");a=a+'</div><a class="tdc-icon-remove tdc-hidden-button" href="#" >Remove</a></div><span class="tdc-param-name">'+(d.param_name+"</span>");a+="</div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-icon-wrap").each(function(a,e){a=jQuery(e);d.param_name===a.data("param_name")&&(e=tdcSidebarPanel._getParameterCurrentValue(d,b),""!==e&&(a.html('<i class="'+e+'"></i>'),a.closest(".tdc-property").find(".tdc-icon-remove").removeClass("tdc-hidden-button")))})});
return a},addUploadImage:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><div class="tdc-image-wrap tdc-no-image-selected" '+(tdcSidebarPanel._getParamterDataAtts(d,b)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");
a=a+'</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div><span class="tdc-param-name">'+(d.param_name+"</span>");a+="</div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(a,e){var c=jQuery(e);if(!c.parent().parent(".tdc-bg-upload").length&&d.param_name===c.data("param_name")){var g=tdcSidebarPanel._getParameterCurrentValue(d,b);""!==g&&jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_url",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:g,action:"tdc_ajax_get_image_url"}}).done(function(a,b,e){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(c.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),c.data("image_link",a.image_url),c.data("image_id",g),c.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,
c,b){})}})});return a},addTextField:function(d,b){var e="",a="";if(_.has(d,"description")&&""!==d.description){var c=jQuery("<div>"+d.description+"</div>");d.description===c.text()?e=' title="'+d.description+'" ':a='<div class="tdc-description">'+d.description+"</div>"}c="";_.has(d,"placeholder")&&""!==d.placeholder&&(c=' data-placeholder="'+d.placeholder+'" placeholder="'+d.placeholder+'" ');var g='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';g+='<div class="tdc-property-title"><span class="tdc-search-data"'+
e+">"+d.heading+"</span></div>";g=g+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="text" '+c+' value="'+tdcSidebarPanel._getParameterCurrentValue(d,b)+'"/>');g=g+a+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");return g+="</div>"},addDoShortcode:function(d,b){var e=_.uniqueId("tdc_textarea_"),a="";_.has(d,"description")&&""!==d.description&&(a=' title="'+d.description+'" ');var c='<div class="'+
tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span'+a+">"+d.heading+"</span></div>";c=c+'<div class="tdc-property"><textarea id="'+(e+'" class="tdc-textarea tdc-textarea-visible" '+tdcSidebarPanel._getParamterDataAtts(d,b)+">"+decodeURIComponent(atob(tdcSidebarPanel._getParameterCurrentValue(d,b)))+"</textarea>");c=c+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");c+="</div>";d=jQuery("body");d.on("change","#woo_shortcode",function(a){jQuery(a.change);
a=atob(a.target.value);jQuery("#"+e).val(a).trigger("focusin")});d.on("keyup focusin","#"+e,function(a){var c=jQuery(a.target),b=tdcIFrameData.getModel(c.data("model_id")),e=window.btoa(encodeURIComponent(c.val())),d=window.btoa(encodeURIComponent(a.target.oldValue));setTimeout(function(){tdcSidebarController.onUpdate(b,c.data("param_name"),d,e)},500)});return c},addTextFieldResponsive:function(d,b){var e="",a="";if(_.has(d,"description")&&""!==d.description){var c=jQuery("<div>"+d.description+"</div>");
d.description===c.text()?e=' title="'+d.description+'" ':a='<div class="tdc-description">'+d.description+"</div>"}c="";_.has(d,"placeholder")&&""!==d.placeholder&&(c=' data-placeholder="'+d.placeholder+'" placeholder="'+d.placeholder+'" ');var g=' data-responsive="" ',f=tdcSidebarPanel._getParameterCurrentValue(d,b);try{var n=JSON.parse(window.atob(f));g=' data-responsive="'+f+'" ';f="undefined"===typeof n[tdcSidebar.currentViewportSettings.name]?"":n[tdcSidebar.currentViewportSettings.name]}catch(l){}n=
'<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';n+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+d.heading+"</span></div>";n=n+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="text" value="'+f+'" '+c+g+e+"/>");n=n+a+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");return n+="</div>"},addTextAreaHtml:function(d,b){_.has(d,"description");
return'<a href="#" class="tdc-open-wpeditor" data-model_id="'+b.cid+'" data-mapped_parameter_name="'+d.param_name+'">Edit Content</a>'},addTextAreaRawHtml:function(d,b){var e=_.uniqueId("tdc_textarea_"),a="";_.has(d,"description")&&""!==d.description&&(a=' title="'+d.description+'" ');var c='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span class="tdc-search-data"'+a+">"+d.heading+"</span></div>";c=c+'<div class="tdc-property"><textarea id="'+(e+
'" class="tdc-textarea" '+tdcSidebarPanel._getParamterDataAtts(d,b)+">"+tdcSidebarPanel._getParameterCurrentValue(d,b)+"</textarea>");c=c+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");c+="</div>";jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,
action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(d,b)}}).done(function(a,c,b){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):jQuery("#"+e).html(a.parsed_content).addClass("tdc-textarea-visible"))}).fail(function(a,c,b){});jQuery("body").on("keyup focusin","#"+e,function(a){var c=jQuery(a.target),b=tdcIFrameData.getModel(c.data("model_id"));if("focusin"!==a.type&&a.target.oldValue!==a.target.value){var e=window.btoa(encodeURIComponent(c.val())),
d=window.btoa(encodeURIComponent(a.target.oldValue));tdcSidebarController.onUpdate(b,c.data("param_name"),d,e)}a.target.oldValue=a.target.value});return c},addEditorCss:function(d,b){var e=_.uniqueId("tdc_textarea_"),a="";_.has(d,"description")&&""!==d.description&&(a=' title="'+d.description+'" ');var c='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span class="tdc-search-data tdc-open-csseditor"'+a+">"+d.heading+"</span></div>";c=c+'<div class="tdc-property"><textarea id="'+
(e+'" class="tdc-textarea tdc-editor-css" '+tdcSidebarPanel._getParamterDataAtts(d,b)+' style="display: none">'+tdcSidebarPanel._getParameterCurrentValue(d,b)+"</textarea>");c=c+'</div><span class="tdc-param-name">'+(d.param_name+"</span>");c+="</div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackEditorCss)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackEditorCss);jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(d,b)}}).done(function(a,c,b){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):jQuery("#"+e).html(a.parsed_content).addClass("tdc-textarea-visible"))}).fail(function(a,c,b){});return c},
addSeparatorHorizontal:function(d,b){return'<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(d)+'"></div>'},addTextSeparatorHorizontal:function(d,b){return'<div class="tdc-sidebar-text-separator tdc-property-title '+tdcSidebarPanel._getParameterClasses(d)+'"><span class="tdc-search-data">'+d.heading+"</span></div>"},addFontHeader:function(d,b){return'<div class="tdc-sidebar-font-header '+tdcSidebarPanel._getParameterClasses(d)+'"><span class="tdc-font-ico1" title="Font size"></span><span class="tdc-font-ico2" title="Line height (Use with px or a number that will be multiplied with the current font-size)"></span><span class="tdc-font-ico3" title="Font style"></span><span class="tdc-font-ico4" title="Font weight"></span><span class="tdc-font-ico5" title="Text transform"></span><span class="tdc-font-ico6" title="Letter spacing"></span></div>'},
addFontTitle:function(d,b){return'<div class="tdc-sidebar-font-title '+tdcSidebarPanel._getParameterClasses(d)+'"><span class="tdc-search-data tdc-search-notice-font">'+tdcSidebarPanel._getParameterCurrentValue(d,b)+"</span></div>"},addFontSettings:function(d,b){var e='<div class="tdc-font-manager-wrap '+tdcSidebarPanel._getParameterClasses(d)+'">';e=e+'<div class="tdc-font-manager"><div title="Clear font settings" class="tdc-sidebar-font-reset" data-model_id="'+(b.cid+'" data-param_name="'+d.param_name+
'">Reset font settings</div>');e+='<div title="Save font settings" class="tdc-sidebar-font-save" data-model_id="'+b.cid+'" data-param_name="'+d.param_name+'">Save font settings</div>';e+='<div title="Load font settings" class="tdc-sidebar-font-load" data-model_id="'+b.cid+'" data-param_name="'+d.param_name+'">Load font settings</div>';return e+"</div></div>"},addShadowHeader:function(d,b){return'<div class="tdc-sidebar-shadow-header '+tdcSidebarPanel._getParameterClasses(d)+'"><span class="tdc-shadow-ico1" title="Shadow size"></span><span class="tdc-shadow-ico2" title="Horizontal offset"></span><span class="tdc-shadow-ico3" title="Vertical offset"></span><span class="tdc-shadow-ico4" title="Shadow spread"></span><span class="tdc-shadow-ico5" title="Shadow color"></span></div>'},
addShadowTitle:function(d,b){return'<div class="tdc-sidebar-shadow-title '+tdcSidebarPanel._getParameterClasses(d)+'"><span class="tdc-search-data">'+tdcSidebarPanel._getParameterCurrentValue(d,b)+"</span></div>"},addSpotHeader:function(d,b){b='<div class="tdc-spot-header '+tdcSidebarPanel._getParameterClasses(d)+'">';b="undefined"!==typeof d.inline_spot&&!0===d.inline_spot?b+'<span class="tdc-inline-spot-header-title">Title</span><span class="tdc-inline-spot-header-paragraph">Par.</span><span class="tdc-inline-spot-header-color">Color</span><span class="tdc-inline-spot-header-align">Align</span>':
b+'<span class="tdc-spot-header-title">Title</span><span class="tdc-spot-header-color">Color</span>';return b+"</div>"},addClearfix:function(d,b){return'<div class="clearfix"></div>'},updateTextfieldResponsiveValues:function(d,b,e){"undefined"===typeof window.tdcResponsiveValues[d]?""!==b&&(window.tdcResponsiveValues[d]={},window.tdcResponsiveValues[d][e]={viewportName:b}):""===b?delete window.tdcResponsiveValues[d][e]:window.tdcResponsiveValues[d][e]=b;b=_.allKeys(window.tdcResponsiveValues[d]);
return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[d].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):""},updateDropdownResponsiveValues:function(d,b,e){"undefined"===typeof window.tdcResponsiveValues[d]?(window.tdcResponsiveValues[d]={},window.tdcResponsiveValues[d][e]={},window.tdcResponsiveValues[d][e][e]=b):window.tdcResponsiveValues[d][e]=b;b=_.allKeys(window.tdcResponsiveValues[d]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[d].all:
1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):""},updateCheckboxResponsiveValues:function(d,b,e){"undefined"===typeof window.tdcResponsiveValues[d]?(window.tdcResponsiveValues[d]={},window.tdcResponsiveValues[d][e]={viewportName:b}):window.tdcResponsiveValues[d][e]=b;b=_.allKeys(window.tdcResponsiveValues[d]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[d].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):
""},deleteResponsiveValue:function(d,b){"undefined"!==typeof window.tdcResponsiveValues[d]&&delete window.tdcResponsiveValues[d][b];b=_.allKeys(window.tdcResponsiveValues[d]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[d].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):""},deleteResponsiveValues:function(d){"undefined"!==typeof window.tdcResponsiveValues[d]&&(window.tdcResponsiveValues[d]={})},getCurrentResponsiveValue:function(d,
b){if("undefined"!==typeof window.tdcResponsiveValues[d])return window.tdcResponsiveValues[d][b]},setViewportCurrentResponsiveValue:function(d){var b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),tdcSidebar.currentViewportSettings.name),e=d.closest(".tdc-property-responsive");if(e.hasClass("tdc-property-textfield-responsive")){var a="";_.isUndefined(d.data("placeholder"))||(a=d.data("placeholder"));d.attr("placeholder",a);_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),
"all"),_.isUndefined(b)?d.val(""):(d.val(b),d.attr("placeholder",b),e.addClass("tdc-css-inherited"))):(d.val(b),e.removeClass("tdc-css-inherited"))}else if(e.hasClass("tdc-property-checkbox-responsive"))a=e.find(".tdc-inherit-checkbox"),_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)?d.removeAttr("checked"):(""===b?d.removeAttr("checked"):d.attr("checked","checked"),e.addClass("tdc-css-inherited")),a.hide()):(""===b?d.removeAttr("checked"):d.attr("checked",
"checked"),e.removeClass("tdc-css-inherited"),"all"===tdcSidebar.currentViewportSettings.name?a.hide():a.show());else if(e.hasClass("tdc-property-dropdown-responsive")){a=e.find(".tdc-inherit-select");var c=d.attr("type");_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)?"undefined"!==typeof c&&"radio"===c?d.each(function(a){var c=jQuery(this);"radio"===c.attr("type")&&(0===a?c.prop("checked",!0):c.prop("checked",!1))}):d.find("option:selected").removeAttr("selected").find("option:first").attr("selected",
"selected"):("undefined"!==typeof c&&"radio"===c?d.each(function(a){a=jQuery(this);"radio"===a.attr("type")&&(a.val()===b?a.prop("checked",!0):a.prop("checked",!1))}):d.val(b),e.addClass("tdc-css-inherited")),a.hide()):("undefined"!==typeof c&&"radio"===c?d.each(function(a){a=jQuery(this);"radio"===a.attr("type")&&(a.val()===b?a.prop("checked",!0):a.prop("checked",!1))}):d.val(b),e.removeClass("tdc-css-inherited"),"all"===tdcSidebar.currentViewportSettings.name?a.hide():a.show())}else if(e.hasClass("tdc-property-range-responsive"))a=
"",_.isUndefined(d.data("placeholder"))||(a=d.data("placeholder")),c=d.next('input[type="text"]'),c.attr("placeholder",a),_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)?(d.val(""),c.val("")):(d.val(b),c.val(b),c.attr("placeholder",b),e.addClass("tdc-css-inherited"))):(d.val(b),c.val(b),e.removeClass("tdc-css-inherited"));else if(e.hasClass("tdc-property-range_multiple-responsive")){a=tdcIFrameData.getModel(d.data("model_id"));var g=d.data("param_name"),
f=window.tdcAdminSettings.mappedShortcodes[a.attributes.tag];a=[];for(var n=c="",l=0;l<f.params.length;l++)if(g===f.params[l].param_name){g=f.params[l].tdc_values;for(var k in g)g.hasOwnProperty(k)&&(a.push(g[k].unit),""===c||""===n)&&(c=g[k].value,n=g[k].unit);break}_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)&&(d.data("range_value",c),d.data("range_unit",n),d.val(c),k=e.find('input[type="radio"][data-unit_value="'+n+'"]'),l=k.data("unit"),
g=d.data("min_"+l),n=d.data("max_"+l),l=d.data("step_"+l),f=d.get(0),k.prop("checked",!0),f.min=g,f.max=n,f.step=l,f.value=c,k.data("last_value",c),e.find('input[type="text"]').val(c)),"all"===tdcSidebar.currentViewportSettings.name?e.removeClass("tdc-css-inherited"):e.addClass("tdc-css-inherited")):e.removeClass("tdc-css-inherited");if(!_.isUndefined(b)){c=[];for(l=0;l<a.length&&!(c=b.split(a[l]),1<c.length);l++);c.length&&(c=c[0],n=a[l],d.data("range_value",c),d.data("range_unit",n),d.val(c),k=
e.find('input[type="radio"][data-unit_value="'+n+'"]'),l=k.data("unit"),g=d.data("min_"+l),n=d.data("max_"+l),l=d.data("step_"+l),f=d.get(0),k.prop("checked",!0),f.min=g,f.max=n,f.step=l,f.value=c,k.data("last_value",c),e.find('input[type="text"]').val(c))}}},showShortcodeFromPath:function(d){if(!_.isUndefined(d)){d=d.toString().split("_");var b;d.forEach(function(a,e){""!==a&&(_.isUndefined(b)?b=tdcIFrameData.tdcTopCollection.at(a):(e=b.get("childCollection"),!_.isUndefined(e)&&e.length>a&&(b=e.at(a))))});
if(!_.isUndefined(b)){var e=b.get("blockUid");if(!_.isUndefined(e)){var a=tdcAdminIFrameUI.getLiveIframe();d=a.contents().find("#"+e);d.length||(d=a.contents().find('[data-td-block-uid="'+e+'"]'));d.length&&(a.contents().scrollTop(d.offset().top-100),e={},tdcOperationUI.inZone(d)?tdcOperationUI.inRow(d)?tdcOperationUI.inColumn(d)?tdcOperationUI.inInnerRow(d)?tdcOperationUI.inInnerColumn(d)?(e.$currentZone=tdcOperationUI.inZone(d),e.$currentRow=tdcOperationUI.inRow(d),e.$currentColumn=tdcOperationUI.inColumn(d),
e.$currentInnerRow=tdcOperationUI.inInnerRow(d),e.$currentInnerColumn=tdcOperationUI.inInnerColumn(d),e.$currentElement=d):(e.$currentZone=tdcOperationUI.inZone(d),e.$currentRow=tdcOperationUI.inRow(d),e.$currentColumn=tdcOperationUI.inColumn(d),e.$currentInnerRow=tdcOperationUI.inInnerRow(d),e.$currentInnerColumn=d):(e.$currentZone=tdcOperationUI.inZone(d),e.$currentRow=tdcOperationUI.inRow(d),e.$currentColumn=tdcOperationUI.inColumn(d),e.$currentInnerRow=d):(e.$currentZone=tdcOperationUI.inZone(d),
e.$currentRow=tdcOperationUI.inRow(d),e.$currentColumn=d):(e.$currentZone=tdcOperationUI.inZone(d),e.$currentRow=d):e.$currentZone=d,tdcSidebar._currentModel=b,d.data("model_id",b.cid),tdcSidebar.setSettings(e,!0,b))}}}}}})();var tdcSidebar;
(function(f,d,b){tdcSidebar={$_sidebar:b,$_editRow:b,$_editColumn:b,$_editInnerRow:b,$_editInnerColumn:b,_currentTabId:b,_currentModel:b,_$currentElement:b,_$currentZone:b,_$currentRow:b,_$currentColumn:b,_$currentInnerRow:b,_$currentInnerColumn:b,$_currentElementHead:b,$_currentElementSiblings:b,$_inspector:b,$_sidebarInfo:b,$_sidebarClosePage:b,$_sidebarBullet:b,$_sidebarClose:b,$_sidebarOpen:b,$_sidebarMenu:b,$_sidebarSearch:b,$_liveIframeWrapper:b,$_iconSelector:b,$_gradient:b,$_gradientLoader:b,
$_palette:b,$_paletteLoader:b,$_fontList:b,editorCss:b,$editorTextarea:b,$_editorCss:b,$_buttonZone:b,_iconSelectorOuterHTML:b,_gradientOuterHTML:b,_paletteOuterHTML:b,_fontListOuterHTML:b,_editorCssOuterHTML:b,_forcedHeaderZone:b,mouseOverSidebar:!1,currentViewportSettings:{name:"all",settings:b},init:function(){tdcSidebar.$_sidebar=f("#tdc-sidebar");tdcSidebar.$_liveIframeWrapper=f("#tdc-live-iframe-wrapper");tdcSidebar.$_editZone=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-zone");tdcSidebar.$_editZone.data("name",
"Zone");tdcSidebar.$_editRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-row");tdcSidebar.$_editRow.data("name","Row");tdcSidebar.$_editColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-column");tdcSidebar.$_editColumn.data("name","Column");tdcSidebar.$_editInnerRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-row");tdcSidebar.$_editInnerRow.data("name","Inner Row");tdcSidebar.$_editInnerColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-column");tdcSidebar.$_editInnerColumn.data("name","Inner Column");
tdcSidebar.$_currentElementHead=tdcSidebar.$_sidebar.find(".tdc-current-element-head:first");tdcSidebar.$_currentElementSiblings=tdcSidebar.$_sidebar.find(".tdc-current-element-siblings:first");tdcSidebar.$_inspector=tdcSidebar.$_sidebar.find(".tdc-inspector:first");tdcSidebar.$_sidebarInfo=tdcSidebar.$_sidebar.find(".tdc-sidebar-info:first");tdcSidebar.$_sidebarClosePage=tdcSidebar.$_sidebar.find(".tdc-close-page:first");tdcSidebar.$_sidebarBullet=tdcSidebar.$_sidebar.find(".tdc-bullet:first");tdcSidebar.$_sidebarClose=
tdcSidebar.$_sidebar.find(".tdc-sidebar-close:first");tdcSidebar.$_sidebarOpen=tdcSidebar.$_sidebar.siblings(".tdc-sidebar-open:first");tdcSidebar.$_sidebarMenu=tdcSidebar.$_sidebar.find(".tdc-main-menu:first");tdcSidebar.$_sidebarSearch=tdcSidebar.$_sidebar.find(".tdc-sidebar-modal-search:first > input");tdcSidebar.$_iconSelector=tdcSidebar.$_sidebar.find("#tdc-icon-selector");tdcSidebar._iconSelectorOuterHTML=tdcSidebar.$_iconSelector.get(0).outerHTML;tdcSidebar.$_gradient=tdcSidebar.$_sidebar.find("#tdc-gradient");
tdcSidebar._gradientOuterHTML=tdcSidebar.$_gradient.get(0).outerHTML;tdcSidebar.$_palette=tdcSidebar.$_sidebar.find("#tdc-palette");tdcSidebar._paletteOuterHTML=tdcSidebar.$_palette.get(0).outerHTML;tdcSidebar._fontListOuterHTML=tdcSidebar.$_sidebar.find("#tdc-font-list").get(0).outerHTML;tdcSidebar.$_editorCss=tdcSidebar.$_sidebar.find("#tdc-editor-css");tdcSidebar._editorCssOuterHTML=tdcSidebar.$_editorCss.get(0).outerHTML;tdcSidebar.$_buttonZone=tdcSidebar.$_sidebar.find(".tdc-zone-button");tdcSidebar.$_tdcZone=
f("#tdc-zone");tdcSidebar.$_headerTemplateZones=tdcSidebar.$_tdcZone.find(".tdc-header-template-zones");tdcSidebar.$_headerTemplateList=tdcSidebar.$_tdcZone.find(".tdc-header-template-list");tdcSidebar.$_footerTemplateList=tdcSidebar.$_tdcZone.find(".tdc-footer-template-list");tdcSidebar.$_headerDesktopTemplateList=tdcSidebar.$_tdcZone.find(".tdc-templates-header-desktop-list");tdcSidebar.$_footerDesktopTemplateList=tdcSidebar.$_tdcZone.find(".tdc-templates-footer-desktop-list");tdcSidebar.$_headerTemplateCurrent=
tdcSidebar.$_tdcZone.find(".tdc-header-template-current");tdcSidebar.$_footerTemplateCurrent=tdcSidebar.$_tdcZone.find(".tdc-footer-template-current");tdcState.isMobileComposer()&&(tdcSidebar.currentViewportSettings={name:"phone",settings:b});window.tdcAdminSettings.tdbHeaderTemplates.forEach(function(a){var c=a.val.replace("tdb_template_","");tdcSidebar.$_headerTemplateList.append('<div class="tdc-template-el '+(c==window.tdcPostSettings.headerTemplateId?"tdb-current":"")+'" data-value="'+a.val+
'"><div class="tdc-template-el-title tdc-template-header-name">'+a.text+'</div><div class="tdc-template-el-global" title="Set as'+(tdcState.isMobileComposer()?" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-header-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')});tdcSidebar.$_headerTemplateList.find(".tdc-template-el").each(function(){var a=f(this),c=a.data("value");
c===window.tdcAdminSettings.options.global_header_template||"no_header"===c&&""===window.tdcAdminSettings.options.global_header_template?a.find(".tdc-template-header-global:first").attr("checked","checked"):(c===window.tdcAdminSettings.options.global_header_template_mobile||"no_header"===c&&""===window.tdcAdminSettings.options.global_header_template_mobile)&&a.find(".tdc-template-header-global:first").attr("checked","checked")});window.tdcAdminSettings.tdbHeaderDesktopTemplates.forEach(function(a){tdcSidebar.$_headerDesktopTemplateList.append('<div class="tdc-template-desktop-el" data-template-id="'+
a.val.replace("tdb_template_","")+'" data-template-type="header"><div class="tdc-template-el-title tdc-template-header-name">'+a.text+"</div></div>")});window.tdcAdminSettings.tdbFooterTemplates.forEach(function(a){var c=a.val.replace("tdb_template_","");tdcSidebar.$_footerTemplateList.append('<div class="tdc-template-el '+(c==window.tdcPostSettings.footerTemplateId?"tdb-current":"")+'" data-value="'+a.val+'"><div class="tdc-template-el-title tdc-template-footer-name">'+a.text+'</div><div class="tdc-template-el-global" title="Set as'+
(tdcState.isMobileComposer()?" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-footer-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')});tdcSidebar.$_footerTemplateList.find(".tdc-template-el").each(function(){var a=f(this),c=a.data("value");c===window.tdcAdminSettings.options.global_footer_template||"no_footer"===c&&""===window.tdcAdminSettings.options.global_footer_template?
a.find(".tdc-template-footer-global:first").attr("checked","checked"):(c===window.tdcAdminSettings.options.global_footer_template_mobile||"no_footer"===c&&""===window.tdcAdminSettings.options.global_footer_template_mobile)&&a.find(".tdc-template-footer-global:first").attr("checked","checked")});window.tdcAdminSettings.tdbFooterDesktopTemplates.forEach(function(a){tdcSidebar.$_footerDesktopTemplateList.append('<div class="tdc-template-desktop-el" data-template-id="'+a.val.replace("tdb_template_","")+
'" data-template-type="footer"><div class="tdc-template-el-title tdc-template-footer-name">'+a.text+"</div></div>")});tdcState.isGlobalHeaderTemplate()?tdcSidebar.$_headerTemplateList.find(".tdc-template-el:first").addClass("tdb-current"):tdcState.isNoHeader()?tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="no_header"]').addClass("tdb-current"):tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getHeaderTemplateId()+'"]').addClass("tdb-current");
tdcSidebar.setCurrentHeaderTemplate();tdcState.isGlobalFooterTemplate()?tdcSidebar.$_footerTemplateList.find(".tdc-template-el:first").addClass("tdb-current"):tdcState.isNoFooter()?tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="no_footer"]').addClass("tdb-current"):tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getFooterTemplateId()+'"]').addClass("tdb-current");tdcSidebar.setCurrentFooterTemplate();tdcSidebar.$_buttonZone.click(function(){tdcMain.getContentModified()?
tdConfirm.showModal("TagDiv Composer detected unsaved changes?",tdcSidebar,function(){tb_remove();window.tdbVueManager.router.push({name:"loadManager"})},b,"Do you want to continue? You can loose that unsaved work. Better save it."):window.tdbVueManager.router.push({name:"loadManager",params:{templateId:window.tdcPostSettings.postId}})});f("body").on("click",".tdc-zone-icon",function(a){a=f(this).parent();var c=a.data("type");tdcSidebar.$_tdcZone.find(".tdc-zone").removeClass("tdc-zone-active");a.addClass("tdc-zone-active");
"tdc_header_desktop_sticky"===c||"tdc_header_mobile_sticky"===c?(tdcIFrameData.activateZone(c,!0,!0),a.addClass("tdc-zone-sticky-active"),a.removeClass("tdc-zone-sticky-inactive"),"tdc_header_desktop_sticky"===c?a.hasClass("tdc-zone-sticky-active")?tdcState.setHeaderSticky():tdcState.unsetHeaderSticky():a.hasClass("tdc-zone-sticky-active")?tdcState.setMobileHeaderSticky():tdcState.unsetMobileHeaderSticky()):tdcIFrameData.activateZone(c,b,!0)}).on("click",".tdc-zone-sticky-info",function(a){a=f(this).parent();
var c=a.data("type");tdcSidebar.$_tdcZone.find(".tdc-zone").removeClass("tdc-zone-active");a.addClass("tdc-zone-active");"tdc_header_desktop_sticky"===c||"tdc_header_mobile_sticky"===c?(a.hasClass("tdc-zone-sticky-inactive")?tdcIFrameData.activateZone(c,!0,!0):tdcIFrameData.activateZone(c,!1),a.toggleClass("tdc-zone-sticky-active"),a.toggleClass("tdc-zone-sticky-inactive"),"tdc_header_desktop_sticky"===c?a.hasClass("tdc-zone-sticky-active")?tdcState.setHeaderSticky():tdcState.unsetHeaderSticky():
a.hasClass("tdc-zone-sticky-active")?tdcState.setMobileHeaderSticky():tdcState.unsetMobileHeaderSticky()):tdcIFrameData.activateZone(c,b,!0)}).find(".tdc-zone").each(function(){var a=f(this),c=a.data("type");if(!d.isUndefined(c))switch(c){case "tdc_header_desktop_sticky":tdcState.isHeaderSticky()?a.addClass("tdc-zone-sticky-active").removeClass("tdc-zone-sticky-inactive"):a.addClass("tdc-zone-sticky-inactive").removeClass("tdc-zone-sticky-active");break;case "tdc_header_mobile_sticky":tdcState.isMobileHeaderSticky()?
a.addClass("tdc-zone-sticky-active").removeClass("tdc-zone-sticky-inactive"):a.addClass("tdc-zone-sticky-inactive").removeClass("tdc-zone-sticky-active")}});f("body").on("click",".tdc-header-template-list .tdc-template-el",function(a){var c=f(this),e=f(a.target);if(e.hasClass("tdc-template-header-name"))tdcSidebar.$_headerTemplateCurrent.html(c.find(".tdc-template-header-name").html()),tdcSidebar.$_headerTemplateList.toggle(),a=c.data("value").replace("tdb_template_",""),tdcSidebar.getHeaderTemplate(a,
{keepGlobalTemplateState:!1,saveHeaderTemplate:!0});else if(e.hasClass("tdc-template-el-global-label"))e.parents(".tdc-template-el-global").addClass("tdc-template-header-global-current"),c.closest(".tdc-header-template-list").find(".tdc-template-el-global").each(function(){f(this).hasClass("tdc-template-header-global-current")||f(this).find(".tdc-template-header-global").removeAttr("checked")}),e.parents(".tdc-template-el-global").removeClass("tdc-template-header-global-current"),e.siblings(".tdc-template-header-global").attr("checked",
"checked"),a={},tdcState.isMobileComposer()?a.global_header_template_mobile="no_header"===c.data("value")?"":c.data("value"):a.global_header_template="no_header"===c.data("value")?"":c.data("value"),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_options","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{options:a}}).done(function(a,b,e){tdcState.isGlobalHeaderTemplate()&&tdcSidebar.getHeaderTemplate(c.data("value").replace("tdb_template_",
""),{keepGlobalTemplateState:!0})}).fail(function(a,c,b){});else if(e.hasClass("tdb-load-mobile-template")){var h=e.data("template-id");d.isUndefined(h)||window.tdbVue.router.push({name:"loadRoute",params:{wp_type:"header",templateType:"Header",assign_mobile_to_template:h.toString(),force_parent_template_type:"header",force_parent_template_name:"header"}})}else e.hasClass("tdb-create-mobile-template")&&(h=e.data("template-id"),tdConfirm.modal({caption:"Create Mobile Template",objectContext:window,
callbackYes:function(){var a=f("#tdb-new-template-name"),c=f("#tdb-copy-content");f.ajax({type:"POST",url:td_ajax_url,data:{action:"tdb_create_mobile_template",template_id:h,template_title:a.val(),template_type:"header",copyContent:c.is(":checked")?"1":"0",_nonce:window.tdb_globals.wpRestNonce},success:function(a,c,g){a=f.parseJSON(a);if("undefined"!==typeof a.mobile_template_id&&(tdConfirm.close(),c=e.closest(".tdb-template-el-mobile-wrap"),c.length&&(g=c.find(".tdb-template-el-mobile:first"),c.find(".tdb-template-el-mobile-btns:first").data("mobile-template-id",
a.mobile_template_id),g.html('<span class="tdb-template-el-mobile-active">Yes</span>')),!d.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject.tdbGetMobileTemplates))){var n;f("#tdb-mobile-templates").length&&(n=document);tdcAdminIFrameUI._liveIframeWindowObject.tdbGetMobileTemplates("header",h,b,b,b,n,a.mobile_template_id)}},error:function(a,c,b){}})},htmlInfoContent:'Enter the mobile template name: <input id="tdb-new-template-name" type="text" value=""onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content"><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"}))}).on("click",".tdc-templates-header-desktop-list .tdc-template-desktop-el",function(a){var c=f(this);tdConfirm.modal({caption:"Create Mobile Header Template",objectContext:tdcSidebar,callbackYes:function(){var a=f("#tdb-new-template-name"),e=c.data("template-id");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/create_mobile_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:a.val(),templateID:e,templateType:"header",copyContent:"1"}}).done(function(c,e,d){console.group("API: td-composer/create_mobile_template");console.log("Status: ",e);console.log("Reply: ",c);console.groupEnd();null===c?(c={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/create_mobile_template",
request:d}},console.log("td-composer/create_mobile_template - ERROR",c),a.siblings("#tdb-modal-notice").text(c.type+": "+c.message).fadeIn(50)):c.error!==b?(console.log("td-composer/create_mobile_template - ERROR",c.error),a.siblings("#tdb-modal-notice").text(c.error).fadeIn(50)):(tb_remove(),window.tdcPostSettings.headerTemplateId=c.mobile_template_id,window.tdcAdminSettings.tdbHeaderTemplates.push({text:c.template_title,val:"tdb_template_"+c.mobile_template_id}),e=tdcSidebar.$_headerTemplateList.find(".tdc-templates-header"),
e.length||(e=tdcSidebar.$_headerTemplateList.find(".tdc-templates-header-desktop")),e.length&&(f('<div class="tdc-template-el" data-value="tdb_template_'+c.mobile_template_id+'"><div class="tdc-template-el-title tdc-template-header-name">'+c.template_title+'</div><div class="tdc-template-el-global" title="Set as mobile Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-header-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>').insertAfter(e),
tdcSidebar.getHeaderTemplate(c.mobile_template_id,{keepGlobalTemplateState:!1,saveHeaderTemplate:!0})))}).fail(function(a,c,e){console.log("td-composer/create_mobile_template - ERROR",{type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/create_mobile_template",request:a}});a.responseText!==b?console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):
console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a,c,e)})},htmlInfoContent:'Enter the template name: <input id="tdb-new-template-name" type="text" value="" onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content" checked disabled><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"})}).on("click",".tdc-templates-footer-desktop-list .tdc-template-desktop-el",function(a){var c=f(this);tdConfirm.modal({caption:"Create Mobile Footer Template",objectContext:tdcSidebar,callbackYes:function(){var a=f("#tdb-new-template-name"),e=c.data("template-id");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/create_mobile_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:a.val(),templateID:e,templateType:"footer",copyContent:"1"}}).done(function(c,e,d){console.group("API: td-composer/create_mobile_template");console.log("Status: ",e);console.log("Reply: ",c);console.groupEnd();null===c?(c={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/create_mobile_template",
request:d}},console.log("td-composer/create_mobile_template - ERROR",c),a.siblings("#tdb-modal-notice").text(c.type+": "+c.message).fadeIn(50)):c.error!==b?(console.log("td-composer/create_mobile_template - ERROR",c.error),a.siblings("#tdb-modal-notice").text(c.error).fadeIn(50)):(tb_remove(),window.tdcPostSettings.footerTemplateId=c.mobile_template_id,window.tdcAdminSettings.tdbFooterTemplates.push({text:c.template_title,val:"tdb_template_"+c.mobile_template_id}),e=tdcSidebar.$_footerTemplateList.find(".tdc-templates-header"),
e.length||(e=tdcSidebar.$_footerTemplateList.find(".tdc-templates-header-desktop")),e.length&&f('<div class="tdc-template-el" data-value="tdb_template_'+c.mobile_template_id+'"><div class="tdc-template-el-title tdc-template-footer-name">'+c.template_title+'</div><div class="tdc-template-el-global" title="Set as mobile Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-footer-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>').insertAfter(e),
tdcSidebar.getFooterTemplate(c.mobile_template_id,{keepGlobalTemplateState:!1,saveFooterTemplate:!0}))}).fail(function(a,c,e){console.log("td-composer/create_mobile_template - ERROR",{type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/create_mobile_template",request:a}});a.responseText!==b?console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):
console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a,c,e)})},htmlInfoContent:'Enter the template name: <input id="tdb-new-template-name" type="text" value="" onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content" checked disabled><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"})}).on("click",".tdc-header-template-current",function(a){tdcSidebar.$_headerTemplateList.toggle()}).on("click","#tdb-mobile-templates .tdb-template-el-mobile-list-el",function(a){a=f(this);var c=f("#tdb-mobile-templates"),b=a.data("template-id"),e=a.data("mobile-template-id"),n=c.closest(".tdb-template-el-mobile-btns"),l=a.closest(".tdb-template-el-mobile-wrap");f.ajax({type:"POST",url:td_ajax_url,data:{action:"tdb_set_mobile_template",template_id:b,mobile_template_id:e,
_nonce:window.tdb_globals.wpRestNonce},success:function(a,b,g){a=f.parseJSON(a);d.isObject(a)&&!d.isUndefined(a.result)&&1===a.result&&(n.data("mobile-template-id",e),c.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),c.find('.tdb-template-el-mobile-list-el[data-mobile-template-id="'+e+'"]').addClass("tdb-current"),l.length&&(a=l.find(".tdb-template-el-mobile:first"),""===e?a.html("-"):a.html('<span class="tdb-template-el-mobile-active">Yes</span>')))}})}).on("mouseenter",".tdb-template-el-mobile-btns",
function(a){var c=f(this),b=c.data("mobile-template-id"),e=c.data("template-id");a=f("#tdb-mobile-templates");a.length?(a.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),a.find(".tdb-template-el-mobile-list-el").data("template-id",e),a.find('.tdb-template-el-mobile-list-el[data-mobile-template-id="'+b+'"]').addClass("tdb-current"),a.appendTo(c).show()):(window.tdcIntervalCheckMobileTemplates=setInterval(function(){var a=f("#tdb-mobile-templates");a.length&&(a.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),
a.find(".tdb-template-el-mobile-list-el").data("template-id",e),a.find('.tdb-template-el-mobile-list-el[data-mobile-template-id="'+b+'"]').addClass("tdb-current"),a.appendTo(c).show(),clearTimeout(window.tdcTimeoutCheckMobileTemplates),clearInterval(window.tdcIntervalCheckMobileTemplates))},100),window.tdcTimeoutCheckMobileTemplates=setTimeout(function(){clearInterval(window.tdcIntervalCheckMobileTemplates)},3E3))}).on("mouseleave",".tdb-template-el-mobile-btns",function(a){a=f(".tdb-templates");
var c=f("#tdb-mobile-templates");c.length&&(c.hide(),c.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),c.insertBefore(a));clearTimeout(window.tdcTimeoutCheckMobileTemplates);clearInterval(window.tdcIntervalCheckMobileTemplates)}).on("click",".tdc-footer-template-list .tdc-template-el",function(a){var c=f(this);a=f(a.target);a.hasClass("tdc-template-footer-name")?(tdcSidebar.$_footerTemplateCurrent.html(c.find(".tdc-template-footer-name").html()),tdcSidebar.$_footerTemplateList.toggle(),
a=c.data("value").replace("tdb_template_",""),tdcSidebar.getFooterTemplate(a,{keepGlobalTemplateState:!1,saveFooterTemplate:!0})):a.hasClass("tdc-template-el-global-label")&&(a.parents(".tdc-template-el-global").addClass("tdc-template-footer-global-current"),c.closest(".tdc-footer-template-list").find(".tdc-template-el-global").each(function(){f(this).hasClass("tdc-template-footer-global-current")||f(this).find(".tdc-template-footer-global").removeAttr("checked")}),a.parents(".tdc-template-el-global").removeClass("tdc-template-footer-global-current"),
a.siblings(".tdc-template-footer-global").attr("checked","checked"),a={},tdcState.isMobileComposer()?a.global_footer_template_mobile="no_footer"===c.data("value")?"":c.data("value"):a.global_footer_template="no_footer"===c.data("value")?"":c.data("value"),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_options","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{options:a}}).done(function(a,
b,e){tdcState.isGlobalHeaderTemplate()&&tdcSidebar.getFooterTemplate(c.data("value").replace("tdb_template_",""),{keepGlobalTemplateState:!0})}).fail(function(a,c,b){}))}).on("click",".tdc-footer-template-current",function(a){tdcSidebar.$_footerTemplateList.toggle()}).on("click","#tdb-template-mobile",function(a){a.preventDefault();var c=f(this);a=c.data("mobile-template-id");var e=c.data("mobile-template-url"),h=f("#tdb-template-name");d.isUndefined(a)||d.isUndefined(e)?tdConfirm.modal({caption:"Create Mobile "+
("page"===window.tdcPostSettings.tdbTemplateType?"Page":"Template"),objectContext:tdcSidebar,callbackYes:function(){var a=f("#tdb-new-template-name"),e=f("#tdc_post_id").val(),g=window.tdcPostSettings.tdbTemplateType,h=f("#tdb-copy-content");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/create_mobile_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},
500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:a.val(),templateID:e,templateType:g,copyContent:h.is(":checked")?"1":"0"}}).done(function(e,g,f){console.group("API: td-composer/create_mobile_template");console.log("Status: ",g);console.log("Reply: ",e);console.groupEnd();null===e?(e={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/create_mobile_template",request:f}},console.log("td-composer/create_mobile_template - ERROR",
e),a.siblings("#tdb-modal-notice").text(e.type+": "+e.message).fadeIn(50)):e.error!==b?(console.log("td-composer/create_mobile_template - ERROR",e.error),a.siblings("#tdb-modal-notice").text(e.error).fadeIn(50)):(tb_remove(),d.isUndefined(e.mobile_template_url)||(window.open(e.mobile_template_url,"_blank"),c.html("Edit mobile template")),d.isUndefined(e.mobile_template_id)||d.isUndefined(e.mobile_template_url)||(c.html("Edit mobile template"),c.data("mobile-template-id",e.mobile_template_id),c.data("mobile-template-url",
e.mobile_template_url)))}).fail(function(a,c,e){console.log("td-composer/create_mobile_template - ERROR",{type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/create_mobile_template",request:a}});a.responseText!==b?console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px",
"Error - check for php warnings:",a,c,e)})},htmlInfoContent:"Enter the mobile "+("page"===window.tdcPostSettings.tdbTemplateType?"page":"template")+' name: <input id="tdb-new-template-name" type="text" value="'+h.text()+' - mobile " onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content"><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"}):tdConfirm.modal({caption:"Edit Mobile Template",objectContext:tdcSidebar,callbackYes:function(){tb_remove();window.open(e,"_blank")},callbackNo:function(){tb_remove()},htmlInfoContent:"Do you want to edit mobile template?",textYes:"Yes",textNo:"No"})});tdcSidebar.$_editZone.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone()})}).mouseenter(function(a){d.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),
tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentZone)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentZone)}).mouseleave(function(a){tdcMaskUI.hide()});tdcSidebar.$_editRow.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow()})}).mouseenter(function(a){d.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentRow)||
tdcMaskUI.setCurrentContainer(tdcSidebar._$currentRow)}).mouseleave(function(a){tdcMaskUI.hide()});tdcSidebar.$_editColumn.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn()})}).mouseenter(function(a){d.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentColumn)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentColumn)}).mouseleave(function(a){tdcMaskUI.hide()});
tdcSidebar.$_editInnerRow.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow()})}).mouseenter(function(a){d.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentInnerRow)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerRow)}).mouseleave(function(a){tdcMaskUI.hide()});
tdcSidebar.$_editInnerColumn.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn()})}).mouseenter(function(a){d.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentInnerColumn)||
tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerColumn)}).mouseleave(function(a){tdcMaskUI.hide()});f(".tdc-sidebar-element").each(function(a,c){tdcSidebar._bindElement(f(c))});tdcSidebar.$_sidebarClosePage.click(function(a){var c=window.tdcAdminSettings.previousUrl.split("#");!tdcSidebar.$_sidebarClosePage.hasClass("tdb-close-page")&&tdcMain.getContentModified()?tdConfirm.showModal("Close tagDiv Composer?",tdcSidebar,function(){window.onbeforeunload=null;window.location=c[0];tb_remove()},
b,"Unsaved content. Still want to close tagDiv Composer?"):(window.onbeforeunload=null,window.location=c[0])});"1"===window.localStorage.getItem("tdc_live_iframe_wrapper_inline")&&(tdcMain.setSidebarInline(),tdcSidebar.$_sidebar.addClass("tdc-sidebar-inline"),tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-inline").removeClass("tdc-live-iframe-wrapper-full"));tdcSidebar.$_sidebarBullet.click(function(a){tdcSidebar.$_sidebar.toggleClass("tdc-sidebar-inline");tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");
tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")?(tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"),tdcMain.setSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",1)):(tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full"),tdcMain.resetSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",0))});tdcSidebar.$_sidebarClose.click(function(a){tdcSidebar.$_sidebar.addClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.addClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.setSidebarHidden()});tdcSidebar.$_sidebarOpen.click(function(a){tdcSidebar.$_sidebar.removeClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.removeClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.resetSidebarHidden()});tdcSidebar.$_sidebarMenu.click(function(a){f(this).toggleClass("tdc-window-open");
f(".tdc-sidebar-modal").each(function(a,b){a=f(b);b=a.data("button_class");a.hasClass("tdc-sidebar-modal-menu")?a.toggleClass("tdc-modal-open"):(a.removeClass("tdc-modal-open"),"undefined"!==typeof b&&""!==b&&(a=f("."+b),a.length&&a.removeClass("tdc-window-open")))})});tdcSidebar.$_sidebarSearch.keyup(function(a){var c=f(this);f(".tdc-sidebar-element").each(function(a,b){a=f(b);-1===a.find(".tdc-element-id").html().toLowerCase().indexOf(c.val().trim().toLowerCase())?a.hide():a.show()});f(".tdc-sidebar-separator").each(function(a,
c){a=f(c);a.nextUntil(".tdc-sidebar-separator").is(":visible")?a.show():a.hide()})});tdcSidebar.$_sidebar.on("mouseenter",function(){tdcSidebar.mouseOverSidebar=!0}).on("mouseleave",function(){tdcSidebar.mouseOverSidebar=!1});f("body").css("overflow","hidden");tdcSidebar._sidebarModal();tdcSidebar._liveInspectorTabs();tdcSidebar.updateSavedShortcodes();tdcSidebar.editTemplateName();if(tdcState.isMobileComposer()){var e=f("#tdc-live-iframe");e.length&&(e.removeClass("tdc-responsive-all").addClass("tdc-responsive-phone").css({width:392}),
tdcSidebar.currentViewportSettings={name:"phone",settings:{limitTop:392,limitBottom:b}},tdcSidebar.setIframeClass("tdc-responsive-phone"))}tdcSidebarPanel.init()},setCurrentHeaderTemplate:function(){tdcState.isMobileComposer();tdcState.isGlobalHeaderTemplate()?tdcSidebar.$_headerTemplateCurrent.html(tdcSidebar.$_headerTemplateList.find('div[data-value=""] .tdc-template-header-name').html()):tdcState.isNoHeader()?tdcSidebar.$_headerTemplateCurrent.html(tdcSidebar.$_headerTemplateList.find('div[data-value="no_header"] .tdc-template-header-name').html()):
tdcSidebar.$_headerTemplateCurrent.html(tdcSidebar.$_headerTemplateList.find('div[data-value="tdb_template_'+tdcState.getHeaderTemplateId()+'"] .tdc-template-header-name').html())},setCurrentFooterTemplate:function(){tdcState.isGlobalFooterTemplate()?tdcSidebar.$_footerTemplateCurrent.html(tdcSidebar.$_footerTemplateList.find('div[data-value=""] .tdc-template-footer-name').html()):tdcState.isNoFooter()?tdcSidebar.$_footerTemplateCurrent.html(tdcSidebar.$_footerTemplateList.find('div[data-value="no_footer"] .tdc-template-footer-name').html()):
tdcSidebar.$_footerTemplateCurrent.html(tdcSidebar.$_footerTemplateList.find('div[data-value="tdb_template_'+tdcState.getFooterTemplateId()+'"] .tdc-template-footer-name').html())},hideWpeditor:function(){f("#tdc-wpeditor").hide()},setForcedHeaderZone:function(b){tdcSidebar._forcedHeaderZone=b},getForcedHeaderZone:function(){return tdcSidebar._forcedHeaderZone},changeZoneName:function(b){var a="CUSTOM";switch(b){case "tdc_content":a="CONTENT";break;case "tdc_header_desktop":a="HEADER MENU";break;
case "tdc_header_desktop_sticky":a="HEADER MENU STICKY";break;case "tdc_header_mobile":a="MOBILE MENU";break;case "tdc_header_mobile_sticky":a="MOBILE MENU STICKY";break;case "tdc_footer":a="FOOTER"}tdcSidebar.$_editZone.find("a").html(a)},_activeBreadcrumbItem:function(){var b=tdcSidebar.getCurrentModel(),a=b.get("tag"),c=tdcIFrameData.getZoneParent(b).get("type_zone"),g="<span>"+window.tdcPostSettings.shortcodes[b.get("tag")]+"</span>",h="";tdcSidebar.changeZoneName(c);for(var n in window.tdcAdminSettings.mappedShortcodes)"undefined"===
typeof window.tdcAdminSettings.mappedShortcodes[n].tdc_category||"Blocks"!==window.tdcAdminSettings.mappedShortcodes[n].tdc_category&&"Big Grids"!==window.tdcAdminSettings.mappedShortcodes[n].tdc_category||window.tdcAdminSettings.mappedShortcodes[n].tdc_category!==window.tdcAdminSettings.mappedShortcodes[a].tdc_category||(c="",n===a&&(c="tdc-selected-option"),h+='<li class="'+c+'" data-block_type="'+window.tdcAdminSettings.mappedShortcodes[n].base+'"><div class="tdc-element-ico tdc-ico-'+window.tdcAdminSettings.mappedShortcodes[n].base+
'"></div><div class="tdc-element-id">'+window.tdcAdminSettings.mappedShortcodes[n].name+"</div></li>");""!==h?(h="<ul>"+h+"</ul>",tdcSidebar.$_currentElementHead.addClass("tdc-block-selection")):tdcSidebar.$_currentElementHead.removeClass("tdc-block-selection");switch(a){case "tdc_zone":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.hide();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();var l=tdcSidebar.$_editZone;break;case "vc_row":tdcSidebar.$_editZone.show();
tdcSidebar.$_editRow.hide();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();l=tdcSidebar.$_editRow;break;case "vc_column":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();l=tdcSidebar.$_editColumn;break;case "vc_row_inner":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.hide();
tdcSidebar.$_editInnerColumn.hide();l=tdcSidebar.$_editInnerRow;break;case "vc_column_inner":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.show();tdcSidebar.$_editInnerColumn.hide();l=tdcSidebar.$_editInnerColumn;break;default:tdcSidebar.$_editZone.show(),tdcSidebar.$_editRow.show(),tdcSidebar.$_editColumn.show(),l=tdcSidebar.getCurrentElement(),"vc_column_inner"===b.get("parentModel").get("tag")?(tdcSidebar.$_editInnerRow.show(),
tdcSidebar.$_editInnerColumn.show()):(tdcSidebar.$_editInnerRow.hide(),tdcSidebar.$_editInnerColumn.hide())}tdcSidebar.$_currentElementHead.html(g);tdcSidebar.$_currentElementSiblings.html(h);tdcSidebar.$_sidebar.find(".tdc-responsiveness").addClass(a);tdcSidebar.$_currentElementHead.off().mouseenter(function(a){a.preventDefault();l.trigger(a)}).mouseleave(function(a){a.preventDefault();l.trigger(a)}).mousedown(function(a){""!==h&&(tdcSidebar.$_currentElementSiblings.toggleClass("tdc-current-element-siblings-visible"),
a=f(this),tdcSidebar.$_currentElementSiblings.hasClass("tdc-current-element-siblings-visible")?a.addClass("tdc-current-element-siblings-button-on"):a.removeClass("tdc-current-element-siblings-button-on"))});tdcSidebar.$_currentElementSiblings.find("li").off().click(function(a){a=f(this);var c=a.data("block_type"),e=a.children(".tdc-element-id").html();a.siblings(".tdc-selected-option").removeClass("tdc-selected-option");a.addClass("tdc-selected-option");tdcSidebar.$_currentElementHead.html("<span>"+
e+"</span>");d.isUndefined(c)||(b.set("tag",c),b.set("rebindToPanel",!0),tdcSidebarController.onUpdate(b));tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});tdcSidebar.$_currentElementSiblings.mouseleave(function(a){tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});tdcSidebar.$_inspector.show()},closeModals:function(){f(".tdc-sidebar-modal").each(function(b,a){b=f(a);a=b.data("button_class");b.removeClass("tdc-modal-open");
"undefined"!==typeof a&&""!==a&&(b=f("."+a),b.length&&b.removeClass("tdc-window-open"))})},_sidebarModal:function(){f(".tdc-add-element").click(function(){f(this).toggleClass("tdc-window-open");f(".tdc-sidebar-modal").each(function(b,a){b=f(a);a=b.data("button_class");b.hasClass("tdc-sidebar-modal-elements")?(b.toggleClass("tdc-modal-open"),setTimeout(function(){var a=f(".tdc-sidebar-modal-search > input");a.focus();a.val("");f(".tdc-sidebar-element").each(function(a,c){f(c).show()})},100)):(b.removeClass("tdc-modal-open"),
"undefined"!==typeof a&&""!==a&&(b=f("."+a),b.length&&b.removeClass("tdc-window-open")))})})},_bindElement:function(b){b.click(function(a){a.preventDefault()}).mousedown(function(a){if(1===a.which){if("td_block_homepage_full_1"===b.data("shortcode-name")){var c=tdcIFrameData.getFirstModelByTag("td_block_homepage_full_1");if(!d.isUndefined(c)){new tdcNotice.notice("td_block_homepage_full_1 este deja in pagina",!1,!0);return}}a.preventDefault();tdcOperationUI.activeDraggedElement(b);tdcOperationUI.showHelper(a)}}).mouseup(function(a){tdcOperationUI.isSidebarElementDragged()&&
(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper())})},_liveInspectorTabs:function(){f("body").on("click",".tdc-tabs a",function(){var b=f(this);tdcSidebar._setCurrentTabId(b.data("tab-id"));b.hasClass("tdc-tab-active")||(f(".tdc-tabs a").removeClass("tdc-tab-active"),b.addClass("tdc-tab-active"),f(".tdc-tab-content-wrap .tdc-tab-content").removeClass("tdc-tab-content-visible"),b=b.data("tab-id"),f("#"+b).addClass("tdc-tab-content-visible"))});f("body").on("click",
".tdc-responsive-buttons > div",function(e){e=f(this);e.addClass("selected");e.siblings().removeClass("selected");var a="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;var c=tdcAdminIFrameUI.getLiveIframe();if(!d.isUndefined(c))var g=c.contents().find(".tdc-element-selected").offset().top-c.contents().scrollTop();d.isUndefined(tdcCssEditor.timeoutContentWidth)||clearTimeout(tdcCssEditor.timeoutContentWidth);
var h="",n=0;e.hasClass("tdc-responsive-all")?(tdcSidebar.currentViewportSettings={name:"all",settings:b},tdcState.isMobileComposer()?d.isUndefined(c)||(h=768,tdcSidebar.setIframeClass("tdc-responsive-tablet-portrait")):d.isUndefined(c)||(c.css("width","100%"),tdcSidebar.setIframeClass("tdc-responsive-all"))):e.hasClass("tdc-responsive-tablet-landscape")?(tdcSidebar.currentViewportSettings={name:"landscape",settings:{limitTop:a[2].limitBottom,limitBottom:parseInt(a[1].limitBottom)+1}},d.isUndefined(c)||
(h=1024,tdcSidebar.setIframeClass("tdc-responsive-tablet-landscape"))):e.hasClass("tdc-responsive-tablet-portrait")?(tdcSidebar.currentViewportSettings={name:"portrait",settings:{limitTop:a[1].limitBottom,limitBottom:parseInt(a[0].limitBottom)+1}},d.isUndefined(c)||(h=768,tdcSidebar.setIframeClass("tdc-responsive-tablet-portrait"))):e.hasClass("tdc-responsive-phone")&&(tdcSidebar.currentViewportSettings={name:"phone",settings:{limitTop:a[0].limitBottom,limitBottom:b}},d.isUndefined(c)||(h=375,tdcSidebar.setIframeClass("tdc-responsive-phone")));
""!==h&&(c.css("width",h),tdcCssEditor.timeoutContentWidth=setTimeout(function(){var a=c.contents().width();a!==h&&a<h&&(n=h-a,c.css("width",h+n))},100));"dev"===window.tdcAdminSettings.deployMode&&tdcCssEditor.setMediaInterval(h,n);f(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent());tdcSidebarPanel._hook.doAction("panel_css");if(!d.isUndefined(c)){e=c.contents().find(".tdc-element-selected");if(!e.length)return;e=e.offset().top;e=0<g?window.innerHeight>g?e-g:e-100:
e-100;c.contents().scrollTop(e)}"all"===tdcSidebar.currentViewportSettings.name?f(".tdc-tab-content-wrap").removeClass("tdc-viewport-responsive"):f(".tdc-tab-content-wrap").addClass("tdc-viewport-responsive");f(".tdc-tab-content-wrap .tdc-property-responsive").each(function(){var a=f(this).find("[data-responsive]");tdcSidebarPanel.setViewportCurrentResponsiveValue(a)});setTimeout(function(){tdcIFrameData.addDummyContent();var a=c.contents().find(".td_block_wrap");window.checkTdBlockWrap(a)},100)});
f("body").on("change, keyup",'.tdc-search input[type="text"]',function(b){b=f(this);var a=f(".tdc-inspector"),c=a.find(".tdc-tab-content-wrap");a.find(".tdc-search-notice").remove();a.find(".tdc-tab-search-notice").hide();var e=b.val().trim().toLowerCase();2<e.length&&c.find(".tdc-search-data").each(function(c,b){c=f(b);b=c.text();!d.isUndefined(b)&&0<=b.toLowerCase().indexOf(e)&&(b="tdc-search-notice",c.hasClass("tdc-search-notice-font")&&(b+=" tdc-search-notice-font"),f('<div class="'+b+'"></div>').insertBefore(c.closest(".tdc-property-wrap")),
c=c.closest(".tdc-tab-content").attr("id"),a.find('.tdc-tabs a[data-tab-id="'+c+'"] .tdc-tab-search-notice').show())})})},setIframeClass:function(b){var a=["tdc-responsive-all","tdc-responsive-tablet-landscape","tdc-responsive-tablet-portrait","tdc-responsive-phone"];if(-1!==a.indexOf(b)){var c=tdcAdminIFrameUI.getLiveIframe();c.addClass(b);a.forEach(function(a){a!==b&&c.removeClass(a)})}},_setCurrentTabId:function(b){tdcSidebar._currentTabId=b},getCurrentTabId:function(){return tdcSidebar._currentTabId},
_setCurrentElement:function(b){tdcSidebar._$currentElement=b},getCurrentElement:function(){return tdcSidebar._$currentElement},_setCurrentZone:function(b){tdcSidebar._$currentZone=b},getCurrentZone:function(){return tdcSidebar._$currentZone},_setCurrentRow:function(b){tdcSidebar._$currentRow=b},getCurrentRow:function(){return tdcSidebar._$currentRow},_setCurrentColumn:function(b){tdcSidebar._$currentColumn=b},getCurrentColumn:function(){return tdcSidebar._$currentColumn},_setCurrentInnerRow:function(b){tdcSidebar._$currentInnerRow=
b},getCurrentInnerRow:function(){return tdcSidebar._$currentInnerRow},_setCurrentInnerColumn:function(b){tdcSidebar._$currentInnerColumn=b},getCurrentInnerColumn:function(){return tdcSidebar._$currentInnerColumn},setSidebarInfo:function(b){tdcSidebar.$_sidebarInfo.html(b)},getCurrentModel:function(){return tdcSidebar._currentModel},setSettings:function(e,a,c,f){if(d.isUndefined(tdcSidebar._currentModel)||d.isUndefined(c)||tdcSidebar._currentModel===c)d.isUndefined(tdcSidebar._currentModel)||tdcSidebar._currentModel.set("current",
!1),d.isUndefined(e)?(tdcSidebar._setCurrentZone(b),tdcSidebar._setCurrentRow(b),tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=b):d.has(e,"$currentZone")&&!d.isUndefined(e.$currentZone)?(tdcSidebar._setCurrentZone(e.$currentZone),d.has(e,"$currentRow")&&!d.isUndefined(e.$currentRow)?(tdcSidebar._setCurrentRow(e.$currentRow),d.has(e,"$currentColumn")&&!d.isUndefined(e.$currentColumn)?
(tdcSidebar._setCurrentColumn(e.$currentColumn),d.has(e,"$currentInnerRow")&&!d.isUndefined(e.$currentInnerRow)?(tdcSidebar._setCurrentInnerRow(e.$currentInnerRow),d.has(e,"$currentInnerColumn")&&!d.isUndefined(e.$currentInnerColumn)?(tdcSidebar._setCurrentInnerColumn(e.$currentInnerColumn),d.has(e,"$currentElement")&&!d.isUndefined(e.$currentElement)?(tdcSidebar._setCurrentElement(e.$currentElement),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentElement.data("model_id"))):(tdcSidebar._setCurrentElement(b),
tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentInnerColumn.data("model_id")))):(tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentInnerRow.data("model_id")))):(tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),d.has(e,"$currentElement")&&!d.isUndefined(e.$currentElement)?(tdcSidebar._setCurrentElement(e.$currentElement),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentElement.data("model_id"))):
(tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentColumn.data("model_id"))))):(tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentRow.data("model_id")))):(tdcSidebar._setCurrentRow(b),tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),
tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentZone.data("model_id")))):(tdcSidebar._setCurrentZone(b),tdcSidebar._setCurrentRow(b),tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=b),d.isUndefined(tdcSidebar._currentModel)?tdcSidebarPanel.clearPanel():(tdcSidebar._currentModel.set("current",!0),tdcSidebarPanel.bindPanelToModel(tdcSidebar._currentModel,a),tdcSidebar._activeBreadcrumbItem(),
tdcSidebar.closeModals(),d.isUndefined(f)||d.isUndefined(f.callback)||(d.isUndefined(f.callbackContext)?f.callback.call(this):f.callback.call(f.callbackContext)))},buildGradient:function(){tdcSidebar.$_gradient=f(tdcSidebar._gradientOuterHTML).appendTo(tdcSidebar.$_sidebar);tdcSidebar.$_gradient.find("#tdc-gradient-color-picker").tdGradient();console.log("gradient");return tdcSidebar.$_gradient},buildPalette:function(){tdcSidebar.$_palette=f(tdcSidebar._paletteOuterHTML).appendTo(tdcSidebar.$_sidebar);
tdcSidebar.$_palette.find("#tdc-palette-color-picker").tdPalette();return tdcSidebar.$_palette},buildFontList:function(){tdcSidebar.$_fontList=f(tdcSidebar._fontListOuterHTML).appendTo(tdcSidebar.$_sidebar);tdcSidebar.$_fontList.html("");"undefined"!==typeof modelId&&"undefined"!==typeof mappedParameter&&""!==window.tdcAdminSettings.tdcSavings&&"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts&&d.map(window.tdcAdminSettings.tdcSavings.fonts,function(b){f('<div class="tdc-font-settings" data-value="'+
b.value+'" data-model_id="'+modelId+'" data-param_name="'+mappedParameter+'">'+b.name+'<span class="tdc-font-delete">X</span></div>').appendTo(tdcSidebar.$_fontList)});return tdcSidebar.$_fontList},buildEditorCss:function(){tdcSidebar.$_sidebar.find("#tdc-editor-css").length||(tdcSidebar.$_editorCss=f(tdcSidebar._editorCssOuterHTML).appendTo(tdcSidebar.$_sidebar),tdcSidebar.editorCss=b);"undefined"===typeof tdcSidebar.cssEditor&&(tdcSidebar.editorCss=ace.edit("tdc-editor-css"),tdcSidebar.editorCss.$blockScrolling=
Infinity,tdcSidebar.editorCss.getSession().on("change",function(){var b=tdcSidebar.editorCss.getSession().getValue();less.render(b,function(a,c){"undefined"===typeof c?tdcSidebar.$editorTextarea.val(tdcSidebar.editorCss.getSession().getValue()):(tdcSidebar.$editorTextarea.val(c.css),tdcSidebarController.onUpdate(tdcIFrameData.getModel(tdcSidebar.$editorTextarea.data("model_id")),tdcSidebar.$editorTextarea.data("param_name"),"",window.btoa(encodeURIComponent(c.css))))})}),tdcSidebar.editorCss.setTheme("ace/theme/textmate"),
tdcSidebar.editorCss.setShowPrintMargin(!1),tdcSidebar.editorCss.getSession().setMode("ace/mode/less"),tdcSidebar.editorCss.getSession().setUseWrapMode(!0),tdcSidebar.editorCss.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!1}));return tdcSidebar.$_editorCss},buildIconSelector:function(){tdcSidebar.$_iconSelector=f(tdcSidebar._iconSelectorOuterHTML).appendTo(tdcSidebar.$_sidebar);return tdcSidebar.$_iconSelector},updateSavedShortcodes:function(){var b=f(".tdc-sidebar-saved-shortcodes");
b.nextAll().remove();if("undefined"!==typeof window.tdcAdminSettings.tdcSavings&&""!==window.tdcAdminSettings.tdcSavings&&d.intersection(d.keys(window.tdcAdminSettings.tdcSavings),d.keys(window.tdcAdminSettings.mappedShortcodes)).length){b.show();var a="";d.each(tdcAdminSettings.tdcSavings,function(c,b,e){if(c.length&&"gradients"!==b&&"fonts"!==b){var f="",g="",h=!1,n=!1;"vc_row"===b?(f="tdc-row-temp",g=' data-shortcode-name="vc_row" ',h=!0):"vc_row_inner"===b?(f="tdc-element-inner-row-temp",g=' data-shortcode-name="vc_row_inner" ',
h=!0):(f="tdc-element",g=' data-shortcode-name="'+b+'" ',n=!0);d.isUndefined(window.tdcAdminSettings.mappedShortcodes[b])||(a+='<div class="tdc-sidebar-separator tdc-sidebar-text-separator"><span>'+window.tdcAdminSettings.mappedShortcodes[b].name+"</span></div>",d.each(c,function(c,e,l){l=e="";h&&(l=c.shortcode,l=window.atob(l),l=' data-template-content="'+window.btoa(l)+'" ');n&&(tdcIFrameData._getPostOriginalContentJSON(),e=tdcIFrameData._getContentJSON(5,window.atob(c.shortcode)),d.isUndefined(e[0].shortcode.content)||
(e[0].shortcode.attrs.named.content=e[0].shortcode.content),e=' data-start-values="'+window.btoa(JSON.stringify([e[0].shortcode.attrs.named]))+'" ');a+='<div class="tdc-sidebar-element '+f+'" '+g+" "+l+" "+e+'><div class="tdc-element-ico tdc-ico-template"></div><div class="tdc-element-id">'+c.name+' - template</div><div class="tdc-element-delete" data-type="'+b+'" data-name="'+c.name+'"></div></div>'}))}});if(""!==a){var c=f(a);c.insertAfter(b);c.find(".tdc-element-delete").on("mousedown",function(a){a.preventDefault();
a.stopImmediatePropagation()}).on("mouseup",function(a){if(1===a.which){var c=f(this);a=c.data("type");c=c.data("name");if("undefined"!==typeof window.tdcAdminSettings.tdcSavings[a])for(var b=window.tdcAdminSettings.tdcSavings[a],e=0;e<b.length;e++)if(b[e].name===c.toString()){b.splice(e,1);b.length||delete window.tdcAdminSettings.tdcSavings[a];tdcUtil.updateTdcSavings();break}return!1}});b.nextAll(".tdc-sidebar-element").each(function(a,c){tdcSidebar._bindElement(f(c))})}}else b.hide()},editTemplateName:function(){f("#tdb-template-name-edit").click(function(e){e.preventDefault();
var a=f("#tdb-template-name");tdConfirm.modal({caption:"Change Template Name",objectContext:tdcSidebar,callbackYes:function(){var c=f("#tdb-new-template-name"),e=f("#tdc_post_id").val(),d=window.tdcPostSettings.tdbTemplateType;a.text()!==c.val()?f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/change_template_name","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},
500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:c.val(),templateID:e,templateType:d}}).done(function(e,d,f){console.group("API: td-composer/change_template_name");console.log("Status: ",d);console.log("Reply: ",e);console.groupEnd();null===e?(e={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/change_template_name",request:f}},console.log("td-composer/change_template_name - ERROR",e),c.siblings("#tdb-modal-notice").text(e.type+
": "+e.message).fadeIn(50)):e.error!==b?(console.log("td-composer/change_template_name - ERROR",e.error),c.siblings("#tdb-modal-notice").text(e.error).fadeIn(50)):(tb_remove(),a.text(e.template_title))}).fail(function(a,e,d){var f={type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/change_template_name",request:a}};console.log("td-composer/change_template_name - ERROR",f);c.siblings("#tdb-modal-notice").text(f.type+": "+f.message).fadeIn(50);a.responseText!==
b?console.log("%cAPI ERROR td-composer/change_template_name","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):console.log("%cAPI ERROR td-composer/change_template_name","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a,e,d)}):tb_remove()},htmlInfoContent:'Enter the template name: <input id="tdb-new-template-name" type="text" value="'+a.text()+'" onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em>',
textYes:"Save",textNo:"Cancel"})})},updateHeaderTemplates:function(){tdcSidebar.$_headerTemplateList.find(".tdc-template-el").each(function(b){b=f(this);var a=b.data("value");""!==a&&"no_header"!==a&&b.remove()});f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_header_templates","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{mobile_templates:tdcState.isMobileComposer()?"1":""}}).done(function(b,
a,c){f(".tdc-save-page").removeClass("tdc-saving-loader");"success"===a&&d.isObject(b)&&(d.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):d.has(b,"tdb_header_templates")&&(b.tdb_header_templates.forEach(function(a){tdcSidebar.$_headerTemplateList.find('div[data-value="tdb_template_'+a.id+'"]').length||tdcSidebar.$_headerTemplateList.append('<div class="tdc-template-el" data-value="tdb_template_'+a.id+'"><div class="tdc-template-el-title tdc-template-header-name">'+a.title+'</div><div class="tdc-template-el-global" title="Set as'+
(tdcState.isMobileComposer()?" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-header-global" '+("1"===a.is_global_template?'checked="checked"':"")+' ><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')}),tdcSidebar.setCurrentHeaderTemplate(),tdcSidebar.$_headerTemplateList.find(".tdc-template-el").removeClass("tdb-current"),""===tdcState.getHeaderTemplateId()?tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value=""]').addClass("tdb-current"):
"no_header"===tdcState.getHeaderTemplateId()?tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="no_header"]').addClass("tdb-current"):tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getHeaderTemplateId()+'"]').addClass("tdb-current")))}).fail(function(b,a,c){})},getHeaderTemplate:function(e,a){f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_header_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},data:{td_magic_token:tdcLivePanel.$token.val(),tdc_action:"get_header_template",tdc_header_template_id:e,mobile_template:tdcState.isMobileComposer()?"1":""}}).done(function(c,f,h){if("success"===f&&d.isObject(c))if(d.has(c,"errors"))new tdcNotice.notice(c.errors,!0,!1);else{if(d.isUndefined(a)||d.isUndefined(a.keepGlobalTemplateState)||!1===a.keepGlobalTemplateState)c.global_template?tdcState.setGlobalHeaderTemplate():tdcState.unsetGlobalHeaderTemplate();c.no_header?
(tdcState.setNoHeader(),tdcState.setHeaderTemplateId("no_header"),tdcState.setHeaderTemplateContent("")):(tdcState.unsetNoHeader(),tdcState.setHeaderTemplateId(c.template_id),tdcState.setHeaderTemplateContent(c.template_content));d.isUndefined(a)||d.isUndefined(a.saveHeaderTemplate)||!0!==a.saveHeaderTemplate?tdcIFrameData.setHeaderTemplate(c.template_content):tdcIFrameData.setHeaderTemplate(c.template_content,b,{saveHeaderTemplate:a.saveHeaderTemplate,headerTemplateId:e})}}).fail(function(a,b,e){})},
updateFooterTemplates:function(){tdcSidebar.$_footerTemplateList.find("option").each(function(b){b=f(this);""!==b.val()&&"no_footer"!==b.val()&&b.remove()});f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_footer_templates","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{mobile_templates:tdcState.isMobileComposer()?"1":""}}).done(function(b,a,c){f(".tdc-save-page").removeClass("tdc-saving-loader");
"success"===a&&d.isObject(b)&&(d.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):d.has(b,"tdb_footer_templates")&&(b.tdb_footer_templates.forEach(function(a){tdcSidebar.$_footerTemplateList.find('div[data-value="tdb_template_'+a.id+'"]').length||tdcSidebar.$_footerTemplateList.append('<div class="tdc-template-el" data-value="tdb_template_'+a.id+'"><div class="tdc-template-el-title tdc-template-footer-name">'+a.title+'</div><div class="tdc-template-el-global" title="Set as'+(tdcState.isMobileComposer()?
" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-footer-global" '+("1"===a.is_global_template?'checked="checked"':"")+' ><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')}),tdcSidebar.setCurrentFooterTemplate(),tdcSidebar.$_footerTemplateList.find(".tdc-template-el").removeClass("tdb-current"),""===tdcState.getFooterTemplateId()?tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value=""]').addClass("tdb-current"):
"no_footer"===tdcState.getFooterTemplateId()?tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="no_footer"]').addClass("tdb-current"):tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getFooterTemplateId()+'"]').addClass("tdb-current")))}).fail(function(b,a,c){})},getFooterTemplate:function(e,a){f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_footer_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},data:{td_magic_token:tdcLivePanel.$token.val(),tdc_action:"get_footer_template",tdc_footer_template_id:e,mobile_template:tdcState.isMobileComposer()?"1":""}}).done(function(c,f,h){if("success"===f&&d.isObject(c))if(d.has(c,"errors"))new tdcNotice.notice(c.errors,!0,!1);else{if(d.isUndefined(a)||d.isUndefined(a.keepGlobalTemplateState)||!1===a.keepGlobalTemplateState)c.global_template?tdcState.setGlobalFooterTemplate():tdcState.unsetGlobalFooterTemplate();c.no_footer?
(tdcState.setNoFooter(),tdcState.setFooterTemplateId("no_footer"),tdcState.setFooterTemplateContent("")):(tdcState.unsetNoFooter(),tdcState.setFooterTemplateId(c.template_id),tdcState.setFooterTemplateContent(c.template_content));d.isUndefined(a)||d.isUndefined(a.saveFooterTemplate)||!0!==a.saveFooterTemplate?tdcIFrameData.setFooterTemplate(c.template_content):tdcIFrameData.setFooterTemplate(c.template_content,b,{saveFooterTemplate:a.saveFooterTemplate,footerTemplateId:e})}}).fail(function(a,b,e){})}};
tdcSidebar.init()})(jQuery,_);var tdcSidebarController={};
(function(f){tdcSidebarController={updateJobBuffer:{},updateJobTimer:"",_updateJob:function(){this.value=this.oldValue=this.paramName=this.model=""},_getParamMap:function(d,b,e){for(var a=window.tdcAdminSettings.mappedShortcodes[d],c=0;c<a.params.length;c++)if(a.params[c].param_name===b)return a.params[c];a=window.tdcAdminSettings.mappedBlockTemplates[window.tdcAdminSettings.globalBlockTemplate];_.isEmpty(e.block_template_id)||(a=window.tdcAdminSettings.mappedBlockTemplates[e.block_template_id]);for(c=
0;c<a.params.length;c++)if(a.params[c].param_name===b)return a.params[c];if(0===b.indexOf("tds_")){c=b.split("-");var g=e=f;a=f;2>c.length?new tdcNotice.notice('Param "'+b+'" must have up at least one "-" separator',!0,!1):2===c.length?e=c[0]:3===c.length?(e=c[0],a=c[2]):3<c.length&&new tdcNotice.notice('Param "'+b+'" must have up to at most two "-" separator',!0,!1);if(_.isUndefined(g))for(var h in window.tdcAdminSettings.settingsStyle){if(!_.isUndefined(g))break;for(var n in window.tdcAdminSettings.settingsStyle[h])if(n===
e){g=h;break}}_.isUndefined(e)&&(e=window.tdcAdminSettings.globalStyle[g]);h=window.tdcAdminSettings.settingsStyle[g][e];for(c=0;c<h.params.length;c++)if(n=e+"-"+h.params[c].param_name,_.isUndefined(a)||(n+="-"+a),n===b)return d=JSON.parse(JSON.stringify(h.params[c])),d.param_name=e+"-"+d.param_name,_.isUndefined(a)||(d.param_name+="-"+a),d}new tdcNotice.notice("Map value not found for "+d+" "+b,!0,!1);return f},onUpdate:function(d,b,e,a){var c=new tdcSidebarController._updateJob;c.model=d;c.paramName=
b;c.oldValue=e;c.value=a;tdcSidebarController._addToBuffer(c)},_addToBuffer:function(d){var b=d.model.get("blockUid");if(!_.isUndefined(tdcSidebarController.updateJobBuffer[b])&&!_.isUndefined(d.paramName)){var e=d.model.get("attrs"),a=_.clone(e);e=tdcSidebarController._getParamMap(d.model.attributes.tag,d.paramName,e);e.value===d.value?delete a[e.param_name]:a[e.param_name]=d.value;d.model.set("attrs",a,{silent:!0})}tdcSidebarController.updateJobBuffer[b]=d;""!==tdcSidebarController.updateJobTimer&&
clearTimeout(tdcSidebarController.updateJobTimer);tdcSidebarController.updateJobTimer=setTimeout(function(){1<tdcSidebarController.updateJobBuffer.length&&(console.log("Multiple jobs detected - see below"),console.log(tdcSidebarController.updateJobBuffer));for(var a in tdcSidebarController.updateJobBuffer)tdcSidebarController._doUpdateJob(tdcSidebarController.updateJobBuffer[a]);tdcSidebarController.updateJobBuffer={};tdcSidebarController.updateJobTimer=""},500)},_doUpdateJob:function(d){if(!_.isUndefined(d.paramName)){var b=
d.model.get("attrs"),e=_.clone(b);b=tdcSidebarController._getParamMap(d.model.attributes.tag,d.paramName,b);b.value===d.value?delete e[b.param_name]:e[b.param_name]=d.value;d.model.set("attrs",e)}e={error:f,getShortcode:""};tdcIFrameData._checkModelData(d.model,e);if(!_.isUndefined(e.getShortcode)){var a=d.model.get("blockUid"),c=new tdcJobManager.job;c.shortcode=e.getShortcode;c.columns=tdcIFrameData.getColumnNumber(d.model);c.blockUid=a;parseInt(d.model.get("level"),10);d.model.set("bindNewContent",
!0);c.success_callback=function(b){var e=tdcAdminIFrameUI.getIframeWindow();tdcIFrameData.deleteCallback(d.model);d.model.set("blockUid",b.blockUid);_.has(b,"replyHtml")&&(d.model.set("shortcode",c.shortcode),d.model.set("html",b.replyHtml));_.has(b,"replyJsForEval")&&(e.tdcEvalGlobal={oldBlockUid:a},tdcAdminIFrameUI.evalInIframe(b.replyJsForEval));_.isUndefined(window.eventHub)||(window.eventHub.$emit("refresh-fonts"),window.eventHub.$emit("refresh-colors"))};c.error_callback=function(a,c){tdcDebug.log(c);
tdcDebug.log(a)};e=tdcSidebar.getCurrentElement();_.isUndefined(e)&&(e=tdcSidebar.getCurrentInnerColumn(),_.isUndefined(e)&&(e=tdcSidebar.getCurrentInnerRow(),_.isUndefined(e)&&(e=tdcSidebar.getCurrentColumn(),_.isUndefined(e)&&(e=tdcSidebar.getCurrentRow()))));_.isUndefined(e)||e.addClass("tdc-changed");tdcJobManager.addJob(c)}}}})();var tdcCssEditor={};
(function(f,d,b){tdcCssEditor={_mappedParameter:b,_model:b,_currentCssSettings:b,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(b){var a=f(b.currentTarget),c=a.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(a);f(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");
f(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");f(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(b){if(-1!==b.indexOf("[caption")){var e=/\[caption(.*)\](.*)\[\/caption\]/g.exec(b);3===e.length&&(b=e[2])}var g=f("img",b).attr("src");e="";"undefined"===typeof g?(b=f(b),g=b.attr("src"),e=b.attr("class")):e=f("img",b).attr("class");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),
beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:e,action:"tdc_ajax_get_image_id"}}).done(function(b,e,f){if("success"===e)if(d.isObject(b)&&d.has(b,"errors"))new tdcNotice.notice(b.errors,!0,!1);else{a.trigger("td_woo_update_term_img",[a,b]);e=a.closest(".tdc-property-wrap");f=e.find(".tdc-css-image-remove");var h=e.find(".tdc-inherit-image");f.removeClass("tdc-hidden-button");"all"===tdcSidebar.currentViewportSettings.name?
h.hide():h.show();a.attr("style","background-image: url( '"+g+"') ");a.data("image_link",g);a.data("image_id",b.image_id);window.send_to_editor=window.original_send_to_editor;window.tb_remove();e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof a.data("model_id")?tdcCssEditor.saveWidgetForm(a):(b=tdcCssEditor._generateCssAttValue(c),e=tdcIFrameData.getModel(a.data("model_id")),tdcSidebarController.onUpdate(e,a.data("param_name"),"",b))}}).fail(function(a,c,b){})};return!1},tdcCssImageRemoveHandler:function(b){var a=
f(b.currentTarget),c=a.closest(".tdc-property-wrap");b=c.find(".tdc-css-image-wrap");var e=c.find(".tdc-inherit-image");a.addClass("tdc-hidden-button");"all"!==tdcSidebar.currentViewportSettings.name&&e.show();c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");a.trigger("td_woo_update_term_img",[b,{image_id:""}]);"all"===tdcSidebar.currentViewportSettings.name?b.data("image_link",""):b.data("image_link",
"no_value");e=b.data("model_id");d.isUndefined(e)?tdcCssEditor.saveWidgetForm(a):(a=c.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),e=tdcIFrameData.getModel(e),tdcSidebarController.onUpdate(e,b.data("param_name"),"",a))},_updateColorField:function(b){var a=b.closest(".tdc-property-wrap"),c=a.data("tdc-for"),e=a.find(".tdc-inherit-color"),f=a.find(".tdc-colorpicker-wrap"),n=b.data("no_value"),l=b.data("default_value");d.isUndefined(n)||1!==n?("all"!==tdcSidebar.currentViewportSettings.name&&
e.show(),tdcCssEditor._updateData(b),e={isInherited:!1},c=tdcCssEditor._getSettingsProperty(c,"",e),e.isInherited?(b.attr("placeholder",c),b.val(""),a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),f.attr("style","background-color: "+tdcCssEditor._getRgba(c))):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(b))):(b.val("no_value"),tdcCssEditor._updateData(b),b.val(""),d.isUndefined(l)||f.attr("style","background-color: "+tdcCssEditor._getRgba(l)),tdcCssEditor._checkDefaultColor(b))},
_clearColorPicker:function(b){b=f(b.currentTarget).closest(".tdc-property-wrap");var a=b.closest(".tdc-tab-content"),c=b.find("input"),e=b.find(".tdc-inherit-color");b.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"all"!==tdcSidebar.currentViewportSettings.name&&(c.data("no_value",1),c.attr("placeholder",""),e.show());tdcCssEditor._checkDefaultColor(c);a.hasClass("tdc-tab-widget")&&(c.val(""),c.trigger("keyup"))},_showColorPicker:function(b){b=f(b.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");
"no_value"===b.val()&&b.val("")},_changeColor:function(b){var a=f(b.currentTarget).closest(".tdc-property-wrap").find("input");""!==a.val()&&a.data("no_value",0);"keyup"===b.type?setTimeout(function(){tdcCssEditor._updateColorField(a)},100):tdcCssEditor._updateColorField(a)},_inheritSelect:function(e){e=f(e.currentTarget);var a=e.closest(".tdc-property-wrap"),c=a.data("tdc-for");d.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][c])||delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][c];
var g={isInherited:!1};c=tdcCssEditor._getSettingsProperty(c,b,g);var h=a.find("select:first");g.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),e.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),e.show());d.isUndefined(c)?(h.val(h.find("option:first").val()),e.hide()):h.val(c);tdcCssEditor._updateData(h)},_inheritColor:function(e){e=f(e.currentTarget);var a=e.closest(".tdc-property-wrap"),c=a.find("input"),g=a.find(".tdc-colorpicker-wrap"),h=a.data("tdc-for");d.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][h])||
delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][h];c.data("no_value",0);var n={isInherited:!1};h=tdcCssEditor._getSettingsProperty(h,b,n);n.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),e.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),e.show());d.isUndefined(h)?(c.val(""),e.hide(),tdcCssEditor._updateData(c),tdcCssEditor._checkDefaultColor(c)):(c.val(""),c.attr("placeholder",h),g.attr("style","background-color: "+tdcCssEditor._getRgba(h)),tdcCssEditor._updateData(c))},
_inheritImage:function(e){var a=f(e.currentTarget);e=a.closest(".tdc-property-wrap");var c=e.find(".tdc-css-image-wrap"),g=e.find(".tdc-css-image-remove");e.find(".tdc-inherit-image").hide();g.addClass("tdc-hidden-button");c.data("image_link","");g=c.data("model_id");d.isUndefined(g)?tdcCssEditor.saveWidgetForm(a):(a=e.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),g=tdcIFrameData.getModel(g),tdcSidebarController.onUpdate(g,c.data("param_name"),"",a));g={isInherited:!1};a=tdcCssEditor._getSettingsProperty("background-image",
b,g);g.isInherited?(e.addClass(tdcCssEditor._INHERITED_CSS_CLASS),c.attr("style","background-image: url('"+a+"'")):c.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(e){e=f(e.currentTarget);var a=e.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(a,e){tdcCssEditor._currentCssSettings=b;"undefined"===typeof e?(f(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent()),
tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(f("."+a.get(0).className))):(e=tdcIFrameData.getModel(e),tdcSidebarController.onUpdate(e,a.data("param_name"),"",""),f(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender());tb_remove()},[e,a],"Are you sure you want to clear all the CSS settings of the selected component?")},_changeTextInput:function(b){var a=f(b.currentTarget),c=a.parent(),e=a;c.hasClass("tdc-box-margin")||
c.hasClass("tdc-box-border")||c.hasClass("tdc-box-padding")||(e=a.closest(".tdc-property-wrap"));c=a.val();var h=1;a.hasClass("tdc-css-opacity")&&(h=.01);var n=NaN;switch(b.type){case "keyup":switch(b.keyCode){case 38:f.isNumeric(c)&&(n=parseFloat(c)+h);break;case 40:f.isNumeric(c)&&(n=parseFloat(c)-h)}break;case "mousewheel":b.preventDefault(),b.stopImmediatePropagation(),f.isNumeric(c)&&(n=0<b.originalEvent.deltaY?parseFloat(c)-h:parseFloat(c)+h)}d.isNaN(n)||(1>h&&(n=n.toFixed(2)),a.val(n));tdcCssEditor._updateData(a);
c=e.data("tdc-for");b={isInherited:!1};c=tdcCssEditor._getSettingsProperty(c,"",b);b.isInherited?(a.attr("placeholder",c),a.val(""),e.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(b){if(38===b.keyCode||40===b.keyCode)return!1},_focusTextInput:function(b){b=f(b.currentTarget);for(var a=b.closest(".tdc-property-wrap"),c=a[0].classList,e=0;e<c.length;e++)0===c[e].indexOf("tdc-el-")&&a.removeClass(c[e]);a.addClass("tdc-el-"+b.data("tdc-for"))},
_changeDropDown:function(b){b=f(b.currentTarget);var a=b.closest(".tdc-property-wrap"),c=a.find(".tdc-inherit-select");a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(b);var e=a.data("tdc-for"),h={isInherited:!1};tdcCssEditor._getSettingsProperty(e,"",h);h.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),c.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcSidebar.currentViewportSettings.name?c.hide():0===b[0].selectedIndex?d.isUndefined(tdcCssEditor._currentCssSettings.all)||
d.isUndefined(tdcCssEditor._currentCssSettings.all[e])?c.hide():c.show():c.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var b=f("body");b.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);b.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);
b.on("change keyup",".tdc-tab-design .tdc-css-bg-color",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);b.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-width",
tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-width",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design .tdc-css-shadow-color",tdcCssEditor._changeColor);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);b.on("change",".tdc-tab-design .tdc-css-bg-position",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);
b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",tdcCssEditor._changeColor);b.on("keydown",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._changeTextInput);b.on("change",
".tdc-tab-design .tdc-css-content-h-align",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-order",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-order",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-display",tdcCssEditor._changeDropDown);
b.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);b.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);b.on("click",".tdc-tab-design .tdc-inherit-color",tdcCssEditor._inheritColor);b.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);b.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);b.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);b.on("click",
".tdc-clear-css-properties",tdcCssEditor._clearCssProperties)},setMediaInterval:function(b,a){var c=f(".tdc-media-interval");c.length||(c=f('<div class="tdc-media-interval"><div class="tdc-media-interval-head"><label></label> - <output></output></div><input type="range" name="mediaIntervalInput" min="20" max="50" step="1" value="30" data-scroll-bar-width="'+a+'"></div>'),f("body").append(c),c.find("input").on("input",function(a){var b=f(this),e=tdcAdminIFrameUI.getLiveIframe(),g=b.data("scroll-bar-width");
c.find("output").html(b.val());tdcCssEditor.timeoutMediaInterval=setTimeout(function(){d.isUndefined(tdcCssEditor.timeoutMediaInterval)||clearTimeout(tdcCssEditor.timeoutMediaInterval);e.css("width",parseInt(b.val())+parseInt(g))},200)}));""===b?c.hide():(c.show(),tdcCssEditor.timeoutIframeHtml=setTimeout(function(){d.isUndefined(tdcCssEditor.timeoutIframeHtml)||clearTimeout(tdcCssEditor.timeoutIframeHtml);if(!d.isUndefined(tdcSidebar.currentViewportSettings.settings)){var a=c.find("label"),e=c.find("input"),
f=c.find("output");a.html(tdcSidebar.currentViewportSettings.name);d.isUndefined(tdcSidebar.currentViewportSettings.settings.limitBottom)?e.attr("min",200):e.attr("min",tdcSidebar.currentViewportSettings.settings.limitBottom);e.attr("max",tdcSidebar.currentViewportSettings.settings.limitTop);e.attr("value",b);f.html(b+"px")}},100))},_updateData:function(b){var a=b.data("model_id"),c=b.data("param_name"),e=b.closest(".tdc-tab-content");"undefined"===typeof a?tdcCssEditor.saveWidgetForm(b):(b=tdcIFrameData.getModel(a),
e=tdcCssEditor._generateCssAttValue(e),tdcSidebarController.onUpdate(b,c,"",e))},saveWidgetForm:function(b){var a=b.closest("form");b=b.closest(".tdc-tab-content");if(a.length){var c=a.find('input[name="id_base"]').val(),e=a.find('input[name="widget-id"]').val().replace(c+"-","");c="'widget-"+c+"["+e+"][tdc_css]'";e=a.find("input[name="+c+"]");var d=tdcCssEditor._generateCssAttValue(b);b.data("tdc_css",d);e.length?e.val(d):a.append('<input type="hidden" name='+c+' value="'+d+'">')}},addWidgetCssEditor:function(b,
a){tdcCssEditor._mappedParameter=b;return tdcCssEditor._generateEditorContent(a)},addComposerCssEditor:function(b,a){tdcCssEditor._mappedParameter=b;tdcCssEditor._model=a;b=a.get("attrs")[b.param_name];return tdcCssEditor._generateEditorContent(b)},_checkDefaultColor:function(b){var a=b.closest(".tdc-property-wrap").find(".tdc-colorpicker-wrap");""===b.val()&&(b=b.data("default_value"),d.isUndefined(b)?a.attr("style",""):a.attr("style","background-color: "+tdcCssEditor._getRgba(b)))},_generateEditorContent:function(e){if(d.isEmpty(e))tdcCssEditor._currentCssSettings=
b;else try{var a=JSON.parse(window.atob(e));tdcDebug.log(a);d.isObject(a)?tdcCssEditor._currentCssSettings=a:tdcCssEditor._currentCssSettings=b}catch(c){tdcCssEditor._currentCssSettings=b,new tdcNotice.notice(c.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){f(".tdc-css-image-wrap").each(function(a,e){a=f(e);e=a.closest(".tdc-property-wrap");var c=e.find(".tdc-css-image-remove"),g=e.find(".tdc-inherit-image"),l={isInherited:!1},k=tdcCssEditor._getSettingsProperty("background-image",
b,l);l.isInherited?e.addClass(tdcCssEditor._INHERITED_CSS_CLASS):e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);d.isUndefined(k)?(c.addClass("tdc-hidden-button"),g.hide()):("no_value"===k?c.addClass("tdc-hidden-button"):(c.removeClass("tdc-hidden-button"),a.attr("style",'background-image: url("'+k+'")')),"all"!==tdcSidebar.currentViewportSettings.name&&g.show());a.data("image_link",k)});f(".tdc-inherit").each(function(a,e){a=f(e);e=a.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||
e.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))a.hide();else{var c=e.data("tdc-for");e={isInherited:!1};c=tdcCssEditor._getSettingsProperty(c,b,e);e.isInherited?a.hide():d.isUndefined(c)||a.show()}})});return tdcCssEditor.generateEditorResponsiveContent()},_cleanCss:function(e,a){if("undefined"===typeof a)return b;if("no_value"===a)return a;if("background-image"===e)return e=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(a),d.isEmpty(e)?"":e[2];a=a.toLowerCase();a=a.replace(/!important/g,"");return a.trim()},
_getDataNoValue:function(b){var a="";"no_value"===b&&(a=' data-no_value="1" ');return a},callbackColorPicker:function(){f(".tdc-tab-design .tdc-property-colorpicker").each(function(){f("#tdc-palette-color-picker").tdPalette();var b=f(this),a=b.find("input"),c=b.closest(".tdc-property-wrap");b=b.find(".tdc-colorpicker-wrap");d.isUndefined(a.val())||""===a.val()||b.attr("style","background: "+a.val());c.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?""!==a.attr("placeholder")&&b.attr("style","background-color: "+
tdcCssEditor._getRgba(a.attr("placeholder"))):("no_value"===a.val()&&a.val(""),tdcCssEditor._checkDefaultColor(a))})},generateEditorResponsiveContent:function(){function e(){return l={isInherited:!1}}function a(a){return"all"!==tdcSidebar.currentViewportSettings.name?'placeholder="'+a+'"':""}function c(){return l.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function g(a,b){b=tdcCssEditor._getSettingsProperty(a,b,e());var f="-",g="";l.isInherited&&(f=b,b="");d.isUndefined(n)||"margin-left"!==
a&&"margin-right"!==a||(g=n.get("tag"),g="vc_column"===g||"vc_column_inner"===g?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+a+'" name="" type="text" value="'+b+'" class="tdc-css-box-input tdc-css-box-input-'+a+c()+g+'" title="Css '+a+'" placeholder="'+f+'" '+tdcSidebarPanel._getParamterDataAtts(h,n)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var h=tdcCssEditor._mappedParameter,n=tdcCssEditor._model,l={isInherited:!1};var k='<div class="tdc-responsiveness"><div class="'+
(tdcSidebarPanel._getParameterClasses(h)+'">');k=k+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+g("margin-top","");k+=g("margin-right","");k+=g("margin-bottom","");k+=g("margin-left","");k=k+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+g("border-top-width","");k+=g("border-right-width","");k+=g("border-bottom-width","");k+=g("border-left-width","");k=k+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+g("padding-top",
"");k+=g("padding-right","");k+=g("padding-bottom","");k+=g("padding-left","");k+="</div></div></div></div>";var m=tdcCssEditor._getSettingsProperty("border-style",b,e());k+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+c()+'" data-tdc-for="border-style">';k=k+'<div class="tdc-property-title"><span title="Css border-style" class="tdc-search-data">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-border-style" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},{value:"inherit",display:"Inherit"}],
m);k+="</select></div></div>";m=d.uniqueId();var p=tdcCssEditor._getSettingsProperty("border-color","",e()),q="";l.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+c()+'" data-tdc-for="border-color">';k=k+'<div class="tdc-property-title"><span title="Css border-color" class="tdc-search-data">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-border-color" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(p)+' data-default_value="#888888" id="'+m+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";m=tdcCssEditor._getSettingsProperty("border-radius","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+c()+'" data-tdc-for="border-radius">';k=k+'<div class="tdc-property-title"><span title="Css border-radius" class="tdc-search-data">Border radius</span></div><div class="tdc-property"><input class="tdc-css-border-radius" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';m=tdcCssEditor._getSettingsProperty("width","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-width tdc-textfield-big'+c()+'" data-tdc-for="width">';k=k+'<div class="tdc-property-title"><span title="Css shadow-size" class="tdc-search-data">Width</span></div><div class="tdc-property"><input class="tdc-css-width" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';m=tdcCssEditor._getSettingsProperty("shadow-size","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+c()+'" data-tdc-for="shadow-size">';k=k+'<div class="tdc-property-title"><span title="Css shadow-size" class="tdc-search-data">Shadow size</span></div><div class="tdc-property"><input class="tdc-css-shadow-size" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+="</div></div>";m=d.uniqueId();p=tdcCssEditor._getSettingsProperty("shadow-color","",e());q="";l.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-shadow-color'+c()+'" data-tdc-for="shadow-color">';k=k+'<div class="tdc-property-title"><span title="Css shadow-color" class="tdc-search-data">Shadow color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-shadow-color" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(p)+' data-default_value="#888888" id="'+m+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";m=tdcCssEditor._getSettingsProperty("shadow-offset-h","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+c()+'" data-tdc-for="shadow-offset-h">';k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-h" class="tdc-search-data">Shadow offset H</span></div><div class="tdc-property"><input class="tdc-css-shadow-offset-h" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+="</div></div>";m=tdcCssEditor._getSettingsProperty("shadow-offset-v","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+c()+'" data-tdc-for="shadow-offset-v">';k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-v" class="tdc-search-data">Shadow offset V</span></div><div class="tdc-property"><input class="tdc-css-shadow-offset-v" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';m=d.uniqueId();p=tdcCssEditor._getSettingsProperty("background-color","",e());q="";l.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+c()+'" data-tdc-for="background-color">';k=k+'<div class="tdc-property-title"><span title="Css background-color" class="tdc-search-data">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(p)+' id="'+m+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";tdcCssEditor._getSettingsProperty("background-image",b,e());k+='<div class="tdc-property-wrap tdc-property-attach_image'+c()+'">';k=k+'<div class="tdc-property-title"><span title="Css background-image" class="tdc-search-data">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property"><div class="tdc-css-bg-image tdc-css-image-wrap " '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");k+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';m=tdcCssEditor._getSettingsProperty("background-style",b,e());k+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+c()+'" data-tdc-for="background-style">';k=k+'<div class="tdc-property-title"><span title="Css background-size & background-repeat" class="tdc-search-data">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-bg-style" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],m);k+="</select></div></div>";m=tdcCssEditor._getSettingsProperty("background-position",b,e());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+c()+'" data-tdc-for="background-position">';k=k+'<div class="tdc-property-title"><span title="Css background-position" class="tdc-search-data">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-bg-position" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",display:"Right Bottom"}],m);k+=
"</select></div></div>";m=tdcCssEditor._getSettingsProperty("opacity","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+c()+'" data-tdc-for="opacity">';k=k+'<div class="tdc-property-title"><span title="Css background-image opacity" class="tdc-search-data">Background opacity</span></div><div class="tdc-property"><input class="tdc-css-opacity" '+(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';
m=d.uniqueId();p=tdcCssEditor._getSettingsProperty("color-1-overlay","",e());q="";l.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+c()+'" data-tdc-for="color-1-overlay">';k=k+'<div class="tdc-property-title"><span title="Css gradient color From" class="tdc-search-data">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(p)+' id="'+m+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";m=d.uniqueId();p=tdcCssEditor._getSettingsProperty("color-2-overlay","",e());q="";l.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+c()+'" data-tdc-for="color-2-overlay">';k=k+'<div class="tdc-property-title"><span  title="Css gradient color To" class="tdc-search-data">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(p)+' id="'+m+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";m=tdcCssEditor._getSettingsProperty("gradient-direction","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+c()+'" data-tdc-for="gradient-direction">';k=k+'<div class="tdc-property-title"><span title="Css gradient direction" class="tdc-search-data">Gradient direction</span></div><div class="tdc-property"><input class="tdc-css-gradient-direction" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';m=tdcCssEditor._getSettingsProperty("content-h-align",b,e());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+c()+'" data-tdc-for="content-h-align">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align" class="tdc-search-data">H. align<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-content-h-align" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Default"},{value:"content-horiz-left",display:"Left"},{value:"content-horiz-center",display:"Center"},{value:"content-horiz-right",display:"Right"}],m);k+="</select></div></div>";"vc_row"!==n.get("tag")&&"vc_row_inner"!==n.get("tag")&&"vc_column"!==n.get("tag")&&"vc_column_inner"!==n.get("tag")&&(m=tdcCssEditor._getSettingsProperty("order","",e()),p="",l.isInherited&&(p=m,m=""),k+=
'<div class="tdc-property-wrap tdc-order tdc-textfield-small'+c()+'" data-tdc-for="order">',k=k+'<div class="tdc-property-title"><span title="Order" class="tdc-search-data">Order</span></div><div class="tdc-property"><input class="tdc-css-order" '+(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>'),k+="</div></div>");m=tdcCssEditor._getSettingsProperty("z-index","",e());p="";l.isInherited&&(p=m,m="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+
c()+'" data-tdc-for="z-index">';k=k+'<div class="tdc-property-title"><span title="Z-index" class="tdc-search-data">Z-index</span></div><div class="tdc-property"><input class="tdc-css-z-index" '+(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+a(p)+' value="'+m+'"/>');k+="</div></div>";m=tdcCssEditor._getSettingsPropertyFromCssSettings("display",b);k+='<div class="tdc-property-wrap tdc-display tdc-dropdown-big'+c()+'" data-tdc-for="display">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align" class="tdc-search-data">Display</span></div><div class="tdc-property"><select class="tdc-css-display" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Show"},{value:"none",display:"Hidden"},{value:"inline",display:"Inline"},{value:"inline-block",display:"Inline-block"},{value:"block",display:"Block"},{value:"table",display:"Table"},{value:"inline-table",display:"Inline-table"}],m);k=k+'</select></div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div><div class="tdc-clear-css-properties" '+
(tdcSidebarPanel._getParamterDataAtts(h,n)+' title="Clear all tab css settings">Clear CSS settings</div>');k+="</div>";tdcSidebarPanel._hook.addAction("panel_css",tdcCssEditor.callbackColorPicker);tdcSidebarPanel._hook.addAction("panel_css",function(){f(".tdc-inherit").each(function(a,c){a=f(c);c=a.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||c.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))a.hide();else{var e=c.data("tdc-for");c={isInherited:!1};e=tdcCssEditor._getSettingsProperty(e,
b,c);c.isInherited?a.hide():d.isUndefined(e)||a.show()}})});return k},_getAvailableViewportSetting:function(b,a,c){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var e;switch(b){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]&&(e="all");break;case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]?e=b:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(e="all")}if("undefined"!==typeof e){if("undefined"!==typeof tdcCssEditor._currentCssSettings[e][a])return tdcSidebar.currentViewportSettings.name!==
e&&(c.isInherited=!0,tdcDebug.log(a)),tdcCssEditor._cleanCss(a,tdcCssEditor._currentCssSettings[e][a]);if("all"!==e)return tdcCssEditor._getAvailableViewportSetting("all",a,c)}}},_getSettingsPropertyFromCssSettings:function(b,a){var c;if("undefined"!==typeof tdcCssEditor._currentCssSettings){var e=tdcSidebar.currentViewportSettings.name;if("undefined"!==typeof tdcCssEditor._currentCssSettings[e]&&"undefined"!==typeof tdcCssEditor._currentCssSettings[e][b])return tdcSidebar.currentViewportSettings.name!==
e&&tdcDebug.log(b),tdcCssEditor._cleanCss(b,tdcCssEditor._currentCssSettings[e][b])}"undefined"===typeof c&&"undefined"!==typeof a&&(c=a);return c},_getSettingsProperty:function(b,a,c){var e;"undefined"===typeof c&&(c={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(e=tdcCssEditor._getAvailableViewportSetting(tdcSidebar.currentViewportSettings.name,b,c));"undefined"===typeof e&&"undefined"!==typeof a&&(e=a);return e},_generateDropdownOptions:function(b,a,c){for(var e=[],f,
n=!1,l=0,k=0;k<b.length;k++)d.isUndefined(c)||c!==b[k].value||(l=k),f="",d.isUndefined(a)||a!==b[k].value||(f='selected="selected"',n=!0),e.push("<option "+f+' value="'+b[k].value+'">'+b[k].display+"</option>");n||(e[l]='<option selected="selected" value="'+b[l].value+'">'+b[l].display+"</option>");return e.join("")},_generateCssAttValue:function(b){var a={},c=b.find(".tdc-css-box-input-margin-top").val().trim(),e=b.find(".tdc-css-box-input-margin-right").val().trim(),f=b.find(".tdc-css-box-input-margin-bottom").val().trim(),
n=b.find(".tdc-css-box-input-margin-left").val().trim(),l=b.find(".tdc-css-box-input-border-top-width").val().trim(),k=b.find(".tdc-css-box-input-border-right-width").val().trim(),m=b.find(".tdc-css-box-input-border-bottom-width").val().trim(),p=b.find(".tdc-css-box-input-border-left-width").val().trim(),q=b.find(".tdc-css-box-input-padding-top").val().trim(),t=b.find(".tdc-css-box-input-padding-right").val().trim(),v=b.find(".tdc-css-box-input-padding-bottom").val().trim(),u=b.find(".tdc-css-box-input-padding-left").val().trim(),
r=b.find(".tdc-css-border-radius").val().trim(),w=b.find(".tdc-css-width").val().trim(),A=b.find(".tdc-css-shadow-size").val().trim(),x=b.find(".tdc-css-shadow-offset-h").val().trim(),z=b.find(".tdc-css-shadow-offset-v").val().trim(),y=b.find(".tdc-css-opacity").val().trim(),B=b.find(".tdc-css-gradient-direction").val().trim(),C=b.find(".tdc-css-z-index").val().trim(),D="";b.find(".tdc-css-order").length&&(D=b.find(".tdc-css-order").val().trim());""!==c&&(a["margin-top"]=c);""!==e&&(a["margin-right"]=
e);""!==f&&(a["margin-bottom"]=f);""!==n&&(a["margin-left"]=n);""!==l&&(a["border-top-width"]=l);""!==k&&(a["border-right-width"]=k);""!==m&&(a["border-bottom-width"]=m);""!==p&&(a["border-left-width"]=p);""!==q&&(a["padding-top"]=q);""!==t&&(a["padding-right"]=t);""!==v&&(a["padding-bottom"]=v);""!==u&&(a["padding-left"]=u);c=b.find(".tdc-css-border-style");e=c.val().trim();""===e||c.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["border-style"]=e);c=b.find(".tdc-css-border-color");
e=c.val().trim();""!==e?a["border-color"]=e:(c=c.data("no_value"),d.isUndefined(c)||1!==c||(a["border-color"]="no_value"));""!==r&&(a["border-radius"]=r);""!==w&&(a.width=w);""!==A&&(a["shadow-size"]=A);r=b.find(".tdc-css-shadow-color");w=r.val().trim();""!==w?a["shadow-color"]=w:(r=r.data("no_value"),d.isUndefined(r)||1!==r||(a["shadow-color"]="no_value"));""!==x&&(a["shadow-offset-h"]=x);""!==z&&(a["shadow-offset-v"]=z);x=b.find(".tdc-css-bg-color");z=x.val().trim();""!==z?a["background-color"]=
z:(x=x.data("no_value"),d.isUndefined(x)||1!==x||(a["background-color"]="no_value"));x=b.find(".tdc-css-bg-image");x.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(x=x.data("image_link"),d.isUndefined(x)||("no_value"===x?a["background-image"]="no_value":""!==x&&(a["background-image"]='url("'+x+'")')));x=b.find(".tdc-css-bg-style");z=x.val().trim();""===z||x.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["background-style"]=z);x=b.find(".tdc-css-bg-position");
z=x.val().trim();""===z||x.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["background-position"]=z);""!==y&&(a.opacity=y);y=b.find(".tdc-css-color-1-overlay");x=y.val().trim();""!==x?a["color-1-overlay"]=x:(y=y.data("no_value"),d.isUndefined(y)||1!==y||(a["color-1-overlay"]="no_value"));y=b.find(".tdc-css-color-2-overlay");x=y.val().trim();""!==x?a["color-2-overlay"]=x:(y=y.data("no_value"),d.isUndefined(y)||1!==y||(a["color-2-overlay"]="no_value"));""!==B&&(a["gradient-direction"]=
B);""!==D&&(a.order=D);""!==C&&(a["z-index"]=C);B=b.find(".tdc-css-content-h-align");C=B.val().trim();""===C||B.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["content-h-align"]=C);b=b.find(".tdc-css-display");a.display=b.val().trim();d.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});d.isUndefined(a["border-style"])||"solid"!==a["border-style"]||("all"===tdcSidebar.currentViewportSettings.name||d.isUndefined(tdcCssEditor._currentCssSettings.all)||
d.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&delete a["border-style"];d.isUndefined(a["background-style"])||"cover"!==a["background-style"]||("all"===tdcSidebar.currentViewportSettings.name||d.isUndefined(tdcCssEditor._currentCssSettings.all)||d.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete a["background-style"];d.isUndefined(a["background-position"])||"center top"!==a["background-position"]||("all"===tdcSidebar.currentViewportSettings.name||
d.isUndefined(tdcCssEditor._currentCssSettings.all)||d.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&delete a["background-position"];tdcDebug.log(a);d.isEmpty(a)?(delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name]=
a,d.isUndefined(tdcSidebar.currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"]=tdcSidebar.currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]=tdcSidebar.currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return d.isEmpty(tdcCssEditor._currentCssSettings)?
"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(b){return-1!==b.indexOf("rgb")?b:(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?"rgb("+parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16)+")":""}}})(jQuery,_);var tdcContextMenu={};
(function(){tdcContextMenu={_type:void 0,_headerTitle:void 0,_model:void 0,$_context:void 0,$_currentType:void 0,$_copyStyle:void 0,$_pasteStyle:void 0,$_saveShortcode:void 0,$_deleteShortcode:void 0,$_cloneShortcode:void 0,$_clearShortcode:void 0,$_currentElementOver:void 0,init:function(){tdcContextMenu.$_context=jQuery("#tdc-context-menu");tdcContextMenu.$_currentType=tdcContextMenu.$_context.find(".tdc-current-type");tdcContextMenu.$_copyShortcode=tdcContextMenu.$_context.find(".tdc-copy-shortcode");
tdcContextMenu.$_cutShortcode=tdcContextMenu.$_context.find(".tdc-cut-shortcode");tdcContextMenu.$_pasteShortcodeBefore=tdcContextMenu.$_context.find(".tdc-paste-shortcode-before");tdcContextMenu.$_pasteShortcodeAfter=tdcContextMenu.$_context.find(".tdc-paste-shortcode-after");tdcContextMenu.$_copyStyle=tdcContextMenu.$_context.find(".tdc-copy-style");tdcContextMenu.$_pasteStyle=tdcContextMenu.$_context.find(".tdc-paste-style");tdcContextMenu.$_resetStyle=tdcContextMenu.$_context.find(".tdc-reset-style");
tdcContextMenu.$_copyAttrs=tdcContextMenu.$_context.find(".tdc-copy-attrs");tdcContextMenu.$_pasteAttrs=tdcContextMenu.$_context.find(".tdc-paste-attrs");tdcContextMenu.$_copyListAttrs=tdcContextMenu.$_context.find(".tdc-copy-list-attrs");tdcContextMenu.$_pasteListAttrs=tdcContextMenu.$_context.find(".tdc-paste-list-attrs");tdcContextMenu.$_saveShortcode=tdcContextMenu.$_context.find(".tdc-save-shortcode");tdcContextMenu.$_deleteShortcode=tdcContextMenu.$_context.find(".tdc-delete-shortcode");tdcContextMenu.$_cloneShortcode=
tdcContextMenu.$_context.find(".tdc-clone-shortcode");tdcContextMenu.$_clearShortcode=tdcContextMenu.$_context.find(".tdc-clear-shortcode");tdcContextMenu.$_context.find("li:not(.active)").on("click",function(f){f.preventDefault();return!1});tdcContextMenu.$_context.bind("contextmenu",function(f){f.preventDefault();var d=jQuery.Event("click");d.pageX=f.pageX;d.pageY=f.pageY;tdcContextMenu.$_context.trigger(d)});tdcContextMenu.$_copyShortcode.on("click",tdcContextMenu.copyShortcodeHandler);tdcContextMenu.$_cutShortcode.on("click",
tdcContextMenu.cutShortcodeHandler);tdcContextMenu.$_pasteShortcodeBefore.on("click",tdcContextMenu.pasteBeforeShortcodeHandler);tdcContextMenu.$_pasteShortcodeAfter.on("click",tdcContextMenu.pasteAfterShortcodeHandler);tdcContextMenu.$_copyStyle.on("click",function(f){f=tdcSidebarPanel.getCurrentStyleSettings(f,tdcContextMenu._model);if(!_.isUndefined(f)){for(var d=tdcContextMenu._model.get("tag"),b=window.tdcAdminSettings.mappedShortcodes[d].tdc_style_params,e=0;e<b.length;e++)delete f[b[e]];tdcUtil.setStorageItem("copyStyleType",
d);tdcUtil.setStorageItem("copyStyleAttrs",f)}tdcContextMenu.hide()});tdcContextMenu.$_pasteStyle.on("click",function(f){f=jQuery(f.target);if(f.hasClass("tdc-paste-style")){var d=tdcUtil.getStorageItem("copyStyleType"),b=tdcUtil.getStorageItem("copyStyleAttrs");if(!_.isUndefined(d)&&!_.isUndefined(b)&&!_.isUndefined(tdcContextMenu._model)){f=tdcContextMenu._model.get("tag");if(f!==d)return;d=tdcContextMenu._model.get("attrs");var e=_.clone(b);for(a in e)e[a]=b[a];var a=window.tdcAdminSettings.mappedShortcodes[f].tdc_style_params;
if(!_.isUndefined(a))for(var c=0;c<a.length;c++)d.hasOwnProperty(a[c])&&(e[a[c]]=d[a[c]]);tdcContextMenu._model.set("attrs",e);tdcSidebarController.onUpdate(tdcContextMenu._model);tdcSidebarPanel.clearPanel()}tdcContextMenu.hide()}else if(f.hasClass("tdc-paste-list-style")){a=f.data("list-style");console.log(a);var g=tdcUtil.getStorageItem("copyAttrs-"+a);if(!_.isUndefined(g)&&!_.isUndefined(tdcContextMenu._model)){d=tdcContextMenu._model.get("attrs");f=tdcContextMenu._model.get("tag");e=_.clone(d);
console.log("copyListAttrs");console.log(g);for(c=0;c<g.length;c++)null!==g[c]&&c<window.tdcAdminSettings.listStyles[a][f].length&&""!==window.tdcAdminSettings.listStyles[a][f][c]&&(_.isArray(window.tdcAdminSettings.listStyles[a][f][c])?_.map(window.tdcAdminSettings.listStyles[a][f][c],function(a,b){_.isArray(g[c])?_.isUndefined(g[c][b])||(e[a]=g[c][b]):e[a]=g[c]}):_.isArray(g[c])?_.isUndefined(g[c][0])||(e[window.tdcAdminSettings.listStyles[a][f][c]]=g[c][0]):e[window.tdcAdminSettings.listStyles[a][f][c]]=
g[c]);console.log("newAttrs");console.log(e);tdcContextMenu._model.set("attrs",e);tdcSidebarController.onUpdate(tdcContextMenu._model);tdcSidebarPanel.clearPanel()}tdcContextMenu.hide()}});tdcContextMenu.$_resetStyle.on("click",function(f){if(!_.isUndefined(tdcContextMenu._model)){var d=tdcContextMenu._model.get("tag"),b=tdcContextMenu._model.get("attrs");f=_.clone(b);var e=window.tdcAdminSettings.mappedShortcodes[d].tdc_style_params;if(!_.isUndefined(e)){for(var a in b){b=!1;for(var c=0;c<e.length;c++)if(a===
e[c]){b=!0;break}if("tdc_zone"!==d||"type"!==a)b||delete f[a]}if(!_.isUndefined(window.tdcAdminSettings.mappedShortcodes[d].tdc_start_values)){a=JSON.parse(tdcUtil.b64DecodeUnicode(window.tdcAdminSettings.mappedShortcodes[d].tdc_start_values));Array.isArray(a)&&(a=a[0]);for(var g in a)f.hasOwnProperty(g)||(f[g]=a[g])}}tdcContextMenu._model.set("attrs",f);tdcSidebarController.onUpdate(tdcContextMenu._model)}tdcContextMenu.hide()});tdcContextMenu.$_copyStyle.on("mouseover",function(f){""!==tdcContextMenu.$_copyListAttrs.html()&&
tdcContextMenu.$_copyListAttrs.show()});tdcContextMenu.$_copyStyle.on("mouseleave",function(f){tdcContextMenu.$_copyListAttrs.hide()});tdcContextMenu.$_pasteStyle.on("mouseover",function(f){""!==tdcContextMenu.$_pasteListAttrs.html()&&tdcContextMenu.$_pasteListAttrs.show()});tdcContextMenu.$_pasteStyle.on("mouseleave",function(f){tdcContextMenu.$_pasteListAttrs.hide()});tdcContextMenu.$_context.on("click",".tdc-copy-list-style",function(f){var d=jQuery(this).data("list-style");f=tdcSidebarPanel.getCurrentListAtts(f,
tdcContextMenu._model,d);_.isUndefined(f)||(console.log("listAttrs"),console.log(f),tdcUtil.setStorageItem("copyAttrs-"+d,f));tdcContextMenu.hide()});tdcContextMenu.$_saveShortcode.on("click",tdcContextMenu.saveShortcodeHandler);tdcContextMenu.$_deleteShortcode.on("click",tdcContextMenu.deleteHandler);tdcContextMenu.$_cloneShortcode.on("click",tdcContextMenu.cloneHandler);tdcContextMenu.$_clearShortcode.on("click",function(f){var d={error:void 0,getShortcode:""};if(!_.isUndefined(tdcContextMenu._model)){f=
tdcContextMenu._model.get("tag");var b=tdcContextMenu._model.get("childCollection");if(!_.isUndefined(b))if("vc_column"===f||"vc_column_inner"===f)b.reset();else if("vc_row"===f||"vc_row_inner"===f)_.map(b.models,function(a,c){a=a.get("childCollection");_.isUndefined(a)||a.reset()});else if("tdc_zone"===f){var e;_.map(b.models,function(a,c){_.isUndefined(e)&&(e=a);a=a.get("childCollection");_.map(a.models,function(a,c){a=a.get("childCollection");_.isUndefined(a)||a.reset()})});b=new tdcIFrameData.TdcCollection;
b.add(e,{at:0});tdcContextMenu._model.set("childCollection",b)}tdcIFrameData._checkModelData(tdcContextMenu._model,d);if(!_.isUndefined(d.getShortcode)){d=tdcContextMenu._getCurrentElementOver();b="tdc-element-column";if("vc_column_inner"===f||"vc_row_inner"===f||"vc_row"===f)b="tdc-element-inner-column";d.find(".tdc-elements").html('<div class="tdc-element-empty '+b+'" title="Empty element that should be removed by composer"></div>').addClass("tdc-dropped");tdcSidebarController.onUpdate(tdcContextMenu._model)}}tdcContextMenu.hide()})},
copyShortcodeHandler:function(f){f={error:void 0,getShortcode:""};_.isUndefined(tdcContextMenu._model)||tdcIFrameData._checkModelData(tdcContextMenu._model,f);var d=tdcContextMenu._model.get("tag"),b=tdcContextMenu._model.get("attrs"),e=tdcContextMenu._getCurrentElementOver();tdcUtil.setStorageItem("copyShortcodeType",d);tdcUtil.setStorageItem("copyShortcodeAttrs",tdcUtil.b64EncodeUnicode(JSON.stringify(b)));tdcUtil.setStorageItem("copySourceCol",tdcIFrameData._getSourceCol(e));if("vc_column"===d||
"vc_column_inner"===d){var a="";f=tdcContextMenu._model.get("childCollection");_.isUndefined(f)||_.map(f.models,function(c,b){b={error:void 0,getShortcode:""};tdcIFrameData._checkModelData(c,b);_.isUndefined(b.getShortcode)||(a+=b.getShortcode)});tdcUtil.setStorageItem("copyShortcode",tdcUtil.b64EncodeUnicode(a))}else tdcUtil.setStorageItem("copyShortcode",tdcUtil.b64EncodeUnicode(f.getShortcode));tdcContextMenu.hide()},cutShortcodeHandler:function(f){tdcContextMenu.copyShortcodeHandler(f);tdcContextMenu.deleteHandler(f,
!0)},pasteBeforeShortcodeHandler:function(f){var d=f=tdcContextMenu._getCurrentElementOver(),b=tdcUtil.getStorageItem("copyShortcodeType");switch(b){case "vc_row":if(tdcOperationUI.isRow(f))d.before(tdcAdminWrapperUI.$placeholder);else if(tdcOperationUI.isZone(f)||tdcOperationUI.isColumn(f)||tdcOperationUI.isInnerRow(f)||tdcOperationUI.isInnerColumn(f)||tdcOperationUI.isElement(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}break;case "vc_column":if(tdcOperationUI.isRow(f)||
tdcOperationUI.isInnerRow(f)||tdcOperationUI.isInnerColumn(f)||tdcOperationUI.isElement(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}tdcOperationUI.isColumn(f)&&(d=f.find(".tdc-elements .tdc-element-column:first-child"),d.before(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove());break;case "vc_row_inner":if(tdcOperationUI.isRow(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}if(tdcOperationUI.isColumn(f))d=
f.find(".tdc-elements .tdc-element-column:first-child"),d.before(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove();else if(tdcOperationUI.isInnerRow(f))d.before(tdcAdminWrapperUI.$placeholder);else{if(tdcOperationUI.isInnerColumn(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}if(tdcOperationUI.isElement(f)){if(f.hasClass("tdc-element-inner-column")){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});
return}d.before(tdcAdminWrapperUI.$placeholder)}}break;case "vc_column_inner":if(tdcOperationUI.isRow(f)||tdcOperationUI.isInnerRow(f)||tdcOperationUI.isColumn(f)||tdcOperationUI.isElement(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}tdcOperationUI.isInnerColumn(f)&&(d=f.find(".tdc-elements .tdc-element-inner-column:first-child"),d.before(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove());break;default:if(""!==b){if(tdcOperationUI.isRow(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",
{type:"info"});return}tdcOperationUI.isColumn(f)?(d=f.find(".tdc-elements .tdc-element-column:first-child"),d.before(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove()):tdcOperationUI.isInnerRow(f)||tdcOperationUI.isElement(f)?d.before(tdcAdminWrapperUI.$placeholder):tdcOperationUI.isInnerColumn(f)&&(d=f.find(".tdc-elements .tdc-element-inner-column:first-child"),d.before(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove())}}tdcContextMenu._copyShortcode()},
pasteAfterShortcodeHandler:function(f){var d=f=tdcContextMenu._getCurrentElementOver(),b=tdcUtil.getStorageItem("copyShortcodeType");switch(b){case "vc_row":if(tdcOperationUI.isRow(f))d.after(tdcAdminWrapperUI.$placeholder);else if(tdcOperationUI.isZone(f)||tdcOperationUI.isColumn(f)||tdcOperationUI.isInnerRow(f)||tdcOperationUI.isInnerColumn(f)||tdcOperationUI.isElement(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}break;case "vc_column":if(tdcOperationUI.isRow(f)||
tdcOperationUI.isInnerRow(f)||tdcOperationUI.isInnerColumn(f)||tdcOperationUI.isElement(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}tdcOperationUI.isColumn(f)&&(d=f.find(".tdc-elements .tdc-element-column:last-child"),d.after(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove());break;case "vc_row_inner":if(tdcOperationUI.isRow(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}if(tdcOperationUI.isColumn(f))d=
f.find(".tdc-elements .tdc-element-column:last-child"),d.after(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove();else if(tdcOperationUI.isInnerRow(f))d.after(tdcAdminWrapperUI.$placeholder);else{if(tdcOperationUI.isInnerColumn(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}if(tdcOperationUI.isElement(f)){if(f.hasClass("tdc-element-inner-column")){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}d.after(tdcAdminWrapperUI.$placeholder)}}break;
case "vc_column_inner":if(tdcOperationUI.isRow(f)||tdcOperationUI.isInnerRow(f)||tdcOperationUI.isColumn(f)||tdcOperationUI.isElement(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});return}tdcOperationUI.isInnerColumn(f)&&(d=f.find(".tdc-elements .tdc-element-inner-column:last-child"),d.after(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove());break;default:if(""!==b){if(tdcOperationUI.isRow(f)){new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",
{type:"info"});return}tdcOperationUI.isColumn(f)?(d=f.find(".tdc-elements .tdc-element-column:last-child"),d.after(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove()):tdcOperationUI.isInnerRow(f)||tdcOperationUI.isElement(f)?d.after(tdcAdminWrapperUI.$placeholder):tdcOperationUI.isInnerColumn(f)&&(d=f.find(".tdc-elements .tdc-element-inner-column:last-child"),d.after(tdcAdminWrapperUI.$placeholder),d.hasClass("tdc-element-empty")&&d.remove())}}tdcContextMenu._copyShortcode(!0)},
deleteHandler:function(f,d){var b=tdcContextMenu._model.get("tag");"vc_column"!==b&&"vc_column_inner"!==b&&("vc_row"===b?tdcRowHandlerUI.deleteHandler(f):"vc_row_inner"===b?tdcInnerRowHandlerUI.deleteHandler(f):_.isUndefined(d)?tdcElementHandlerUI.deleteHandlerConfirm(f):!0===d&&tdcElementHandlerUI.deleteHandler(f));tdcOperationUI.inactiveElementOver();tdcContextMenu.hide()},exitHandler:function(f){tdcContextMenu._model.set("current",!1);tdcSidebarPanel.clearPanel();tdcContextMenu.hide()},cloneHandler:function(f){var d=
tdcContextMenu._model.get("tag");"vc_column"!==d&&"vc_column_inner"!==d&&("vc_row"===d?tdcRowHandlerUI.cloneHandler(f):"vc_row_inner"===d?tdcInnerRowHandlerUI.cloneHandler(f):tdcElementHandlerUI.cloneHandler(f));tdcContextMenu.hide()},saveShortcodeHandler:function(f){f=tdcContextMenu._model;var d=f.get("tag"),b={error:void 0,getShortcode:""};_.isUndefined(f)||tdcIFrameData._checkModelData(f,b);_.isUndefined(b.getShortcode)||tdConfirm.modal({caption:"Saving Shortcode",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},
100);return'<label>Shortcode Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var e=jQuery("#TB_ajaxContent"),a=e.find(".info");e=e.find("input").val().trim();if(""===e)a.html("Please enter a shortcode name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings[d]&&(window.tdcAdminSettings.tdcSavings[d]=
[]);for(var c=!1,f=0;f<window.tdcAdminSettings.tdcSavings[d].length;f++)if(window.tdcAdminSettings.tdcSavings[d][f].name===e){c=!0;break}c?a.html('Shortcode name already exists for "'+d+'" ! Choose another one'):(a.html("Saving..."),window.tdcAdminSettings.tdcSavings[d].push({name:e,shortcode:tdcUtil.b64EncodeUnicode(b.getShortcode)}),tdcUtil.updateTdcSavings(window,function(){jQuery("#TB_ajaxContent").find(".info").html("Shortcode has been saved!");setTimeout(function(){tb_remove()},500)}))}}});
tdcContextMenu.hide()},setContextMenu:function(f,d){var b="",e=!0,a=!0;if(_.isUndefined(d))return!1;tdcOperationUI.isZone(d)?(b="Zone",e=!1,a=!0):tdcOperationUI.isRow(d)?b="Row":tdcOperationUI.isColumn(d)?(b="Column",e=!1):tdcOperationUI.isInnerRow(d)?b="Inner Row":tdcOperationUI.isInnerColumn(d)?(b="Inner Column",e=!1):tdcOperationUI.isElement(d)&&(b="Element",a=!1);if(""!==b){var c=d.data("model_id"),g=tdcIFrameData.getModel(c);c=g.get("tag");var h=0,n=tdcUtil.getStorageItem("copyShortcodeType"),
l=tdcUtil.getStorageItem("copyShortcode");tdcContextMenu._setCurrentElementOver(d);_.isUndefined(n)||_.isUndefined(l)||""===l?(tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeBefore),tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeAfter)):(l="tdc_zone"!==n&&"vc_row"!==n&&"vc_column"!==n&&"vc_row_inner"!==n&&"vc_column_inner"!==n,tdcOperationUI.isRow(d)&&"vc_row"===n||tdcOperationUI.isColumn(d)&&(l||"vc_row_inner"===n||"vc_column"===n)||tdcOperationUI.isInnerRow(d)&&(l||"vc_row_inner"===
n)||tdcOperationUI.isInnerColumn(d)&&(l||"vc_column_inner"===n)||tdcOperationUI.isElement(d)&&l||tdcOperationUI.isElement(d)&&"vc_row_inner"===n&&!d.hasClass("tdc-element-inner-column")?(tdcContextMenu._enable(tdcContextMenu.$_pasteShortcodeBefore),tdcContextMenu._enable(tdcContextMenu.$_pasteShortcodeAfter)):(tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeBefore),tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeAfter)));"Element"===b&&(b=window.tdcAdminSettings.mappedShortcodes[c].name);
tdcContextMenu._type=b;tdcContextMenu._model=g;!0===tdcMain.getSidebarInline()&&!1===tdcMain.getSidebarHidden()&&(h=tdcSidebar.$_sidebar.width());tdcContextMenu.$_currentType.html(b);"contextmousedown"===f.type&&tdcContextMenu.$_context.show().css({left:f.pageX+h,top:f.pageY-tdcAdminIFrameUI._liveIframeWindowObject.scrollY});tdcContextMenu.$_context.find(".tdc-copy-list-style, .tdc-paste-list-style").remove();f=!1;if(!_.isUndefined(window.tdcAdminSettings.listStyles))for(var k in window.tdcAdminSettings.listStyles)for(var m in window.tdcAdminSettings.listStyles[k])m===
c&&(tdcContextMenu.$_copyListAttrs.append('<li class="tdc-copy-list-style active" data-list-style="'+k+'">Copy '+k+"</li>"),tdcContextMenu.$_pasteListAttrs.append('<li class="tdc-paste-list-style active" data-list-style="'+k+'">Paste '+k+"</li>"),f=!0);f?(tdcContextMenu.$_copyAttrs.show(),tdcContextMenu.$_copyStyle.find("i").show(),tdcContextMenu.$_pasteStyle.find("i").show()):(tdcContextMenu.$_copyAttrs.hide(),tdcContextMenu.$_copyStyle.find("i").hide(),tdcContextMenu.$_pasteStyle.find("i").hide());
k=tdcUtil.getStorageItem("copyStyleType");m=tdcUtil.getStorageItem("copyStyleAttrs");_.isUndefined(window.tdcAdminSettings.mappedShortcodes[c].tdc_style_params)&&!f?(tdcContextMenu._disable(tdcContextMenu.$_copyStyle),tdcContextMenu._disable(tdcContextMenu.$_resetStyle)):(tdcContextMenu._enable(tdcContextMenu.$_copyStyle),tdcContextMenu._enable(tdcContextMenu.$_resetStyle));_.isUndefined(k)||_.isUndefined(m)?tdcContextMenu._disable(tdcContextMenu.$_pasteStyle):tdcContextMenu._enable(tdcContextMenu.$_pasteStyle);
"tdc_zone"!==c&&tdcContextMenu._enable(tdcContextMenu.$_copyShortcode);e?(tdcContextMenu._enable(tdcContextMenu.$_saveShortcode),tdcContextMenu._enable(tdcContextMenu.$_deleteShortcode),tdcContextMenu._enable(tdcContextMenu.$_cloneShortcode),tdcContextMenu._enable(tdcContextMenu.$_cutShortcode)):(tdcContextMenu._disable(tdcContextMenu.$_saveShortcode),tdcContextMenu._disable(tdcContextMenu.$_deleteShortcode),tdcContextMenu._disable(tdcContextMenu.$_cloneShortcode),tdcContextMenu._disable(tdcContextMenu.$_cutShortcode));
a?tdcContextMenu._enable(tdcContextMenu.$_clearShortcode):tdcContextMenu._disable(tdcContextMenu.$_clearShortcode);return!0}return!1},_enable:function(f){f.addClass("active")},_disable:function(f){f.removeClass("active")},hide:function(){tdcContextMenu.$_context.hide()},_setCurrentElementOver:function(f){tdcContextMenu.$_currentElementOver=f},_getCurrentElementOver:function(){return tdcContextMenu.$_currentElementOver},_copyShortcode:function(f){tdcOperationUI.setCurrentElementOver(tdcContextMenu._getCurrentElementOver());
tdcOperationUI._copyElement(f);tdcContextMenu.hide()}};tdcContextMenu.init()})();
(function(f,d,b,e){f.widget("wp.wpColorPicker",{options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv"},_create:function(){if(f.support.iris){var a=this,c=a.element;f.extend(a.options,c.data());a.close=f.proxy(a.close,a);a.initialValue=c.val();c.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />');a.wrap=c.parent();a.toggler=f('<a tabindex="0" class="wp-color-result" />').insertBefore(c).css({backgroundColor:a.initialValue}).attr("title",wp.i18n.__("Select Color")).attr("data-current",
"");a.pickerContainer=f('<div class="wp-picker-holder" />').insertAfter(c);a.button=f('<input type="button" class="button button-small hidden" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val(wp.i18n.__("Default")):a.button.addClass("wp-picker-clear").val(wp.i18n.__("Clear"));c.wrap('<span class="wp-picker-input-wrap" />').after(a.button);c.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,change:function(c,
b){a.toggler.css({backgroundColor:b.color.toString()});f.isFunction(a.options.change)&&a.options.change.call(this,c,b)}});c.val(a.initialValue);a._addListeners();a.options.hide||a.toggler.click()}},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(a){a.stopPropagation()});a.toggler.click(function(){a.toggler.hasClass("wp-picker-open")?a.close():a.open()});a.element.change(function(c){var b=f(this).val();if(""===b||"#"===b)a.toggler.css("backgroundColor",""),f.isFunction(a.options.clear)&&
a.options.clear.call(this,c)});a.toggler.on("keyup",function(c){if(13===c.keyCode||32===c.keyCode)c.preventDefault(),a.toggler.trigger("click").next().focus()});a.button.click(function(c){var b=f(this);b.hasClass("wp-picker-clear")?(a.element.val(""),a.toggler.css("backgroundColor",""),f.isFunction(a.options.clear)&&a.options.clear.call(this,c)):b.hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})},open:function(){this.element.show().iris("toggle").focus();this.button.removeClass("hidden");
this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");f("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide();this.element.iris("instance")&&this.element.iris("toggle");this.button.addClass("hidden");this.wrap.removeClass("wp-picker-active");this.toggler.removeClass("wp-picker-open");f("body").off("click.wpcolorpicker",this.close)},color:function(a){if(a===e)return this.element.iris("option","color");this.element.iris("option",
"color",a)},defaultColor:function(a){if(a===e)return this.options.defaultColor;this.options.defaultColor=a}});typeof Color.fn.toString!==e&&(Color.fn.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>a.length)for(var c=6-a.length-1;0<=c;c--)a="0"+a;return"#"+a});f.cs_ParseColorValue=function(a){a=a.replace(/\s+/g,"");var c=-1!==a.indexOf("rgba")?parseFloat(100*a.replace(/^.*,(.+)\)/,
"$1")):100;return{value:a,alpha:c,rgba:100>c?!0:!1}};f.widget("wp.tdGradientColorPicker",f.wp.wpColorPicker,{open_gradient:function(a){this.element.show().iris("show").focus();this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");this.wrap.find(".tdc-gradient-result-percentage").html("");this.element.tdGradient().get(0).init(a)}});f.widget("wp.tdPaletteColorPicker",f.wp.wpColorPicker,{open_palette:function(a){this.element.show().iris("show").focus();
this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");this.element.tdPalette().get(0).init(a)},save_color:function(){var a=this.element.tdPalette().get(0).color;if("undefined"!==typeof a){""===d.tdcAdminSettings.tdcSavings&&(d.tdcAdminSettings.tdcSavings={});"undefined"===typeof d.tdcAdminSettings.tdcSavings.recentColors&&(d.tdcAdminSettings.tdcSavings.recentColors=[]);var c=d.btoa(JSON.stringify(a)),b=d.tdcAdminSettings.tdcSavings.recentColors.indexOf(c),
e=f(".tdc-gradient-color-values"),n=f(".tdc-color-values");-1!==b&&(d.tdcAdminSettings.tdcSavings.recentColors.splice(b,1),f('.tdc-color-value[data-color="'+a+'"]').remove(),f('.tdc-gradient-color-value[data-color="'+a+'"]').remove());d.tdcAdminSettings.tdcSavings.recentColors.push(c);23<=d.tdcAdminSettings.tdcSavings.recentColors.length&&(n.find(".tdc-color-value:last").remove(),e.find(".tdc-gradient-color-value:last").remove(),d.tdcAdminSettings.tdcSavings.recentColors.splice(0,1));tdcUtil.updateTdcSavings();
n.prepend('<div class="tdc-color-value" data-color="'+a+'" style="background-color:'+a+'"><div class="tdc-color-value-delete"></div>');e.prepend('<div class="tdc-gradient-color-value" data-color="'+a+'" style="background-color:'+a+'"><div class="tdc-gradient-color-value-delete"></div>')}}});"undefined"===typeof f.fn.tdGradient&&(f.fn.tdGradient=function(){return this.each(function(){var a=this,c=f(this);a.$this=c;if(!1!==c.data("rgba")){var b=f.cs_ParseColorValue(c.val());c.tdGradientColorPicker({clear:function(){c.trigger("keyup")},
change:function(b,e){b=e.color.toString();c.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",b);c.val(b).trigger("change");a.triggerSelection?a.setColor(b,!0):a.setColor(b)},create:function(){var g=c.data("a8cIris"),n=c.closest(".wp-picker-container"),l=f('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(n.find(".wp-picker-holder")),k=l.find(".cs-alpha-slider"),
m=l.find(".cs-alpha-text"),p=l.find(".cs-alpha-slider-offset"),q=f('<div class="tdc-gradient-result-wrap"></div>').prependTo(n);q=f('<div class="tdc-gradient-result"><div class="tdc-gradient-color tdc-gradient-left-color"></div><div class="tdc-gradient-color tdc-gradient-right-color"></div></div>').prependTo(q);f('<div class="tdc-gradient-degree-label">deg.</div><input class="tdc-gradient-degree" placeholder="0">').appendTo(n.find(".wp-picker-input-wrap"));f('<div class="tdc-gradient-result-labels"><div class="tdc-gradient-result-label">Solid color</div><div class="tdc-gradient-result-label tdc-gradient-result-percentage"></div><div class="tdc-gradient-result-label">Gradient</div></div>').prependTo(n);
f('<div class="tdc-gradient-save">Save Gradient</div>').appendTo(n);var t=f('<div class="tdc-gradient-presets">Gradient presets</div>').appendTo(n),v=f('<div class="tdc-gradient-values-wrapper"></div>').appendTo(n);v=f('<div class="tdc-gradient-values"></div>').appendTo(v);var u=f('<div class="tdc-gradient-color-values-wrapper"></div>').appendTo(n);u=f('<div class="tdc-gradient-color-values"></div>').appendTo(u);if("undefined"!==typeof d.tdcAdminSettings.tdcSavings.gradients&&d.tdcAdminSettings.tdcSavings.gradients.length)for(var r=
!1,w=d.tdcAdminSettings.tdcSavings.gradients.length-1;0<=w;w--){var A=d.tdcAdminSettings.tdcSavings.gradients[w];try{var x=JSON.parse(d.atob(A));"undefined"!==typeof x.css&&(r=!0,f('<div class="tdc-gradient-value" style="'+x.css+'" data-gradient="'+A+'"><div class="tdc-gradient-value-delete"></div></div>').appendTo(v))}catch(z){}}r||t.hide();a.$container=n;a.$gradientResult=q;k.slider({slide:function(a,b){a=parseFloat(b.value/100);g._color._alpha=a;c.tdGradientColorPicker("color",g._color.toString());
m.text(1>a?a:"")},create:function(){var d=parseFloat(b.alpha/100);m.text(1>d?d:"");p.css("background-color",b.value);n.on("click",".wp-picker-clear",function(){g._color._alpha=1;m.text("");k.slider("option","value",100).trigger("slide");a.triggerSelection?a.setColor(e,!0):a.setColor(e)});n.on("click",".wp-picker-default",function(){var a=f.cs_ParseColorValue(c.data("default-color")),b=parseFloat(a.alpha/100);g._color._alpha=b;m.text(1>b?b:"");k.slider("option","value",a.alpha).trigger("slide")});
n.on("click",".wp-color-result",function(a){l.toggle()});f("body").on("click.wpcolorpicker",function(){l.hide()});n.on("change keyup",".tdc-gradient-degree",function(c){c=f(this);a.degree=c.val().trim();a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()})},value:b.alpha,step:1,min:0,max:100});if("undefined"!==typeof d.tdcAdminSettings.tdcSavings.recentColors&&d.tdcAdminSettings.tdcSavings.recentColors.length)for(w=d.tdcAdminSettings.tdcSavings.recentColors.length-1;0<=w;w--){r=d.tdcAdminSettings.tdcSavings.recentColors[w];
try{x=JSON.parse(d.atob(r)),"undefined"!==typeof x&&f('<div class="tdc-gradient-color-value" style="background-color: '+x+'" data-color="'+x+'"><div class="tdc-gradient-color-value-delete"></div></div>').appendTo(u)}catch(z){}}}})}else c.tdGradientColorPicker({clear:function(){c.trigger("keyup")},change:function(a,b){c.val(b.color.toString()).trigger("change")}});"undefined"===typeof a.setColor&&(a.setColor=function(c,b){"undefined"===typeof a.currentColor&&(a.currentColor="left",a.$gradientResult.find(".tdc-gradient-selected-color").remove(),
a.$container.find(".tdc-gradient-left-color").html('<span class="tdc-gradient-selected-color"></span>'),a.color1=c);switch(a.currentColor){case "left":a.color1=c;"undefined"!==typeof c||"undefined"===typeof a.color2||a.mixedColors.length||(a.color1=a.color2,a.color2=c,a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a._showColor(a.color1));break;case "right":a.color2=c;"undefined"!==
typeof c||"undefined"===typeof a.color1||a.mixedColors.length||(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a.currentColor="left",a._showColor(a.color1));break;case "mixed":a._setMixedColor(c),"undefined"===typeof c&&"undefined"!==typeof a.color1&&(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),
a.currentColor="left",a._showColor(a.color1))}c=a.$container.find(".tdc-gradient-degree");"undefined"===typeof a.degree?c.val(""):c.val(a.degree);a.mixedColors=a._getMixedColors();a._updateGradient();!0===b&&a._saveValue()},a._showColor=function(c){a.triggerSelection=!1;a.$this.tdGradientColorPicker("color",c);a.triggerSelection=!0;c=f.cs_ParseColorValue(c);var b=parseFloat(c.alpha/100);b=1>b?b:"";a.$container.find(".cs-alpha-text").text(b);a.$container.find(".cs-alpha-slider-offset").css("background-color",
c.value);a.$container.find(".cs-alpha-slider").slider("option","value",c.alpha).trigger("slide")},a.$container.on("mousedown",".tdc-gradient-color",function(c){c.stopImmediatePropagation();var b=f(this),e=a.$container.find(".tdc-gradient-result-percentage");a.$gradientResult.find(".tdc-gradient-selected-color").remove();b.html('<div class="tdc-gradient-selected-color"></div>');b.hasClass("tdc-gradient-mix-color")?(b.addClass("tdc-gradient-current-mix"),a.eventOffsetX=c.offsetX,e.html(Math.round(100-
b.data("percentage"))+"%")):e.html("");c=f(c.currentTarget);if(c.hasClass("tdc-gradient-left-color")){if(a.currentColor="left","undefined"!==typeof a.color1)var d=a.color1}else c.hasClass("tdc-gradient-right-color")?(a.currentColor="right","undefined"!==typeof a.color2&&(d=a.color2)):(a.currentColor="mixed",c=a._getCurrentMixedColor(),"undefined"!==typeof c&&(d=c.color));"undefined"!==typeof d&&a._showColor(d)}),a.$container.on("mousedown",".tdc-gradient-result",function(c){if(c.target===c.currentTarget){var b=
f(c.target);b.find(".tdc-gradient-selected-color").remove();var e=f('<div class="tdc-gradient-mix-color tdc-gradient-color"><div class="tdc-gradient-selected-color"></div></div>').appendTo(b);c=c.pageX-b.offset().left-e.outerWidth(!0)/2;b=Math.round(100-100*c/(b.width()-e.outerWidth(!0)));e.css("left",c);e.data("percentage",b);a.currentColor="mixed"}}),a.$container.on("mouseup",".tdc-gradient-mix-color",function(c){f(this).removeClass("tdc-gradient-current-mix");a.eventOffsetX=e}),a.$container.on("mousemove",
".tdc-gradient-result",function(c){var b=a.$container.find(".tdc-gradient-result-percentage"),e=a.$container.find(".tdc-gradient-result"),d=e.find(".tdc-gradient-right-color"),f=e.find(".tdc-gradient-current-mix");if(f.length){var g=0;"undefined"!==typeof a.eventOffsetX&&(g=a.eventOffsetX);c=c.pageX-e.offset().left-f.width()/2-g;g=100*c/(e.width()-f.outerWidth(!0));0>g?c=g=0:100<g&&(g=100,c=e.width()-d.outerWidth(!0));b.html(Math.round(g)+"%");f.css("left",c);f.data("percentage",Math.round(100-g));
a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()}}),a._getCurrentMixedColor=function(){var c=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color"),b;c.length&&(b={color:c.parent().data("color"),percentage:c.parent().data("percentage")});return b},a._setMixedColor=function(c){var b=a.$container.find(".tdc-gradient-result-percentage"),e=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color");
e.length&&("undefined"===typeof c?(e.parent().remove(),b.html("")):e.parent().data("color",c))},a._getMixedColors=function(){var c=[];a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color").each(function(){var a=f(this),b=a.data("color");a=a.data("percentage");c.push({color:b,percentage:a})});c.sort(function(a,c){return a.percentage-c.percentage});return c},a._updateGradient=function(){if("undefined"!==typeof a.color1&&"undefined"!==typeof a.color2&&a.color1!==a.color2){var c="",
b="",d=b="",g=["-webkit-linear-gradient","linear-gradient"];b="undefined"!==typeof a.degree&&""!==a.degree.trim()?a.degree+"deg,":"0deg,";for(var m=0;m<g.length;m++){var p="";if("undefined"!==typeof a.mixedColors)for(var q=0;q<a.mixedColors.length;q++){var t="";"undefined"!==typeof a.mixedColors[q].percentage&&(t=a.mixedColors[q].percentage+"%");"undefined"!==typeof a.mixedColors[q].color&&(p+=a.mixedColors[q].color+" "+t+",")}c+="background: "+g[m]+"("+b+a.color2+","+p+a.color1+");";d+="background: "+
g[m]+"( -90deg,"+a.color2+","+p+a.color1+");"}b=b+a.color2+","+p+a.color1;a.result={type:"gradient",color1:a.color1,color2:a.color2,mixedColors:a.mixedColors,degree:a.degree,css:c,cssParams:b};a.$gradientResult.attr("style",d)}else if("undefined"!==typeof a.color1||"undefined"!==typeof a.color2){c="color1";var v="color2";"undefined"!==typeof a.color2&&(c="color2",v="color1");if(a.mixedColors.length){var u=a.mixedColors[0];"undefined"!==typeof a.color2&&(u=a.mixedColors[a.mixedColors.length-1]);c=
a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color");f.each(c,function(){var c=f(this);u.color===c.data("color")&&u.percentage===c.data("percentage")&&(a[v]=c.data("color"),c.remove())});a.mixedColors=a._getMixedColors();a._updateGradient();a._showColor(a[v])}else a.result={type:"solid",color:a[c],css:"background: "+a[c]+";"},a.$gradientResult.css("background",a[c])}else a.result=e,a.$gradientResult.css("background","")},a.$container.on("mousedown",".tdc-gradient-save",function(c){var b=
a.$container.find(".tdc-gradient-values");""===d.tdcAdminSettings.tdcSavings&&(d.tdcAdminSettings.tdcSavings={});"undefined"===typeof d.tdcAdminSettings.tdcSavings.gradients&&(d.tdcAdminSettings.tdcSavings.gradients=[]);if("gradient"===a.result.type){var e=d.btoa(JSON.stringify(a.result));-1===d.tdcAdminSettings.tdcSavings.gradients.indexOf(e)&&(d.tdcAdminSettings.tdcSavings.gradients.push(e),tdcUtil.updateTdcSavings(this,function(){f('<div class="tdc-gradient-value" style="'+a.result.css+'" data-gradient="'+
e+'"><div class="tdc-gradient-value-delete"></div></div>').prependTo(b);a.$container.find(".tdc-gradient-presets").show()}))}}),a.$container.on("mousedown",".tdc-gradient-value",function(c){c=jQuery(c.currentTarget).data("gradient");var b=a.$container.parent().prev(".tdc-property-gradient"),e=b.find("input");b=b.find(".tdc-gradient-wrap");a.init(c);e.val(c);b.attr("style",a.result.css);e.trigger("change")}),a.$container.on("mousedown",".tdc-gradient-color-value",function(c){var b=jQuery(c.currentTarget).data("color"),
e=a.$container.parent().prev(".tdc-property-gradient");c=e.find("input");e=e.find(".tdc-gradient-wrap");b=tdcUtil.b64EncodeUnicode(JSON.stringify({type:"gradient",color1:b,color2:b,mixedColors:[],degree:"-90",css:"background-color: "+b+";",cssParams:"0deg,"+b+","+b}));a.init(b);c.val(b);e.attr("style",a.result.css);c.trigger("change")}),a.$container.on("mousedown",".tdc-gradient-value-delete",function(c){c.preventDefault();c.stopImmediatePropagation();if("undefined"===typeof d.tdcAdminSettings.tdcSavings.gradients||
0===d.tdcAdminSettings.tdcSavings.gradients.length)a.$container.find(".tdc-gradient-value").remove();else{var b=f(this).parent();c=b.data("gradient");c=d.tdcAdminSettings.tdcSavings.gradients.indexOf(c);d.tdcAdminSettings.tdcSavings.gradients.splice(c,1);c=!0;for(var e in d.tdcAdminSettings.tdcSavings)if(d.tdcAdminSettings.tdcSavings[e].length){c=!1;break}c&&(d.tdcAdminSettings.tdcSavings="");tdcUtil.updateTdcSavings(this,function(){""!==d.tdcAdminSettings.tdcSavings&&0!==d.tdcAdminSettings.tdcSavings.gradients.length||
a.$container.find(".tdc-gradient-presets").hide();b.remove()})}}),a.$container.on("mousedown",".tdc-gradient-color-value-delete",function(a){a.preventDefault();a.stopImmediatePropagation();var c=f(this).parent();a=c.data("color");a=d.btoa(JSON.stringify(a));a=d.tdcAdminSettings.tdcSavings.recentColors.indexOf(a);d.tdcAdminSettings.tdcSavings.recentColors.splice(a,1);a=!0;for(var b in d.tdcAdminSettings.tdcSavings)if(d.tdcAdminSettings.tdcSavings[b].length){a=!1;break}a&&(d.tdcAdminSettings.tdcSavings=
"");tdcUtil.updateTdcSavings(this,function(){c.remove()})}),a._saveValue=function(){var c=a.$container.parent().prev(".tdc-property-gradient"),b=c.find("input");c=c.find(".tdc-gradient-wrap");if("undefined"===typeof a.result)b.val(""),c.removeAttr("style");else{switch(a.result.type){case "solid":b.val(a.result.color);break;case "gradient":b.val(d.btoa(JSON.stringify(a.result)))}c.attr("style",a.result.css)}b.trigger("change")},a.init=function(c){a.triggerSelection=!1;a.color1=e;a.color2=e;a.mixedColors=
e;a.degree=e;a.currentColor=e;a.$container.find(".cs-alpha-text").text("");a.$container.find(".cs-alpha-slider-offset").css("background-color","");a.$container.find(".cs-alpha-slider").slider("option","value",100).trigger("slide");var b=a.$container.find(".tdc-gradient-result");b.find(".tdc-gradient-mix-color").remove();if("undefined"!==typeof c&&""!==c){try{c=JSON.parse(d.atob(c));a.color1=c.color1;a.color2=c.color2;a.degree=c.degree;a.setColor(a.color1);a.$this.tdGradientColorPicker("color",a.color1);
a.mixedColors=c.mixedColors;if("undefined"!==typeof a.mixedColors)for(var g=0;g<a.mixedColors.length;g++){var h=f('<div class="tdc-gradient-color tdc-gradient-mix-color"></div>').appendTo(b),m=(b.width()-h.outerWidth(!0))*(100-a.mixedColors[g].percentage)/100;h.css("left",m);h.data("percentage",a.mixedColors[g].percentage);"undefined"!==typeof a.mixedColors[g].color&&h.data("color",a.mixedColors[g].color)}a._updateGradient()}catch(p){a.setColor(c),a.$this.tdGradientColorPicker("color",c)}c=f.cs_ParseColorValue(a.color1);
b=parseFloat(c.alpha/100);b=1>b?b:"";a.$container.find(".cs-alpha-text").text(b);a.$container.find(".cs-alpha-slider-offset").css("background-color",c.value);a.$container.find(".cs-alpha-slider").slider("option","value",c.alpha).trigger("slide")}else a.setColor(e),a.$container.find(".wp-picker-clear").trigger("click");a.triggerSelection=!0})})});"undefined"===typeof f.fn.tdPalette&&(f.fn.tdPalette=function(){return this.each(function(){var a=this,c=f(this);a.$this=c;if(!1!==c.data("rgba")){var b=
f.cs_ParseColorValue(c.val());c.tdPaletteColorPicker({clear:function(){c.trigger("keyup")},change:function(b,e){b=e.color.toString();c.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",b);c.val(b).trigger("change");a.triggerSelection?a.setColor(b,!0):a.setColor(b)},create:function(){var g=c.data("a8cIris"),n=c.closest(".wp-picker-container"),l=f('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(n.find(".wp-picker-holder")),
k=l.find(".cs-alpha-slider"),m=l.find(".cs-alpha-text"),p=l.find(".cs-alpha-slider-offset"),q=f('<div class="tdc-color-values"></div>').appendTo(n.find(".wp-picker-holder"));a.$container=n;if("undefined"!==typeof d.tdcAdminSettings.tdcSavings.recentColors&&d.tdcAdminSettings.tdcSavings.recentColors.length)for(var t=d.tdcAdminSettings.tdcSavings.recentColors.length-1;0<=t;t--){var v=d.tdcAdminSettings.tdcSavings.recentColors[t];try{var u=JSON.parse(d.atob(v));"undefined"!==typeof u&&f('<div class="tdc-color-value" style="background-color: '+
u+'" data-color="'+u+'"><div class="tdc-color-value-delete"></div></div>').appendTo(q)}catch(r){}}k.slider({slide:function(a,b){a=parseFloat(b.value/100);g._color._alpha=a;c.tdPaletteColorPicker("color",g._color.toString());m.text(1>a?a:"")},create:function(){var d=parseFloat(b.alpha/100);m.text(1>d?d:"");p.css("background-color",b.value);n.on("click",".wp-picker-clear",function(){g._color._alpha=1;m.text("");k.slider("option","value",100).trigger("slide");a.triggerSelection?a.setColor(e,!0):a.setColor(e)});
n.on("click",".wp-picker-default",function(){var a=f.cs_ParseColorValue(c.data("default-color")),b=parseFloat(a.alpha/100);g._color._alpha=b;m.text(1>b?b:"");k.slider("option","value",a.alpha).trigger("slide")});n.on("click",".wp-color-result",function(a){l.toggle()});f("body").on("click.wpcolorpicker",function(){l.hide()})},value:b.alpha,step:1,min:0,max:100})}})}else c.tdPaletteColorPicker({clear:function(){c.trigger("keyup")},change:function(a,b){c.val(b.color.toString()).trigger("change")}});
"undefined"===typeof a.setColor&&(a.setColor=function(c,b){a.color=c;!0===b&&a._saveValue()},a._saveValue=function(){var c=a.$container.parent().prev(".tdc-property-colorpicker"),b=c.find("input");c=c.find(".tdc-colorpicker-wrap");"undefined"===typeof a.color?(b.val(""),c.removeAttr("style")):(b.val(a.color),c.attr("style","background: "+a.color));b.trigger("change")},a.$container.on("mousedown",".tdc-color-value",function(c){c=jQuery(c.currentTarget).data("color");a.init(c);a._saveValue()}),a.$container.on("mousedown",
".tdc-color-value-delete",function(a){a.preventDefault();a.stopImmediatePropagation();var c=f(this).parent();a=c.data("color");a=d.btoa(JSON.stringify(a));a=d.tdcAdminSettings.tdcSavings.recentColors.indexOf(a);d.tdcAdminSettings.tdcSavings.recentColors.splice(a,1);a=!0;for(var b in d.tdcAdminSettings.tdcSavings)if(d.tdcAdminSettings.tdcSavings[b].length){a=!1;break}a&&(d.tdcAdminSettings.tdcSavings="");tdcUtil.updateTdcSavings(this,function(){c.remove()})}),a.init=function(c){a.triggerSelection=
!1;a.color=e;a.$container.find(".cs-alpha-text").text("");a.$container.find(".cs-alpha-slider-offset").css("background-color","");a.$container.find(".cs-alpha-slider").slider("option","value",100).trigger("slide");if("undefined"!==typeof c&&""!==c){a.setColor(c);a.$this.tdPaletteColorPicker("color",c);c=f.cs_ParseColorValue(a.color);var b=parseFloat(c.alpha/100);b=1>b?b:"";a.$container.find(".cs-alpha-text").text(b);a.$container.find(".cs-alpha-slider-offset").css("background-color",c.value);a.$container.find(".cs-alpha-slider").slider("option",
"value",c.alpha).trigger("slide")}else a.setColor(e),a.$container.find(".wp-picker-clear").trigger("click");a.triggerSelection=!0})})})})(jQuery,window,document);
(function(f){var d=function(){this.cssImportStatements=[];this.cssKeyframeStatements=[];this.cssRegex=/([\s\S]*?){([\s\S]*?)}/gi;this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.combinedCSSRegex="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})";this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)";this.cssImportStatementRegex=/@import .*?;/gi};d.prototype.stripComments=
function(b){return b.replace(new RegExp(this.cssCommentsRegex,"gi"),"")};d.prototype.parseCSS=function(b){if(void 0===b)return[];for(var e=[];;){var a=this.cssImportStatementRegex.exec(b);if(null!==a)this.cssImportStatements.push(a[0]),e.push({selector:"@imports",type:"imports",styles:a[0]});else break}b=b.replace(this.cssImportStatementRegex,"");a=new RegExp(this.cssKeyframeRegex,"gi");for(var c;;){c=a.exec(b);if(null===c)break;e.push({selector:"@keyframes",type:"keyframes",styles:c[0]})}b=b.replace(a,
"");for(a=new RegExp(this.combinedCSSRegex,"gi");;){c=a.exec(b);if(null===c)break;var d=void 0===c[2]?c[5].split("\r\n").join("\n").trim():c[2].split("\r\n").join("\n").trim();var f=new RegExp(this.cssCommentsRegex,"gi"),n=f.exec(d);null!==n&&(d=d.replace(f,"").trim());d=d.replace(/\n+/,"\n");-1!==d.indexOf("@media")?(d={selector:d,type:"media",subStyles:this.parseCSS(c[3]+"\n}")},null!==n&&(d.comments=n[0]),e.push(d)):(c=this.parseRules(c[6]),c={selector:d,rules:c},"@font-face"===d&&(c.type="font-face"),
null!==n&&(c.comments=n[0]),e.push(c))}return e};d.prototype.parseRules=function(b){b=b.split("\r\n").join("\n");var e=[];b=b.split(";");for(var a=0;a<b.length;a++){var c=b[a];c=c.trim();if(-1!==c.indexOf(":")){c=c.split(":");var d=c[0].trim();c=c.slice(1).join(":").trim();1>d.length||1>c.length||e.push({directive:d,value:c})}else"base64,"===c.trim().substr(0,7)?e[e.length-1].value+=c.trim():0<c.length&&e.push({directive:"",value:c,defective:!0})}return e};d.prototype.findCorrespondingRule=function(b,
e,a){void 0===a&&(a=!1);for(var c=!1,d=0;d<b.length&&(b[d].directive!==e||(c=b[d],a!==b[d].value));d++);return c};d.prototype.findBySelector=function(b,e,a){void 0===a&&(a=!1);for(var c=[],d=0;d<b.length;d++)!1===a?b[d].selector===e&&c.push(b[d]):-1!==b[d].selector.indexOf(e)&&c.push(b[d]);if(2>c.length)return c;b=c[0];for(d=1;d<c.length;d++)this.intelligentCSSPush([b],c[d]);return[b]};d.prototype.deleteBySelector=function(b,e){for(var a=[],c=0;c<b.length;c++)b[c].selector!==e&&a.push(b[c]);return a};
d.prototype.compressCSS=function(b){for(var e=[],a={},c=0;c<b.length;c++){var d=b[c];if(!0!==a[d.selector]){var f=this.findBySelector(b,d.selector);0!==f.length&&(e.push(f[0]),a[d.selector]=!0)}}return e};d.prototype.cssDiff=function(b,e){if(b.selector!==e.selector||"media"===b.type||"media"===e.type)return!1;for(var a={selector:b.selector,rules:[]},c,d,f=0;f<b.rules.length;f++)c=b.rules[f],d=this.findCorrespondingRule(e.rules,c.directive,c.value),!1===d?a.rules.push(c):c.value!==d.value&&a.rules.push(c);
for(f=0;f<e.rules.length;f++)d=e.rules[f],c=this.findCorrespondingRule(b.rules,d.directive),!1===c&&(d.type="DELETED",a.rules.push(d));return 0===a.rules.length?!1:a};d.prototype.intelligentMerge=function(b,e,a){void 0===a&&(a=!1);for(var c=0;c<e.length;c++)this.intelligentCSSPush(b,e[c],a);for(c=0;c<b.length;c++)e=b[c],"media"!==e.type&&"keyframes"!==e.type&&(e.rules=this.compactRules(e.rules))};d.prototype.intelligentCSSPush=function(b,e,a){var c=!1;void 0===a&&(a=!1);if(!1===a)for(a=0;a<b.length;a++){if(b[a].selector===
e.selector){c=b[a];break}}else for(a=b.length-1;-1<a;a--)if(b[a].selector===e.selector){c=b[a];break}if(!1===c)b.push(e);else if("media"!==e.type)for(b=0;b<e.rules.length;b++){a=e.rules[b];var d=this.findCorrespondingRule(c.rules,a.directive);!1===d?c.rules.push(a):"DELETED"===a.type?d.type="DELETED":d.value=a.value}else c.subStyles=c.subStyles.concat(e.subStyles)};d.prototype.compactRules=function(b){for(var e=[],a=0;a<b.length;a++)"DELETED"!==b[a].type&&e.push(b[a]);return e};d.prototype.getCSSForEditor=
function(b,e){void 0===e&&(e=0);var a="";void 0===b&&(b=this.css);for(var c=0;c<b.length;c++)"imports"===b[c].type&&(a+=b[c].styles+"\n\n");for(c=0;c<b.length;c++){var d=b[c];if(void 0!==d.selector){var f="";void 0!==d.comments&&(f=d.comments+"\n");"media"===d.type?(a+=f+d.selector+"{\n",a+=this.getCSSForEditor(d.subStyles,e+1),a+="}\n\n"):"keyframes"!==d.type&&"imports"!==d.type&&(a+=this.getSpaces(e)+f+d.selector+" {\n",a+=this.getCSSOfRules(d.rules,e+1),a+=this.getSpaces(e)+"}\n\n")}}for(c=0;c<
b.length;c++)"keyframes"===b[c].type&&(a+=b[c].styles+"\n\n");return a};d.prototype.getImports=function(b){for(var e=[],a=0;a<b.length;a++)"imports"===b[a].type&&e.push(b[a].styles);return e};d.prototype.getCSSOfRules=function(b,e){for(var a="",c=0;c<b.length;c++)void 0!==b[c]&&(a=void 0===b[c].defective?a+(this.getSpaces(e)+b[c].directive+": "+b[c].value+";\n"):a+(this.getSpaces(e)+b[c].value+";\n"));return a||"\n"};d.prototype.getSpaces=function(b){for(var e="",a=0;a<4*b;a++)e+=" ";return e};d.prototype.applyNamespacing=
function(b,e){var a=b,c="."+this.cssPreviewNamespace;void 0!==e&&(c=e);"string"===typeof b&&(a=this.parseCSS(b));for(b=0;b<a.length;b++){var d=a[b];if(!(-1<d.selector.indexOf("@font-face")||-1<d.selector.indexOf("keyframes")||-1<d.selector.indexOf("@import")||-1<d.selector.indexOf(".form-all")||-1<d.selector.indexOf("#stage")))if("media"!==d.type){for(var f=d.selector.split(","),n=[],l=0;l<f.length;l++)-1===f[l].indexOf(".supernova")?n.push(c+" "+f[l]):n.push(f[l]);d.selector=n.join(",")}else d.subStyles=
this.applyNamespacing(d.subStyles,e)}return a};d.prototype.clearNamespacing=function(b,e){void 0===e&&(e=!1);var a=b,c="."+this.cssPreviewNamespace;"string"===typeof b&&(a=this.parseCSS(b));for(b=0;b<a.length;b++){var d=a[b];if("media"!==d.type){for(var f=d.selector.split(","),n=[],l=0;l<f.length;l++)n.push(f[l].split(c+" ").join(""));d.selector=n.join(",")}else d.subStyles=this.clearNamespacing(d.subStyles,!0)}return!1===e?this.getCSSForEditor(a):a};d.prototype.createStyleElement=function(b,e,a){void 0===
a&&(a=!1);!1===this.testMode&&"nonamespace"!==a&&(e=this.applyNamespacing(e));"string"!==typeof e&&(e=this.getCSSForEditor(e));!0===a&&(e=this.getCSSForEditor(this.parseCSS(e)));if(!1!==this.testMode)return this.testMode("create style #"+b,e);(a=document.getElementById(b))&&a.parentNode.removeChild(a);a=document.head||document.getElementsByTagName("head")[0];var c=document.createElement("style");c.id=b;c.type="text/css";a.appendChild(c);c.styleSheet&&!c.sheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e))};
f.cssjs=d})(this);
(function(f,d){function b(a,c){var b,d,g,h=a.nodeName.toLowerCase();return"area"===h?(b=a.parentNode,d=b.name,a.href&&d&&"map"===b.nodeName.toLowerCase()?(g=f("img[usemap=#"+d+"]")[0],!!g&&e(g)):!1):(/input|select|textarea|button|object/.test(h)?!a.disabled:"a"===h?a.href||c:c)&&e(a)}function e(a){return f.expr.filters.visible(a)&&!f(a).parents().addBack().filter(function(){return"hidden"===f.css(this,"visibility")}).length}var a=0,c=/^ui-id-\d+$/;f.ui=f.ui||{};f.extend(f.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,
COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});f.fn.extend({focus:function(a){return function(c,b){return"number"==typeof c?this.each(function(){var a=this;setTimeout(function(){f(a).focus();b&&b.call(a)},c)}):a.apply(this,arguments)}}(f.fn.focus),scrollParent:function(){var a;return a=f.ui.ie&&/(static|relative)/.test(this.css("position"))||
/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.css(this,"position"))&&/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?f(document):a},zIndex:function(a){if(a!==d)return this.css("zIndex",a);if(this.length){var c,
b;for(a=f(this[0]);a.length&&a[0]!==document;){if(c=a.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(b=parseInt(a.css("zIndex"),10),!isNaN(b)&&0!==b))return b;a=a.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){c.test(this.id)&&f(this).removeAttr("id")})}});f.extend(f.expr[":"],{data:f.expr.createPseudo?f.expr.createPseudo(function(a){return function(c){return!!f.data(c,a)}}):
function(a,c,b){return!!f.data(a,b[3])},focusable:function(a){return b(a,!isNaN(f.attr(a,"tabindex")))},tabbable:function(a){var c=f.attr(a,"tabindex"),e=isNaN(c);return(e||0<=c)&&b(a,!e)}});f("<a>").outerWidth(1).jquery||f.each(["Width","Height"],function(a,c){function b(a,c,b,d){return f.each(e,function(){c-=parseFloat(f.css(a,"padding"+this))||0;b&&(c-=parseFloat(f.css(a,"border"+this+"Width"))||0);d&&(c-=parseFloat(f.css(a,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],
g=c.toLowerCase(),h={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+c]=function(a){return a===d?h["inner"+c].call(this):this.each(function(){f(this).css(g,b(this,a)+"px")})};f.fn["outer"+c]=function(a,e){return"number"!=typeof a?h["outer"+c].call(this,a):this.each(function(){f(this).css(g,b(this,a,!0,e)+"px")})}});f.fn.addBack||(f.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
f("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(f.fn.removeData=function(a){return function(c){return arguments.length?a.call(this,f.camelCase(c)):a.call(this)}}(f.fn.removeData));f.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());f.support.selectstart="onselectstart"in document.createElement("div");f.fn.extend({disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
f.extend(f.ui,{plugin:{add:function(a,c,b){var e;a=f.ui[a].prototype;for(e in b)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([c,b[e]])},call:function(a,c,b){var e=a.plugins[c];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(c=0;e.length>c;c++)a.options[e[c][0]]&&e[c][1].apply(a.element,b)}},hasScroll:function(a,c){if("hidden"===f(a).css("overflow"))return!1;c=c&&"left"===c?"scrollLeft":"scrollTop";var b=!1;return 0<a[c]?!0:(a[c]=1,b=0<a[c],a[c]=0,b)}})})(jQuery);
(function(f,d){var b=0,e=Array.prototype.slice,a=f.cleanData;f.cleanData=function(c){for(var b,e=0;null!=(b=c[e]);e++)try{f(b).triggerHandler("remove")}catch(n){}a(c)};f.widget=function(a,b,e){var c={},g=a.split(".")[0];a=a.split(".")[1];var h=g+"-"+a;e||(e=b,b=f.Widget);f.expr[":"][h.toLowerCase()]=function(a){return!!f.data(a,h)};f[g]=f[g]||{};var m=f[g][a];var p=f[g][a]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),d):new p(a,c)};f.extend(p,m,{version:e.version,
_proto:f.extend({},e),_childConstructors:[]});var q=new b;q.options=f.widget.extend({},q.options);f.each(e,function(a,e){return f.isFunction(e)?(c[a]=function(){var c=function(){return b.prototype[a].apply(this,arguments)},d=function(c){return b.prototype[a].apply(this,c)};return function(){var a,b=this._super,f=this._superApply;return this._super=c,this._superApply=d,a=e.apply(this,arguments),this._super=b,this._superApply=f,a}}(),d):(c[a]=e,d)});p.prototype=f.widget.extend(q,{widgetEventPrefix:m?
q.widgetEventPrefix:a},c,{constructor:p,namespace:g,widgetName:a,widgetFullName:h});m?(f.each(m._childConstructors,function(a,c){a=c.prototype;f.widget(a.namespace+"."+a.widgetName,p,c._proto)}),delete m._childConstructors):b._childConstructors.push(p);f.widget.bridge(a,p)};f.widget.extend=function(a){for(var c,b,n=e.call(arguments,1),l=0,k=n.length;k>l;l++)for(c in n[l])b=n[l][c],n[l].hasOwnProperty(c)&&b!==d&&(a[c]=f.isPlainObject(b)?f.isPlainObject(a[c])?f.widget.extend({},a[c],b):f.widget.extend({},
b):b);return a};f.widget.bridge=function(a,b){var c=b.prototype.widgetFullName||a;f.fn[a]=function(g){var h="string"==typeof g,k=e.call(arguments,1),m=this;return g=!h&&k.length?f.widget.extend.apply(null,[g].concat(k)):g,h?this.each(function(){var b,e=f.data(this,c);return e?f.isFunction(e[g])&&"_"!==g.charAt(0)?(b=e[g].apply(e,k),b!==e&&b!==d?(m=b&&b.jquery?m.pushStack(b.get()):b,!1):d):f.error("no such method '"+g+"' for "+a+" widget instance"):f.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+
g+"'")}):this.each(function(){var a=f.data(this,c);a?a.option(g||{})._init():f.data(this,c,new b(g,this))}),m}};f.Widget=function(){};f.Widget._childConstructors=[];f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,e){e=f(e||this.defaultElement||this)[0];this.element=f(e);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=f.widget.extend({},this.options,this._getCreateOptions(),a);
this.bindings=f();this.hoverable=f();this.focusable=f();e!==this&&(f.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=f(e.style?e.ownerDocument:e.document||e),this.window=f(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:f.noop,_getCreateEventData:f.noop,_create:f.noop,_init:f.noop,destroy:function(){this._destroy();
this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(f.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:f.noop,widget:function(){return this.element},option:function(a,b){var c,e,g=a;if(0===
arguments.length)return f.widget.extend({},this.options);if("string"==typeof a)if(g={},c=a.split("."),a=c.shift(),c.length){var k=g[a]=f.widget.extend({},this.options[a]);for(e=0;c.length-1>e;e++)k[c[e]]=k[c[e]]||{},k=k[c[e]];if(a=c.pop(),b===d)return k[a]===d?null:k[a];k[a]=b}else{if(b===d)return this.options[a]===d?null:this.options[a];g[a]=b}return this._setOptions(g),this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,b){return this.options[a]=
b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,b,e){var c,g=this;"boolean"!=typeof a&&(e=b,b=a,a=!1);e?(b=c=f(b),this.bindings=this.bindings.add(b)):(e=b,b=this.element,c=this.widget());f.each(e,function(e,
h){function k(){return a||!0!==g.options.disabled&&!f(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):d}"string"!=typeof h&&(k.guid=h.guid=h.guid||k.guid||f.guid++);var l=e.match(/^(\w+)\s*(.*)$/);e=l[1]+g.eventNamespace;(l=l[2])?c.delegate(l,e,k):b.bind(e,k)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"==typeof a?
c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){f(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){f(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){f(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){f(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,b,e){var c,d=this.options[a];
if(e=e||{},b=f.Event(b),b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),b.target=this.element[0],a=b.originalEvent)for(c in a)c in b||(b[c]=a[c]);return this.element.trigger(b,e),!(f.isFunction(d)&&!1===d.apply(this.element[0],[b].concat(e))||b.isDefaultPrevented())}};f.each({show:"fadeIn",hide:"fadeOut"},function(a,b){f.Widget.prototype["_"+a]=function(c,e,d){"string"==typeof e&&(e={effect:e});var g=e?!0===e||"number"==typeof e?b:e.effect||b:a;e=e||{};"number"==typeof e&&
(e={duration:e});var h=!f.isEmptyObject(e);e.complete=d;e.delay&&c.delay(e.delay);h&&f.effects&&f.effects.effect[g]?c[a](e):g!==a&&c[g]?c[g](e.duration,e.easing,d):c.queue(function(b){f(this)[a]();d&&d.call(c[0]);b()})}})})(jQuery);
(function(f){var d=!1;f(document).mouseup(function(){d=!1});f.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(e){return b._mouseDown(e)}).bind("click."+this.widgetName,function(e){return!0===f.data(e.target,b.widgetName+".preventClickEvent")?(f.removeData(e.target,b.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!d){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var e=this,a=1===b.which,c="string"==typeof this.options.cancel&&b.target.nodeName?f(b.target).closest(this.options.cancel).length:!1;return a&&!c&&this._mouseCapture(b)?(this.mouseDelayMet=
!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===f.data(b.target,this.widgetName+".preventClickEvent")&&f.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return e._mouseMove(a)},this._mouseUpDelegate=function(a){return e._mouseUp(a)},
f(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(b){return f.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),
!this._mouseStarted)},_mouseUp:function(b){return f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&f.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(f){function d(b,a,c){return b>a&&a+c>b}function b(b){return/left|right/.test(b.css("float"))||/inline|table-cell/.test(b.css("display"))}f.widget("ui.sortable",f.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,
scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===e.axis||b(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");
this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,a){"disabled"===b?(this.options[b]=a,this.widget().toggleClass("ui-sortable-disabled",!!a)):f.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,a){var c=null,e=!1,d=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),f(b.target).parents().each(function(){return f.data(this,
d.widgetName+"-item")===d?(c=f(this),!1):void 0}),f.data(b.target,d.widgetName+"-item")===d&&(c=f(b.target)),c?!this.options.handle||a||(f(this.options.handle,c).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e)?(this.currentItem=c,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(b,a,c){var e;a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),
this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",a.cursor),this.storedStylesheet=f("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(e)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),
this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",b,this._uiHash(this));return f.ui.ddmanager&&
(f.ui.ddmanager.current=this),f.ui.ddmanager&&!a.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var a,c,e;var d=this.options;var n=!1;this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+
this.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=
n=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(b.pageY-f(document).scrollTop()<d.scrollSensitivity?n=f(document).scrollTop(f(document).scrollTop()-d.scrollSpeed):f(window).height()-(b.pageY-f(document).scrollTop())<d.scrollSensitivity&&(n=f(document).scrollTop(f(document).scrollTop()+d.scrollSpeed)),b.pageX-f(document).scrollLeft()<d.scrollSensitivity?n=f(document).scrollLeft(f(document).scrollLeft()-d.scrollSpeed):f(window).width()-(b.pageX-f(document).scrollLeft())<d.scrollSensitivity&&(n=f(document).scrollLeft(f(document).scrollLeft()+
d.scrollSpeed))),!1!==n&&f.ui.ddmanager&&!d.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,b));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(d=this.items.length-1;0<=d;d--)if(a=this.items[d],c=a.item[0],e=this._intersectsWithPointer(a),e&&a.instance===this.currentContainer&&c!==this.currentItem[0]&&
this.placeholder[1===e?"next":"prev"]()[0]!==c&&!f.contains(this.placeholder[0],c)&&("semi-dynamic"===this.options.type?!f.contains(this.element[0],c):!0)){if(this.direction=1===e?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(a))break;this._rearrange(b,a);this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),f.ui.ddmanager&&f.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,
a){if(b){if(f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,b),this.options.revert){var c=this;a=this.placeholder.offset();var e=this.options.axis,d={};e&&"x"!==e||(d.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));e&&"y"!==e||(d.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;f(this.helper).animate(d,parseInt(this.options.revert,
10)||500,function(){c._clear(b)})}else this._clear(b,a);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=
0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var a=this._getItemsAsjQuery(b&&b.connected),c=[];return b=
b||{},f(a).each(function(){var a=(f(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);a&&c.push((b.key||a[1]+"[]")+"="+(b.key&&b.expression?a[1]:a[2]))}),!c.length&&b.key&&c.push(b.key+"="),c.join("&")},toArray:function(b){var a=this._getItemsAsjQuery(b&&b.connected),c=[];return b=b||{},a.each(function(){c.push(f(b.item||this).attr(b.attribute||"id")||"")}),c},_intersectsWith:function(b){var a=this.positionAbs.left,c=a+this.helperProportions.width,e=this.positionAbs.top,
d=e+this.helperProportions.height,f=b.left,l=f+b.width,k=b.top,m=k+b.height,p=this.offset.click.top,q=this.offset.click.left;p="x"===this.options.axis||e+p>k&&m>e+p;q="y"===this.options.axis||a+q>f&&l>a+q;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?p&&q:a+this.helperProportions.width/2>f&&l>c-this.helperProportions.width/2&&e+this.helperProportions.height/
2>k&&m>d-this.helperProportions.height/2},_intersectsWithPointer:function(b){var a="x"===this.options.axis||d(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||d(this.positionAbs.left+this.offset.click.left,b.left,b.width);a=a&&b;b=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();return a?this.floating?c&&"right"===c||"down"===b?2:1:b&&("down"===b?2:1):!1},_intersectsWithSides:function(b){var a=d(this.positionAbs.top+this.offset.click.top,
b.top+b.height/2,b.height);b=d(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&b||"left"===e&&!b:c&&("down"===c&&a||"up"===c&&!a)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!==b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!==b&&(0<b?
"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor===String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var a,c,d=[],e=[],n=this._connectWith();if(n&&b)for(b=n.length-1;0<=b;b--){var l=f(n[b]);for(a=l.length-1;0<=a;a--)(c=f.data(l[a],this.widgetFullName))&&c!==this&&!c.options.disabled&&e.push([f.isFunction(c.options.items)?c.options.items.call(c.element):f(c.options.items,
c.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),c])}e.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=e.length-1;0<=b;b--)e[b][0].each(function(){d.push(this)});return f(d)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=f.grep(this.items,
function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var a,c,d,e,n=this.items,l=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):f(this.options.items,this.element),this]];if((e=this._connectWith())&&this.ready)for(a=e.length-1;0<=a;a--){var k=f(e[a]);for(c=k.length-1;0<=c;c--)(d=f.data(k[c],this.widgetFullName))&&d!==this&&!d.options.disabled&&(l.push([f.isFunction(d.options.items)?
d.options.items.call(d.element[0],b,{item:this.currentItem}):f(d.options.items,d.element),d]),this.containers.push(d))}for(a=l.length-1;0<=a;a--)for(b=l[a][1],k=l[a][0],c=0,e=k.length;e>c;c++)d=f(k[c]),d.data(this.widgetName+"-item",b),n.push({item:d,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var a,c,d;for(a=this.items.length-1;0<=a;a--){var e=this.items[a];e.instance!==this.currentContainer&&
this.currentContainer&&e.item[0]!==this.currentItem[0]||(c=this.options.toleranceElement?f(this.options.toleranceElement,e.item):e.item,b||(e.width=c.outerWidth(),e.height=c.outerHeight()),d=c.offset(),e.left=d.left,e.top=d.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(a=this.containers.length-1;0<=a;a--)d=this.containers[a].element.offset(),this.containers[a].containerCache.left=d.left,this.containers[a].containerCache.top=
d.top,this.containers[a].containerCache.width=this.containers[a].element.outerWidth(),this.containers[a].containerCache.height=this.containers[a].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var a,c=b.options;c.placeholder&&c.placeholder.constructor!==String||(a=c.placeholder,c.placeholder={element:function(){var c=b.currentItem[0].nodeName.toLowerCase(),d=f("<"+c+">",b.document[0]).addClass(a||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");
return"tr"===c?b.currentItem.children().each(function(){f("<td>&#160;</td>",b.document[0]).attr("colspan",f(this).attr("colspan")||1).appendTo(d)}):"img"===c&&d.attr("src",b.currentItem.attr("src")),a||d.css("visibility","hidden"),d},update:function(d,e){(!a||c.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||
0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}});b.placeholder=f(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(e){var a,c,g,h,n,l=c=null;for(a=this.containers.length-1;0<=a;a--)f.contains(this.currentItem[0],this.containers[a].element[0])||(this._intersectsWith(this.containers[a].containerCache)?c&&f.contains(this.containers[a].element[0],c.element[0])||(c=this.containers[a],l=
a):this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",e,this._uiHash(this)),this.containers[a].containerCache.over=0));if(c)if(1===this.containers.length)this.containers[l].containerCache.over||(this.containers[l]._trigger("over",e,this._uiHash(this)),this.containers[l].containerCache.over=1);else{a=1E4;var k=null;var m=(n=c.floating||b(this.currentItem))?"left":"top";var p=n?"width":"height";var q=this.positionAbs[m]+this.offset.click[m];for(c=this.items.length-1;0<=c;c--)f.contains(this.containers[l].element[0],
this.items[c].item[0])&&this.items[c].item[0]!==this.currentItem[0]&&(!n||d(this.positionAbs.top+this.offset.click.top,this.items[c].top,this.items[c].height))&&(g=this.items[c].item.offset()[m],h=!1,Math.abs(g-q)>Math.abs(g+this.items[c][p]-q)&&(h=!0,g+=this.items[c][p]),a>Math.abs(g-q)&&(a=Math.abs(g-q),k=this.items[c],this.direction=h?"up":"down"));(k||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[l]&&(k?this._rearrange(e,k,null,!0):this._rearrange(e,null,this.containers[l].element,
!0),this._trigger("change",e,this._uiHash()),this.containers[l]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[l],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[l]._trigger("over",e,this._uiHash(this)),this.containers[l].containerCache.over=1)}},_createHelper:function(b){var a=this.options;b=f.isFunction(a.helper)?f(a.helper.apply(this.element[0],[b,this.currentItem])):"clone"===a.helper?this.currentItem.clone():this.currentItem;
return b.parents("body").length||f("parent"!==a.appendTo?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!b[0].style.width||a.forceHelperSize)&&b.width(this.currentItem.width()),(!b[0].style.height||a.forceHelperSize)&&b.height(this.currentItem.height()),
b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));f.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();
var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&f.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&f.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,a,c,d=this.options;"parent"===d.containment&&(d.containment=this.helper[0].parentNode);"document"!==d.containment&&"window"!==d.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,f("document"===d.containment?document:window).width()-this.helperProportions.width-this.margins.left,(f("document"===d.containment?document:
window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(d.containment)||(b=f(d.containment)[0],a=f(d.containment).offset(),c="hidden"!==f(b).css("overflow"),this.containment=[a.left+(parseInt(f(b).css("borderLeftWidth"),10)||0)+(parseInt(f(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(f(b).css("borderTopWidth"),10)||0)+(parseInt(f(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,
b.offsetWidth):b.offsetWidth)-(parseInt(f(b).css("borderLeftWidth"),10)||0)-(parseInt(f(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(f(b).css("borderTopWidth"),10)||0)-(parseInt(f(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,a){a||(a=this.position);b="absolute"===b?1:-1;var c="absolute"!==this.cssPosition||this.scrollParent[0]!==
document&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(c[0].tagName);return{top:a.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():d?0:c.scrollTop())*b,left:a.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())*b}},_generatePosition:function(b){var a,c,d=this.options,e=b.pageX,n=b.pageY,
l="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,k=/(html|body)/i.test(l[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),b.pageY-
this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),d.grid&&(a=this.originalPageY+Math.round((n-this.originalPageY)/d.grid[1])*d.grid[1],n=this.containment?a-this.offset.click.top>=this.containment[1]&&a-this.offset.click.top<=this.containment[3]?a:a-this.offset.click.top>=
this.containment[1]?a-d.grid[1]:a+d.grid[1]:a,c=this.originalPageX+Math.round((e-this.originalPageX)/d.grid[0])*d.grid[0],e=this.containment?c-this.offset.click.left>=this.containment[0]&&c-this.offset.click.left<=this.containment[2]?c:c-this.offset.click.left>=this.containment[0]?c-d.grid[0]:c+d.grid[0]:c)),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():k?0:l.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():k?0:l.scrollLeft())}},_rearrange:function(b,a,c,d){c?c[0].appendChild(this.placeholder[0]):a.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?a.item[0]:a.item[0].nextSibling);var e=this.counter=this.counter?++this.counter:1;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(b,a){this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&
this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)"auto"!==this._storedCSS[c]&&"static"!==this._storedCSS[c]||(this._storedCSS[c]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!a&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&
this.domPosition.parent===this.currentItem.parent()[0]||a||d.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&(a||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(c=this.containers.length-1;0<=c;c--)a||d.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?
"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!a){this._trigger("beforeStop",b,this._uiHash());for(c=0;d.length>c;c++)d[c].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(a||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!a){for(c=0;d.length>c;c++)d[c].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=
!1,!0},_trigger:function(){!1===f.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var a=b||this;return{helper:a.helper,placeholder:a.placeholder||f([]),position:a.position,originalPosition:a.originalPosition,offset:a.positionAbs,item:a.currentItem,sender:b?b.element:null}}})})(jQuery);jQuery("#tdc-live-iframe").on("load",function(){jQuery("body").addClass("tdcComposerLoaded").removeClass("block-editor-page")});var tdcLivePanel;
(function(f,d){tdcLivePanel={$tdcAction:d,$tdcContent:d,$tdcIframeCover:d,_iframeSrc:d,$panel:d,_currentSettingsPanel:d,_currentSettingsPanelInLoading:!1,init:function(){tdcLivePanel.$panel=jQuery("#tdc-live-panel");tdcLivePanel.$token=jQuery("#td_magic_token");tdcLivePanel.$tdcAction=tdcLivePanel.$panel.find("#tdc_action");tdcLivePanel.$tdcPostId=tdcLivePanel.$panel.find("#tdc_post_id");tdcLivePanel.$tdcContent=tdcLivePanel.$panel.find("#tdc_content");tdcLivePanel.$tdcCustomized=tdcLivePanel.$panel.find("#tdc_customized");
tdcLivePanel.$tdcSinglePostContentWidth=tdcLivePanel.$panel.find("#tdc_single_post_content_width");tdcLivePanel.$tdbPostSettings=tdcLivePanel.$panel.find("#tdb_post_settings");if(0!==tdcLivePanel.$tdbPostSettings.length){var b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d=function(a){(new b(function(b){"value"===b[0].attributeName&&jQuery(a).trigger("change")})).observe(a,{attributes:!0})};tdcLivePanel.$panel.find(".td-box input[type=hidden]").each(function(a,
b){d(b)});tdcLivePanel.$panel.on("change","input",function(a){a.preventDefault();tdcLivePanel.$tdbPostSettings.data("changed",!0)})}tdcLivePanel.$tdcIframeCover=jQuery("#tdc-iframe-cover");tdcLivePanel.$panel.submit({},function(a){var b=jQuery("#tdc-live-iframe-temp");b.on("load",function(){var a=jQuery(this);if("tdc-live-iframe-temp"!==a.attr("id"))tdcAdminIFrameUI.checkIframe(a);else{var c=jQuery("#tdc-live-iframe");tdcLivePanel.$tdcIframeCover.removeClass("tdc-iframe-cover-show");c.addClass("tdc-remove-iframe");
setTimeout(function(){b.attr("class",c.attr("class"));b.removeClass("tdc-remove-iframe");c.remove();b.attr("id","tdc-live-iframe");tdcAdminIFrameUI.checkIframe(b);tdcLivePanel.$panel.attr("action","")},400)}})});tdcLivePanel.$panel.on("change","#tdc_page_template",function(a){a.preventDefault();a=jQuery(this);var b=a.data("control-id");jQuery("#hidden_"+b).val(a.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".tdc-page-template",function(a){a=jQuery(this);var b=
a.data("control-id");jQuery("#hidden_"+b).val(a.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".tdc-panel-menu",function(a){var b=jQuery(this);a=b.data("menu_id");b=b.data("menu_name");tdcLivePanelMenuSettings.showSettings(a,b)});tdcLivePanel.$panel.on("click",".tdc-page-settings",function(a){tdcLivePanelPageSettings.showSettings()})},setCurrentSettingsPanel:function(b){if(!f.isUndefined(b)){if(!f.isUndefined(tdcLivePanel._currentSettingsPanel)){if(tdcLivePanel._currentSettingsPanel===
b)return;var d=tdcLivePanel._currentSettingsPanel.hasClass("clear-position"),a=d?tdcLivePanel._currentSettingsPanel.getPosition(!1):tdcLivePanel._currentSettingsPanel.getPosition(!0);tdcLivePanel._currentSettingsPanel.removeClass("clear-position");tdcLivePanel._currentSettingsPanel.closeSettings()}tdcLivePanel._currentSettingsPanel=b;!f.isUndefined(d)&&d&&(tdcLivePanel._currentSettingsPanel.addClass("clear-position"),tdcLivePanel._currentSettingsPanel.setPosition(a))}},getCurrentSettingsPanel:function(){return tdcLivePanel._currentSettingsPanel},
submit:function(){var b=jQuery("#tdc-live-iframe");f.isUndefined(tdcLivePanel._iframeSrc)&&(tdcLivePanel._iframeSrc=b.attr("src"));var e="uid_"+Math.floor(1E4*Math.random()+1)+"_"+Math.floor(100*Math.random()+1),a=jQuery('<iframe id="tdc-live-iframe-temp" name="'+e+'" scrolling="auto" src="about:blank" style="width: 100%; height: 100%" class="tdc-live-iframe-temp"></iframe>');a.insertAfter(b);a.on("load",function(){jQuery(a.get(0).contentWindow).scrollTop(jQuery(b.get(0).contentWindow).scrollTop())});
tdcLivePanel.$panel.attr("target",e);tdcLivePanel.$panel.attr("action",tdcLivePanel._iframeSrc);tdcLivePanel.$tdcIframeCover.show();tdcLivePanel.$tdcIframeCover.addClass("tdc-iframe-cover-show");e={error:d,getShortcode:""};tdcIFrameData.getShortcodeFromData(e);f.isUndefined(e.error)||tdcDebug.log(e.error);f.isUndefined(e.getShortcode)||(tdcLivePanel.$tdcContent.val(e.getShortcode),window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(e.getShortcode));tdcLivePanel.$tdcAction.val("preview");tdcLivePanel.$tdcCustomized.val(JSON.stringify(window.tdcAdminSettings.customized));
tdcLivePanel.$panel.submit()}};tdcLivePanel.init()})(_);function preinit(f){api.menuList=f.find("#menu-to-edit");api.targetList=api.menuList}var tdcLivePanelMenuSettings;
(function(f,d){tdcLivePanelMenuSettings={_isInitialized:!1,_menuId:d,_menuName:d,_url:d,_currentIframeId:d,$_currentIframeMenuSettings:d,$_tdcMenuSettings:d,$_iframeCloseButton:d,$_iframeApplyButton:d,$_iframeOkButton:d,init:function(){tdcLivePanelMenuSettings._isInitialized||(tdcLivePanelMenuSettings.$_tdcMenuSettings=jQuery("#tdc-menu-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(b,d){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelMenuSettings);tdcLivePanelMenuSettings._menuId=
b;tdcLivePanelMenuSettings._menuName=d;tdcLivePanelMenuSettings._url=window.tdcAdminSettings.adminUrl+"/nav-menus.php?action=edit&menu="+b+"&tdc-menu-settings=1";tdcLivePanelMenuSettings._currentIframeId="tdc-iframe-settings-menu-"+tdcLivePanelMenuSettings._menuId;tdcLivePanelMenuSettings.$_currentIframeMenuSettings=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+tdcLivePanelMenuSettings._currentIframeId);var a=tdcLivePanelMenuSettings._currentIframeId+"-data",c=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+
a);c.length||(c=jQuery('<div id="'+a+'" style="display: none"></div>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.append(c));tdcLivePanelMenuSettings.$_tdcMenuSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelMenuSettings.$_tdcMenuSettings);tdcLivePanelMenuSettings.$_currentIframeMenuSettings.length?(tdcLivePanelMenuSettings.$_currentIframeMenuSettings.show(),tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:b,menuName:d}),tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId)):
(tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass("tdc-dropped"),tdcLivePanelMenuSettings.$_currentIframeMenuSettings=jQuery('<iframe id="'+tdcLivePanelMenuSettings._currentIframeId+'" class="tdc-iframe-settings-menu" src="'+tdcLivePanelMenuSettings._url+'" data-menu_id="'+tdcLivePanelMenuSettings._menuId+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.children(".content").append(tdcLivePanelMenuSettings.$_currentIframeMenuSettings),
tdcLivePanelMenuSettings.$_currentIframeMenuSettings.on("load",function(){var a=tdcLivePanelMenuSettings.$_currentIframeMenuSettings.contents();tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass("tdc-dropped");tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:tdcLivePanelMenuSettings._menuId,menuName:tdcLivePanelMenuSettings._menuName});tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId);a.find("body").on("mousedown mouseup",function(a){window.parent.jQuery("#tdc-menu-settings").trigger(a)});
tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()}));tdcLivePanelMenuSettings.$_currentIframeMenuSettings.siblings(".tdc-iframe-settings-menu").each(function(a,b){a=jQuery(b);a.is(":visible")&&(tdcLivePanelMenuSettings._synchronizeIframeMenuData(a.attr("id")),a.hide())});tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()},_closeSettings:function(){if(!f.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)){var b=
jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")),d=jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")+"-data"),a=d.html(),c=b.contents().find("#update-nav-menu");""!==a&&(c.html(a),tdcLivePanelMenuSettings._reinitWpNavMenu(b[0].contentWindow||b[0].contentDocument),d.html(""));tdcLivePanelMenuSettings.$_tdcMenuSettings.hide();b.hide()}},closeSettings:function(){f.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)||(tdcLivePanelMenuSettings.$_iframeCloseButton.trigger("click"),
tdcLivePanelMenuSettings.removeClass("clear-position"))},setPosition:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.css({top:b.top,left:b.left})},getPosition:function(b){var d={};d.top=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().top-jQuery(window).scrollTop();d.left=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().left-jQuery(window).scrollLeft();b&&(d.top+=tdcLivePanelMenuSettings.$_tdcMenuSettings.height()/2,d.left+=tdcLivePanelMenuSettings.$_tdcMenuSettings.width()/2);return d},
addClass:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass(b)},removeClass:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass(b)},hasClass:function(b){return tdcLivePanelMenuSettings.$_tdcMenuSettings.hasClass(b)},_synchronizeIframeMenuData:function(b){var d=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+b+"-data"),a=d.html();b=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+b);var c=b.contents().find("#update-nav-menu");""===a?d.html(c.contents().clone()):(c.html(a),
tdcLivePanelMenuSettings._reinitWpNavMenu(b[0].contentWindow||b[0].contentDocument))},_reinitWpNavMenu:function(b){b.menus.oneThemeLocationNoMenus=!1;b.wpNavMenu.jQueryExtensions=function(){};b.wpNavMenu.attachMenuEditListeners=function(){};b.wpNavMenu.attachQuickSearchListeners=function(){};b.wpNavMenu.attachThemeLocationsListeners=function(){};b.wpNavMenu.attachMenuSaveSubmitListeners=function(){};b.wpNavMenu.attachTabsPanelListeners=function(){};b.wpNavMenu.attachUnsavedChangesListener=function(){};
b.wpNavMenu.initManageLocations=function(){};b.wpNavMenu.initAccessibility=function(){};b.wpNavMenu.initToggles=function(){};b.wpNavMenu.initPreviewing=function(){};b.wpNavMenu.init()},_setIframeInterface:function(b){function d(a,b){var c=jQuery("#"+a),d=c.contents();a=jQuery("#"+a+"-data");d.find("#update-nav-menu").find("select[name*=td_mega_menu_cat]").each(function(a,b){var c=jQuery(b);a=c.find("option");b=c.find("option:first");""===c.val()?(a.removeAttr("selected"),b.attr("selected","selected")):
a.each(function(a,b){a=jQuery(b);c.val()===a.attr("value")?a.attr("selected","selected"):a.removeAttr("selected")})});d.find("#update-nav-menu").find("input").each(function(a,b){a=jQuery(b);a.attr("value",a.val())});a.html(d.find("#update-nav-menu").contents().clone());!0===b&&(tdcLivePanelMenuSettings.$_tdcMenuSettings.hide(),c.hide())}function a(a){a=jQuery(a);var b=a.data("current_iframe");a=a.data("current_menu");b=jQuery("#"+b);var c=b.contents();(b[0].contentWindow||b[0].contentDocument).wpNavMenu.eventOnClickMenuSave();
b=c.find("#update-nav-menu").serializeArray();window.tdcAdminSettings.customized.menus["existing_menu_"+a]=JSON.stringify(b);tdcLivePanel.submit()}if(f.isUndefined(b))tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeCloseButton.hide(),tdcLivePanelMenuSettings.$_iframeApplyButton.hide(),tdcLivePanelMenuSettings.$_iframeOkButton.hide();else{var c=b.menuId;b=b.menuName;f.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)&&(tdcLivePanelMenuSettings.$_iframeCloseButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-close-button"),tdcLivePanelMenuSettings.$_iframeCloseButton.click(function(a){tdcLivePanelMenuSettings._closeSettings()}));
f.isUndefined(tdcLivePanelMenuSettings.$_iframeApplyButton)&&(tdcLivePanelMenuSettings.$_iframeApplyButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-apply-button"),tdcLivePanelMenuSettings.$_iframeApplyButton.click(function(b){d(jQuery(this).data("current_iframe"),!1);a(this)}));f.isUndefined(tdcLivePanelMenuSettings.$_iframeOkButton)&&(tdcLivePanelMenuSettings.$_iframeOkButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-ok-button"),tdcLivePanelMenuSettings.$_iframeOkButton.click(function(b){d(jQuery(this).data("current_iframe"),
!0);a(this)}));tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".title").html("MENU: "+b);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe","tdc-iframe-settings-menu-"+c);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-menu-"+c);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-menu-"+c);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",c);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
c);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",c);tdcLivePanelMenuSettings.$_iframeCloseButton.show();tdcLivePanelMenuSettings.$_iframeApplyButton.show();tdcLivePanelMenuSettings.$_iframeOkButton.show()}},saveMenuSettings:function(){tdcLivePanelMenuSettings.$_tdcMenuSettings.find("iframe").each(function(b,d){b=jQuery(d);tdcLivePanelMenuSettings._synchronizeIframeMenuData(b.attr("id"));(d.contentWindow||d.contentDocument).wpNavMenu.eventOnClickMenuSave();d=b.data("menu_id");b=b.contents().find("#update-nav-menu");
var a=b.serializeArray(),c={};b.find("input[name=nav-menu-data]").val(JSON.stringify(a));b.find("input[type=hidden]").each(function(a,b){a=jQuery(b);c[a.attr("name")]=a.val()});jQuery.ajax({url:"nav-menus.php?menu="+d,method:"POST",data:c})})}};tdcLivePanelMenuSettings.init()})(_);var tdcLivePanelPageSettings;
(function(f,d){tdcLivePanelPageSettings={_isInitialized:!1,_url:d,_currentIframeId:d,$_tdcPageSettings:d,$_currentIframePageSettings:d,$_iframeCloseButton:d,$_iframeApplyButton:d,$_iframeOkButton:d,init:function(){tdcLivePanelPageSettings._isInitialized||(tdcLivePanelPageSettings.$_tdcPageSettings=jQuery("#tdc-page-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelPageSettings);tdcLivePanelPageSettings._url=window.tdcAdminSettings.editPostUrl+
"&tdc-page-settings=1";tdcLivePanelPageSettings.$_currentIframePageSettings=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-settings-page");tdcLivePanelPageSettings.$_tdcPageSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelPageSettings.$_tdcPageSettings);tdcLivePanelPageSettings.$_currentIframePageSettings.length?(tdcLivePanelPageSettings.$_currentIframePageSettings.show(),tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"})):(tdcLivePanelPageSettings.$_tdcPageSettings.addClass("tdc-dropped"),
tdcLivePanelPageSettings.$_currentIframePageSettings=jQuery('<iframe class="tdc-iframe-settings-page" src="'+tdcLivePanelPageSettings._url+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelPageSettings.$_tdcPageSettings.children(".content").append(tdcLivePanelPageSettings.$_currentIframePageSettings),tdcLivePanelPageSettings.$_currentIframePageSettings.on("load",function(){var b=tdcLivePanelPageSettings.$_currentIframePageSettings.contents();tdcLivePanelPageSettings.$_tdcPageSettings.removeClass("tdc-dropped");
tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"});b.find("body").on("mousedown mouseup",function(b){window.parent.jQuery("#tdc-page-settings").trigger(b)});tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()}));tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()},_setIframeInterface:function(b){function d(a){var b=jQuery("iframe.tdc-iframe-settings-page");b.contents();
!0===a&&(tdcLivePanelPageSettings.$_tdcPageSettings.hide(),b.hide())}function a(a){a=jQuery("iframe.tdc-iframe-settings-page").contents().find("#post").serializeArray();for(var b={td_homepage_loop:{},td_page:{},page_template:""},c=0;c<a.length;c++){var d=a[c].name;"td_homepage_loop[td_sidebar_position]"===d||"td_homepage_loop[td_sidebar]"===d||"td_homepage_loop[td_layout]"===d||"td_homepage_loop[list_custom_title_show]"===d||"td_homepage_loop[list_custom_title]"===d||"td_homepage_loop[post_ids]"===
d||"td_homepage_loop[category_id]"===d||"td_homepage_loop[category_ids]"===d||"td_homepage_loop[tag_slug]"===d||"td_homepage_loop[autors_id]"===d||"td_homepage_loop[installed_post_types]"===d||"td_homepage_loop[sort]"===d||"td_homepage_loop[limit]"===d||"td_homepage_loop[offset]"===d||"td_homepage_loop[el_class]"===d||"td_homepage_loop[show_featured_posts]"===d||"td_homepage_loop[td_unique_articles]"===d||"td_homepage_loop[td_unique_articles]"===d?(d=d.replace(/td_homepage_loop\[|\]/gi,""),b.td_homepage_loop[d]=
a[c].value):"td_page[td_unique_articles]"===d?b.td_page[d.replace(/td_page\[|\]/gi,"")]=a[c].value:"page_template"===d&&(b.page_template=a[c].value)}window.tdcAdminSettings.customized.page_settings=JSON.stringify(b);tdcLivePanel.submit()}f.isUndefined(b)?(tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeCloseButton.hide(),
tdcLivePanelPageSettings.$_iframeApplyButton.hide(),tdcLivePanelPageSettings.$_iframeOkButton.hide()):(f.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)&&(tdcLivePanelPageSettings.$_iframeCloseButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-close-button"),tdcLivePanelPageSettings.$_iframeCloseButton.click(function(a){tdcLivePanelPageSettings._closeSettings()})),f.isUndefined(tdcLivePanelPageSettings.$_iframeApplyButton)&&(tdcLivePanelPageSettings.$_iframeApplyButton=
tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-apply-button"),tdcLivePanelPageSettings.$_iframeApplyButton.click(function(b){d(!1);a(this)})),f.isUndefined(tdcLivePanelPageSettings.$_iframeOkButton)&&(tdcLivePanelPageSettings.$_iframeOkButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-ok-button"),tdcLivePanelPageSettings.$_iframeOkButton.click(function(b){d(!0);a(this)})),tdcLivePanelPageSettings.$_tdcPageSettings.find(".title").html("Page settings"),tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",
"tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeCloseButton.show(),tdcLivePanelPageSettings.$_iframeApplyButton.show(),tdcLivePanelPageSettings.$_iframeOkButton.show())},_closeSettings:function(){tdcLivePanelPageSettings.$_tdcPageSettings.hide();tdcLivePanelPageSettings.removeClass("clear-position");
tdcLivePanelPageSettings.setPosition({top:"",left:""})},closeSettings:function(){f.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)||tdcLivePanelPageSettings.$_iframeCloseButton.trigger("click")},setPosition:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.css({top:b.top,left:b.left})},getPosition:function(b){var d={};d.top=tdcLivePanelPageSettings.$_tdcPageSettings.offset().top-jQuery(window).scrollTop();d.left=tdcLivePanelPageSettings.$_tdcPageSettings.offset().left-jQuery(window).scrollLeft();
b&&(d.top+=tdcLivePanelPageSettings.$_tdcPageSettings.height()/2,d.left+=tdcLivePanelPageSettings.$_tdcPageSettings.width()/2);return d},addClass:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.addClass(b)},removeClass:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.removeClass(b)},hasClass:function(b){return tdcLivePanelPageSettings.$_tdcPageSettings.hasClass(b)}};tdcLivePanelPageSettings.init()})(_);
